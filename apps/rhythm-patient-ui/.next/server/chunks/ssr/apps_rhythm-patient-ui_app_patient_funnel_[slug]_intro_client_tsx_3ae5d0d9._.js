module.exports=[30711,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(59620);var e=a.i(8184),f=a.i(86071),g=a.i(63548);a.i(14240);var h=a.i(76756),i=a.i(90441);function j({title:a,subtitle:c,description:d,bulletPoints:e=[],ctaLabel:f="Assessment starten",onContinue:g,isLoading:j=!1}){let k=h.componentTokens.navigationButton,l=h.componentTokens.infoBox;return(0,b.jsxs)("div",{className:"min-h-screen",style:{background:`linear-gradient(to bottom, ${h.colors.primary[50]}, ${h.colors.background.light}, ${h.colors.neutral[50]})`},children:[(0,b.jsx)(i.default,{variant:"with-title",title:a,subtitle:"Rhythmologicum Connect",showBack:!0}),(0,b.jsx)("main",{className:"px-4 sm:px-6 lg:px-8 py-6",style:{paddingBottom:"calc(6rem + env(safe-area-inset-bottom))"},children:(0,b.jsxs)("div",{className:"w-full max-w-5xl mx-auto",children:[(0,b.jsx)("div",{className:"mb-8 flex items-center justify-center overflow-hidden",style:{height:"240px",borderRadius:h.radii["2xl"],border:`1px solid ${h.colors.primary[200]}`,background:`linear-gradient(to bottom right, ${h.colors.primary[100]}, ${h.colors.primary[50]})`},children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-3",children:"ðŸ§˜â€â™€ï¸"}),(0,b.jsx)("p",{className:"font-medium",style:{fontSize:h.typography.fontSize.sm,color:h.colors.primary[700]},children:"Rhythmologicum Connect"})]})}),c&&(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("span",{className:"inline-block bg-primary-600 text-white font-semibold uppercase tracking-wide",style:{fontSize:h.typography.fontSize.xs,padding:`${h.spacing.xs} ${h.spacing.md}`,borderRadius:h.radii.full},children:c})}),(0,b.jsx)("h1",{className:"font-bold text-slate-900 mb-4 leading-tight",style:{fontSize:h.typography.fontSize["3xl"],lineHeight:h.typography.lineHeight.tight},children:a}),d&&(0,b.jsx)("p",{className:"text-slate-600 mb-6",style:{fontSize:h.typography.fontSize.base,lineHeight:h.typography.lineHeight.relaxed},children:d}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6",children:[(0,b.jsx)("div",{className:"bg-white border border-slate-200",style:{padding:h.spacing.md,borderRadius:h.radii.lg,boxShadow:h.shadows.sm},children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-3xl mb-2",children:"â±ï¸"}),(0,b.jsx)("p",{className:"font-semibold text-slate-900 mb-1",style:{fontSize:h.typography.fontSize.sm},children:"Dauer"}),(0,b.jsx)("p",{className:"text-slate-600",style:{fontSize:h.typography.fontSize.xs},children:"5-10 Min"})]})}),(0,b.jsx)("div",{className:"bg-white border border-slate-200",style:{padding:h.spacing.md,borderRadius:h.radii.lg,boxShadow:h.shadows.sm},children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-3xl mb-2",children:"ðŸ”’"}),(0,b.jsx)("p",{className:"font-semibold text-slate-900 mb-1",style:{fontSize:h.typography.fontSize.sm},children:"Sicher"}),(0,b.jsx)("p",{className:"text-slate-600",style:{fontSize:h.typography.fontSize.xs},children:"Vertraulich"})]})})]}),e.length>0&&(0,b.jsxs)("div",{className:"bg-white border border-slate-200 mb-6",style:{padding:h.spacing.lg,borderRadius:h.radii.xl,boxShadow:h.shadows.sm},children:[(0,b.jsxs)("h2",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",style:{fontSize:h.typography.fontSize.lg},children:[(0,b.jsx)("span",{className:"text-primary-600",children:"âœ“"}),"Was Sie erwartet"]}),(0,b.jsx)("ul",{className:"space-y-3",children:e.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"shrink-0 bg-primary-100 text-primary-700 font-semibold flex items-center justify-center",style:{width:"24px",height:"24px",borderRadius:h.radii.full,fontSize:h.typography.fontSize.xs},children:c+1}),(0,b.jsx)("p",{className:"text-slate-700 flex-1",style:{fontSize:h.typography.fontSize.sm,lineHeight:h.typography.lineHeight.relaxed},children:a})]},c))})]}),(0,b.jsx)("div",{className:"bg-primary-50 border border-primary-200 mb-6",style:{padding:l.padding,borderRadius:l.borderRadius},children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"text-lg shrink-0",children:"â„¹ï¸"}),(0,b.jsx)("p",{className:"text-primary-900 flex-1",style:{fontSize:l.fontSize,lineHeight:l.lineHeight},children:"Nehmen Sie sich Zeit fÃ¼r die Beantwortung. Es gibt keine richtigen oder falschen Antworten."})]})}),(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsx)("button",{type:"button",onClick:g,disabled:j,className:"w-full bg-sky-600 text-white font-semibold hover:bg-sky-700 disabled:opacity-60 disabled:cursor-not-allowed active:scale-98 flex items-center justify-center gap-2",style:{padding:`${k.paddingY} ${k.paddingX}`,borderRadius:k.borderRadius,minHeight:k.minHeight,boxShadow:k.shadow,fontSize:k.fontSize,fontWeight:k.fontWeight,transition:k.transition},children:j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Bitte warten..."]}):(0,b.jsxs)(b.Fragment,{children:[f," â†’"]})})})]})})]})}a.i(24433);var k=a.i(60644),l=a.i(12453),m=a.i(46822);function n({funnelSlug:a,manifestData:h,manifestError:i}){let n=(0,d.useRouter)(),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1);(0,c.useEffect)(()=>{i||(async()=>{try{p(!0),r(null),z(!1);let b=await fetch(`/api/funnels/${a}/definition`);if(b.ok){let a=await b.json();v(a.title||"Assessment"),x({title:a.title||"Assessment",subtitle:a.subtitle??null,description:a.description??null})}if(h?.contentManifest){let a=h.contentManifest.pages.find(a=>"intro"===a.slug);if(a&&a.sections.length>0){B(!0),p(!1);return}}let c=await fetch(`/api/content/resolve?funnel=${a}&category=intro`);if(!c.ok){z(!0),t(null);return}let d=await c.json();if(d?.status==="missing_content"||!d.page){z(!0),t(null);return}t(d.page)}catch(a){console.error("[INTRO_PAGE_LOAD_FAILED]"),r("Intro-Inhalt konnte nicht geladen werden.")}finally{p(!1)}})()},[a,n,h,i]);let C=()=>{n.push(`/patient/funnel/${a}?skipIntro=true&startOver=true`)};if(i)return(0,b.jsx)("main",{className:"flex items-center justify-center bg-muted py-20 px-4",children:(0,b.jsxs)(g.Card,{padding:"lg",radius:"xl",className:"w-full max-w-md",border:!0,children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"âš ï¸"}),(0,b.jsx)("h2",{className:"text-xl font-bold mb-2 text-red-700",children:"Konfigurationsfehler"}),(0,b.jsx)("p",{className:"mb-4 text-neutral-700",children:i}),(0,b.jsx)(e.Button,{variant:"primary",fullWidth:!0,onClick:()=>n.push("/patient/funnels"),children:"ZurÃ¼ck zur Ãœbersicht"})]})});if(o)return(0,b.jsx)(f.LoadingSpinner,{size:"lg",text:"Bitte wartenâ€¦",centered:!0});if(A&&h?.contentManifest)return(0,b.jsxs)("main",{className:"min-h-screen bg-muted",children:[(0,b.jsx)(l.default,{className:"py-8",children:(0,b.jsx)(k.ContentBlockRenderer,{manifest:h.contentManifest,pageSlug:"intro",onBlockTypeError:(a,b)=>{console.error(`[INTRO_PAGE] Unsupported block type: ${a} in section ${b}`)}})}),(0,b.jsx)("div",{className:"bg-white border-t border-slate-200",children:(0,b.jsx)(l.default,{className:"py-6",children:(0,b.jsx)(e.Button,{variant:"primary",size:"lg",fullWidth:!0,onClick:C,children:"Assessment starten"})})}),h&&(0,b.jsx)("div",{className:"bg-slate-50 px-4 py-6",children:(0,b.jsx)(l.default,{children:(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:["ðŸ“‹ Funnel-Konfiguration (Version ",h.version,")"]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-600",children:"Assessment-Schritte:"}),(0,b.jsx)("span",{className:"font-medium text-slate-900",children:h.steps.length})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-600",children:"Algorithmus-Version:"}),(0,b.jsx)("span",{className:"font-mono text-xs text-slate-900",children:h.algorithmVersion})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-600",children:"Prompt-Version:"}),(0,b.jsx)("span",{className:"font-mono text-xs text-slate-900",children:h.promptVersion})]})]}),(0,b.jsxs)("details",{className:"mt-4",children:[(0,b.jsxs)("summary",{className:"cursor-pointer text-sm font-medium text-slate-700 hover:text-slate-900",children:["Schritte anzeigen (",h.steps.length,")"]}),(0,b.jsx)("ul",{className:"mt-2 space-y-1 pl-4",children:h.steps.map((a,c)=>(0,b.jsxs)("li",{className:"text-sm text-slate-600",children:[c+1,". ",a.title,a.questions&&(0,b.jsxs)("span",{className:"text-xs text-slate-500 ml-2",children:["(",a.questions.length," Fragen)"]})]},a.id))})]}),h.contentPages&&h.contentPages.length>0&&(0,b.jsxs)("details",{className:"mt-3",children:[(0,b.jsxs)("summary",{className:"cursor-pointer text-sm font-medium text-slate-700 hover:text-slate-900",children:["Content Pages (",h.contentPages.length,")"]}),(0,b.jsx)("ul",{className:"mt-2 space-y-1 pl-4",children:h.contentPages.map(a=>(0,b.jsxs)("li",{className:"text-sm text-slate-600",children:["ðŸ“„ ",a.title,(0,b.jsxs)("span",{className:"text-xs text-slate-500 ml-2",children:["(",a.slug,")"]})]},a.slug))})]})]})})})]});if(y&&!s){let a=w?.title||u||"Assessment",c=w?.subtitle,d=w?.description;return(0,b.jsx)("main",{className:"min-h-screen bg-muted",children:(0,b.jsx)(m.default,{className:"px-4 py-10",children:(0,b.jsxs)(g.Card,{"data-testid":"intro-missing-content-fallback",padding:"lg",radius:"xl",className:"w-full min-w-[320px]",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:a}),c&&(0,b.jsx)("p",{className:"mt-2 text-base sm:text-lg text-neutral-700",children:c}),d&&(0,b.jsx)("div",{className:"prose max-w-none mt-4 text-neutral-700",children:(0,b.jsx)("p",{children:d})}),!d&&(0,b.jsx)("p",{className:"mt-4 text-base text-neutral-700",children:"Inhalt ist noch nicht verfÃ¼gbar."}),(0,b.jsx)(e.Button,{variant:"primary",size:"lg",fullWidth:!0,onClick:C,className:"mt-6",children:"Direkt zum Assessment"})]})})})}if(q||!s)return(0,b.jsx)("main",{className:"flex items-center justify-center bg-muted py-20 px-4",children:(0,b.jsxs)(g.Card,{padding:"lg",radius:"xl",className:"w-full max-w-md",children:[(0,b.jsx)("p",{className:"mb-4 text-neutral-700",children:q||"Intro-Seite konnte nicht geladen werden."}),(0,b.jsx)(e.Button,{variant:"primary",fullWidth:!0,onClick:C,children:"Direkt zum Assessment"})]})});let D=function(a){if(!a)return[];let b=a.split("\n"),c=[];for(let a of b){let b=a.trim();if(b.match(/^[-*]\s+(.+)$/)){let a=b.replace(/^[-*]\s+/,"").trim();a&&c.push(a)}}return 0===c.length?["Beantworten Sie Fragen zu Ihrem aktuellen Stresslevel","Erhalten Sie eine persÃ¶nliche Auswertung","Entdecken Sie Ihre Resilienzfaktoren"]:c}(s.body_markdown),E=h?[...D.slice(0,3),`${h.steps.length} Schritte im Assessment`]:D;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j,{title:s.title,subtitle:u,description:s.excerpt||void 0,bulletPoints:E,ctaLabel:"Assessment starten",onContinue:C,isLoading:!1}),h&&(0,b.jsx)("div",{className:"bg-slate-50 py-6",children:(0,b.jsx)(l.default,{children:(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:["ðŸ“‹ Funnel-Konfiguration (Version ",h.version,")"]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-600",children:"Assessment-Schritte:"}),(0,b.jsx)("span",{className:"font-medium text-slate-900",children:h.steps.length})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-600",children:"Algorithmus-Version:"}),(0,b.jsx)("span",{className:"font-mono text-xs text-slate-900",children:h.algorithmVersion})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-600",children:"Prompt-Version:"}),(0,b.jsx)("span",{className:"font-mono text-xs text-slate-900",children:h.promptVersion})]})]}),(0,b.jsxs)("details",{className:"mt-4",children:[(0,b.jsxs)("summary",{className:"cursor-pointer text-sm font-medium text-slate-700 hover:text-slate-900",children:["Schritte anzeigen (",h.steps.length,")"]}),(0,b.jsx)("ul",{className:"mt-2 space-y-1 pl-4",children:h.steps.map((a,c)=>(0,b.jsxs)("li",{className:"text-sm text-slate-600",children:[c+1,". ",a.title,a.questions&&(0,b.jsxs)("span",{className:"text-xs text-slate-500 ml-2",children:["(",a.questions.length," Fragen)"]})]},a.id))})]}),h.contentPages&&h.contentPages.length>0&&(0,b.jsxs)("details",{className:"mt-3",children:[(0,b.jsxs)("summary",{className:"cursor-pointer text-sm font-medium text-slate-700 hover:text-slate-900",children:["Content Pages (",h.contentPages.length,")"]}),(0,b.jsx)("ul",{className:"mt-2 space-y-1 pl-4",children:h.contentPages.map(a=>(0,b.jsxs)("li",{className:"text-sm text-slate-600",children:["ðŸ“„ ",a.title,(0,b.jsxs)("span",{className:"text-xs text-slate-500 ml-2",children:["(",a.slug,")"]})]},a.slug))})]})]})})}),i&&(0,b.jsx)("div",{className:"bg-red-50 py-4",children:(0,b.jsx)(l.default,{children:(0,b.jsxs)("div",{className:"bg-red-100 border border-red-300 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-red-900",children:"âš ï¸ Manifest-Fehler"}),(0,b.jsx)("p",{className:"text-sm text-red-700 mt-1",children:i})]})})})]})}a.s(["default",()=>n],30711)}];

//# sourceMappingURL=apps_rhythm-patient-ui_app_patient_funnel_%5Bslug%5D_intro_client_tsx_3ae5d0d9._.js.map