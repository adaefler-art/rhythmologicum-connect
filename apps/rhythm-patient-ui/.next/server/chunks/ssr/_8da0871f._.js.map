{"version":3,"sources":["../../../../../../apps/rhythm-patient-ui/app/patient/support/SupportCaseList.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/rhythm-patient-ui/app/patient/support/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SupportCaseList = registerClientReference(\n    function() { throw new Error(\"Attempted to call SupportCaseList() from the server but SupportCaseList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/rhythm-patient-ui/app/patient/support/SupportCaseList.tsx\",\n    \"SupportCaseList\",\n);\n","/**\n * Patient Support Page - V05-I08.4, E6.5.1\n * \n * Allows patients to view their support cases and create new ones\n * Enforces dashboard-first policy\n */\n\nimport { redirect } from 'next/navigation'\nimport { createServerSupabaseClient } from '@/lib/db/supabase.server'\nimport { enforceDashboardFirst } from '@/lib/utils/dashboardFirstPolicy'\nimport { SupportCaseList } from './SupportCaseList'\n\nexport const dynamic = 'force-dynamic'\n\nexport default async function PatientSupportPage() {\n  const supabase = await createServerSupabaseClient()\n\n  // E6.5.1 AC3: Check authentication FIRST (401-first, no DB calls before auth)\n  const {\n    data: { user },\n    error: authError,\n  } = await supabase.auth.getUser()\n\n  if (authError || !user) {\n    redirect('/?error=authentication_required')\n  }\n\n  // E6.5.1 AC2: Enforce dashboard-first policy\n  const redirectUrl = await enforceDashboardFirst('/patient/support')\n  \n  if (redirectUrl) {\n    redirect(redirectUrl)\n  }\n\n  // Get patient profile (after auth and policy checks)\n  const { data: profile } = await supabase\n    .from('patient_profiles')\n    .select('id, full_name')\n    .eq('user_id', user.id)\n    .single()\n\n  if (!profile) {\n    redirect('/?error=no_profile')\n  }\n\n  return <SupportCaseList patientId={profile.id} patientName={profile.full_name} />\n}\n"],"names":[],"mappings":"sTAEO,IAAM,EAAkB,CAAA,EAAA,AAD/B,EAAA,CAAA,CAAA,OAC+B,uBAAA,AAAuB,EAClD,WAAa,MAAM,AAAI,MAAM,4OAA8O,EAC3Q,+FACA,0EAHG,IAAM,EAAkB,CAAA,EAD/B,AAC+B,EAD/B,CAAA,CAAA,OAC+B,uBAAA,AAAuB,EAClD,WAAa,MAAM,AAAI,MAAM,4OAA8O,EAC3Q,2EACA,sHCEJ,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAIe,eAAe,IAC5B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,0BAAA,AAA0B,IAG3C,CACJ,KAAM,MAAE,CAAI,CAAE,CACd,MAAO,CAAS,CACjB,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,IAE3B,GAAa,CAAC,CAAA,GAAM,AACtB,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,mCAIX,IAAM,EAAc,MAAM,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,oBAE5C,GACF,CAAA,EAAA,EAAA,KADe,GACf,AAAQ,EAAC,GAIX,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC7B,IAAI,CAAC,oBACL,MAAM,CAAC,iBACP,EAAE,CAAC,UAAW,EAAK,EAAE,EACrB,MAAM,GAMT,OAJI,AAAC,GACH,CAAA,EAAA,EAAA,CADY,OACJ,AAAR,EAAS,sBAGJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAW,EAAQ,EAAE,CAAE,YAAa,EAAQ,SAAS,EAC/E,kCAlCuB","ignoreList":[0]}