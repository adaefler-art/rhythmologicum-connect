module.exports=[23174,a=>{a.n(a.i(6429))},4344,a=>{a.n(a.i(92184))},69572,a=>{a.n(a.i(70457))},91050,a=>{a.n(a.i(13800))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},68297,a=>{a.n(a.i(10871))},19349,a=>{a.n(a.i(21496))},38650,a=>{a.n(a.i(5617))},77598,a=>{"use strict";let b={STRESS_ASSESSMENT:"stress-assessment",CARDIOVASCULAR_AGE:"cardiovascular-age",SLEEP_QUALITY:"sleep-quality",HEART_HEALTH_NUTRITION:"heart-health-nutrition",STRESS:"stress",STRESS_CHECK:"stress-check",STRESS_CHECK_V2:"stress-check-v2"},c={stress:b.STRESS_ASSESSMENT,"stress-check":b.STRESS_ASSESSMENT,"stress-check-v2":b.STRESS_ASSESSMENT};function d(a){let b=a.toLowerCase().trim();return c[b]||b}function e(a){let c=d(a);return Object.values(b).includes(c)}a.s(["AUDIT_ACTION",0,{CREATE:"create",UPDATE:"update",DELETE:"delete",APPROVE:"approve",REJECT:"reject",REQUEST_CHANGES:"request_changes",GENERATE:"generate",FLAG:"flag",ASSIGN:"assign",ACTIVATE:"activate",DEACTIVATE:"deactivate",ROLLOUT:"rollout",COMPLETE:"complete",ESCALATE:"escalate",DELETION_REQUEST:"deletion_request",DELETION_CANCEL:"deletion_cancel",DELETION_EXECUTE:"deletion_execute",ANONYMIZE:"anonymize"},"AUDIT_ENTITY_TYPE",0,{ASSESSMENT:"assessment",REPORT:"report",TASK:"task",FUNNEL_VERSION:"funnel_version",FUNNEL_CATALOG:"funnel_catalog",CONFIG:"config",CONSENT:"consent",ORGANIZATION:"organization",USER_ORG_MEMBERSHIP:"user_org_membership",CLINICIAN_ASSIGNMENT:"clinician_assignment",DOCUMENT:"document",PROCESSING_JOB:"processing_job",REVIEW_RECORD:"review_record",PRE_SCREENING_CALL:"pre_screening_call",DEVICE_SHIPMENT:"device_shipment",SUPPORT_CASE:"support_case",ACCOUNT:"account"},"AUDIT_SOURCE",0,{API:"api",JOB:"job",ADMIN_UI:"admin-ui",SYSTEM:"system"},"FUNNEL_SLUG_ALIASES",0,c,"PATIENT_SEX",0,{MALE:"male",FEMALE:"female",OTHER:"other",PREFER_NOT_TO_SAY:"prefer_not_to_say"},"QUESTION_TYPE",0,{RADIO:"radio",CHECKBOX:"checkbox",TEXT:"text",TEXTAREA:"textarea",NUMBER:"number",SCALE:"scale",SLIDER:"slider"},"getCanonicalFunnelSlug",()=>d,"isKnownFunnelSlug",()=>e])},18623,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/apps/rhythm-patient-ui/app/patient/funnel/[slug]/client.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/rhythm-patient-ui/app/patient/funnel/[slug]/client.tsx <module evaluation>","default")},46111,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/apps/rhythm-patient-ui/app/patient/funnel/[slug]/client.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/rhythm-patient-ui/app/patient/funnel/[slug]/client.tsx","default")},67510,a=>{"use strict";a.i(18623);var b=a.i(46111);a.n(b)},71826,a=>{"use strict";var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(91896),e=a.i(45259),f=a.i(67510),g=a.i(45618),h=a.i(77598),i=a.i(7779);function j(a){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a)}let k="FUNNEL_CATALOG_ONLY";async function l(a,b){try{if(j(b))return b;let c=b.toLowerCase().trim(),d=(0,h.getCanonicalFunnelSlug)(c),e=Object.entries(h.FUNNEL_SLUG_ALIASES).filter(([,a])=>a===d).map(([a])=>a);for(let b of Array.from(new Set([c,d,...e]))){let{data:c}=await a.from("funnels").select("id").eq("slug",b).maybeSingle();if(c?.id)return c.id}return null}catch(a){return console.error("[CONTENT_RESOLVER_RESOLVE_FUNNEL_ID_FAILED]"),null}}async function m(a){try{let b=function(){let a=i.env.NEXT_PUBLIC_SUPABASE_URL,b=i.env.SUPABASE_SERVICE_ROLE_KEY||i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!a||!b)throw Error("Supabase configuration missing");return(0,g.createClient)(a,b,{auth:{persistSession:!1}})}(),{funnel:c,category:d,slug:e,includeDrafts:f=!1}=a,m=await l(b,c);if(!m){if(!j(c)&&(0,h.isKnownFunnelSlug)(c))return{page:null,strategy:"not-found",error:k};if(!j(c)){let a=c.toLowerCase().trim(),d=(0,h.getCanonicalFunnelSlug)(a),e=Object.entries(h.FUNNEL_SLUG_ALIASES).filter(([,a])=>a===d).map(([a])=>a),f=Array.from(new Set([a,d,...e])),{data:g}=await b.from("funnels_catalog").select("id").in("slug",f).limit(1).maybeSingle();if(g?.id)return{page:null,strategy:"not-found",error:k}}return{page:null,strategy:"not-found",error:"FUNNEL_NOT_FOUND"}}let n=b.from("content_pages").select("*").eq("funnel_id",m).is("deleted_at",null);if(f||(n=n.eq("status","published")),d&&e){let{data:a,error:b}=await n.eq("category",d).eq("slug",e).single();if(!b&&a)return{page:a,strategy:"exact-match"}}if(d){let{data:a,error:b}=await n.eq("category",d).order("priority",{ascending:!1}).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(!b&&a)return{page:a,strategy:"category-default"}}let{data:o,error:p}=await n.order("priority",{ascending:!1}).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(!p&&o)return{page:o,strategy:"funnel-default"};return{page:null,strategy:"not-found",error:"No matching content page found"}}catch(a){return console.error("[CONTENT_RESOLVER_ERROR]"),{page:null,strategy:"not-found",error:"INTERNAL_ERROR"}}}async function n({params:a,searchParams:g}){let{slug:h}=await a,i="true"===(await g).skipIntro,j=await (0,d.createServerSupabaseClient)(),{data:{user:k}}=await j.auth.getUser();k||(0,c.redirect)("/");let l=`/patient/funnel/${h}`,n=await (0,e.enforceDashboardFirst)(l);if(n&&(0,c.redirect)(n),!i)try{(await m({funnel:h,category:"intro",includeDrafts:!1})).page&&(0,c.redirect)(`/patient/funnel/${h}/intro`)}catch(a){console.warn("Failed to check for intro page:",a)}return(0,b.jsx)(f.default,{slug:h})}a.s(["default",()=>n],71826)}];

//# sourceMappingURL=_bc23a0ae._.js.map