module.exports=[74976,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(59620);var d=a.i(63548),e=a.i(8184),f=a.i(3706);let g=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var h=a.i(92e3),i=a.i(56757);let j="open",k="in_progress",l="escalated",m="resolved",n="closed",o=i.z.enum([j,k,l,m,n]),p={LOW:"low",MEDIUM:"medium",HIGH:"high",URGENT:"urgent"},q=i.z.enum([p.LOW,p.MEDIUM,p.HIGH,p.URGENT]),r={TECHNICAL:"technical",MEDICAL:"medical",ADMINISTRATIVE:"administrative",BILLING:"billing",GENERAL:"general",OTHER:"other"},s=i.z.enum([r.TECHNICAL,r.MEDICAL,r.ADMINISTRATIVE,r.BILLING,r.GENERAL,r.OTHER]);function t(a){switch(a){case p.LOW:return"Niedrig";case p.MEDIUM:return"Mittel";case p.HIGH:return"Hoch";case p.URGENT:return"Dringend";default:return a}}function u(a){switch(a){case r.TECHNICAL:return"Technisch";case r.MEDICAL:return"Medizinisch";case r.ADMINISTRATIVE:return"Administrativ";case r.BILLING:return"Abrechnung";case r.GENERAL:return"Allgemein";case r.OTHER:return"Sonstiges";default:return a}}i.z.object({id:i.z.string().uuid(),patient_id:i.z.string().uuid(),organization_id:i.z.string().uuid().nullable(),created_by_user_id:i.z.string().uuid().nullable(),assigned_to_user_id:i.z.string().uuid().nullable(),escalated_task_id:i.z.string().uuid().nullable(),category:s,priority:q,status:o,subject:i.z.string(),description:i.z.string().nullable(),notes:i.z.string().nullable(),resolution_notes:i.z.string().nullable(),metadata:i.z.record(i.z.string(),i.z.any()).nullable(),escalated_at:i.z.string().nullable(),escalated_by_user_id:i.z.string().uuid().nullable(),created_at:i.z.string(),updated_at:i.z.string().nullable(),resolved_at:i.z.string().nullable(),closed_at:i.z.string().nullable()}),i.z.object({patient_id:i.z.string().uuid(),category:s.optional(),priority:q.optional(),subject:i.z.string().min(1,"Subject is required").max(200,"Subject too long"),description:i.z.string().optional(),metadata:i.z.record(i.z.string(),i.z.any()).optional()}),i.z.object({status:o.optional(),priority:q.optional(),assigned_to_user_id:i.z.string().uuid().nullable().optional(),description:i.z.string().nullable().optional(),notes:i.z.string().nullable().optional(),resolution_notes:i.z.string().nullable().optional(),metadata:i.z.record(i.z.string(),i.z.any()).optional()}),i.z.object({assigned_to_role:i.z.enum(["clinician","admin"]),assigned_to_user_id:i.z.string().uuid().optional(),escalation_notes:i.z.string().optional(),task_due_at:i.z.string().optional()}),i.z.object({patient_id:i.z.string().uuid().optional(),organization_id:i.z.string().uuid().optional(),assigned_to_user_id:i.z.string().uuid().optional(),category:s.optional(),priority:q.optional(),status:o.optional(),is_escalated:i.z.boolean().optional()});var v=a.i(33508);function w({onClose:a,onCreate:d}){let[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(r.GENERAL),[l,m]=(0,c.useState)(p.MEDIUM),[n,o]=(0,c.useState)(!1),[q,s]=(0,c.useState)(null);async function w(a){if(a.preventDefault(),!f.trim())return void s("Bitte geben Sie einen Betreff ein");try{o(!0),s(null),await d({subject:f.trim(),description:h.trim(),category:j,priority:l})}catch(a){console.error("Error creating support case:",a),s(a instanceof Error?a.message:"Fehler beim Erstellen der Anfrage"),o(!1)}}return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Neue Support-Anfrage"}),(0,b.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:n,children:(0,b.jsx)(v.X,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:w,className:"p-6 space-y-6",children:[q&&(0,b.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded text-red-800 text-sm",children:q}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:["Betreff ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"subject",value:f,onChange:a=>g(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Kurze Zusammenfassung Ihrer Anfrage",maxLength:200,required:!0,disabled:n}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[f.length,"/200 Zeichen"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategorie"}),(0,b.jsx)("select",{id:"category",value:j,onChange:a=>k(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n,children:Object.values(r).map(a=>(0,b.jsx)("option",{value:a,children:u(a)},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Dringlichkeit"}),(0,b.jsx)("select",{id:"priority",value:l,onChange:a=>m(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n,children:Object.values(p).map(a=>(0,b.jsx)("option",{value:a,children:t(a)},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Beschreibung"}),(0,b.jsx)("textarea",{id:"description",value:h,onChange:a=>i(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[120px]",placeholder:"Detaillierte Beschreibung Ihrer Anfrage...",disabled:n})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,b.jsx)(e.Button,{type:"button",onClick:a,disabled:n,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Abbrechen"}),(0,b.jsx)(e.Button,{type:"submit",disabled:n,children:n?"Wird erstellt...":"Anfrage erstellen"})]})]})]})})}function x({patientId:a,patientName:i}){let[o,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[v,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!1);async function A(){try{s(!0),x(null);let b=await fetch(`/api/support-cases?patient_id=${a}`),c=await b.json();if(!c.success)throw Error(c.error?.message||"Failed to load support cases");q(c.data||[])}catch(a){console.error("Error loading support cases:",a),x(a instanceof Error?a.message:"Failed to load support cases")}finally{s(!1)}}async function B(b){try{let c=await fetch("/api/support-cases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:a,subject:b.subject,description:b.description,category:b.category,priority:b.priority})}),d=await c.json();if(!d.success)throw Error(d.error?.message||"Failed to create support case");await A(),z(!1)}catch(a){throw console.error("Error creating support case:",a),a}}return((0,c.useEffect)(()=>{A()},[a]),r)?(0,b.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,b.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,b.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})}):(0,b.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Support"}),(0,b.jsxs)("p",{className:"text-gray-600 mt-1",children:[i?`Hallo ${i}`:"Hallo",", hier können Sie Support-Anfragen erstellen und verfolgen."]})]}),(0,b.jsxs)(e.Button,{onClick:()=>z(!0),className:"flex items-center gap-2",children:[(0,b.jsx)(g,{size:20}),"Neue Anfrage"]})]}),v&&(0,b.jsx)(d.Card,{className:"p-4 border-red-200 bg-red-50",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,b.jsx)(h.AlertCircle,{size:20}),(0,b.jsx)("p",{children:v})]})}),(0,b.jsx)("div",{className:"space-y-4",children:0===o.length?(0,b.jsxs)(d.Card,{className:"p-8 text-center",children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Noch keine Support-Anfragen vorhanden."}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:'Klicken Sie auf "Neue Anfrage", um eine Support-Anfrage zu erstellen.'})]}):o.map(a=>(0,b.jsxs)(d.Card,{className:"p-6 hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.subject}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(f.Badge,{className:function(a){switch(a){case j:return"bg-blue-100 text-blue-800";case k:return"bg-yellow-100 text-yellow-800";case l:return"bg-red-100 text-red-800";case m:return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}(a.status),children:function(a){switch(a){case j:return"Offen";case k:return"In Bearbeitung";case l:return"Eskaliert";case m:return"Gelöst";case n:return"Geschlossen";default:return a}}(a.status)}),(0,b.jsx)(f.Badge,{className:function(a){switch(a){case p.LOW:return"bg-gray-100 text-gray-800";case p.MEDIUM:return"bg-blue-100 text-blue-800";case p.HIGH:return"bg-orange-100 text-orange-800";case p.URGENT:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}(a.priority),children:t(a.priority)}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:u(a.category)})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:new Date(a.created_at).toLocaleDateString("de-DE")}),a.escalated_at&&(0,b.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["Eskaliert am"," ",new Date(a.escalated_at).toLocaleDateString("de-DE")]})]})]}),a.description&&(0,b.jsx)("p",{className:"text-gray-700 text-sm mt-2",children:a.description}),a.resolution_notes&&a.status===m&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-800 mb-1",children:"Lösung:"}),(0,b.jsx)("p",{className:"text-sm text-green-700",children:a.resolution_notes})]})]},a.id))}),y&&(0,b.jsx)(w,{onClose:()=>z(!1),onCreate:B})]})}a.s(["SupportCaseList",()=>x],74976)}];

//# sourceMappingURL=apps_rhythm-patient-ui_app_patient_support_SupportCaseList_tsx_4ec758bc._.js.map