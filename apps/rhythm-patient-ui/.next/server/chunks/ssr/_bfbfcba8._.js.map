{"version":3,"sources":["../../../../../../lib/contracts/registry.ts","../../../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","../../../../../../apps/rhythm-patient-ui/app/patient/onboarding/consent/client.tsx","../../../../../../lib/actions/data%3Ad4b91d%20%3Ctext/javascript%3E","../../../../../../lib/contracts/onboarding.ts"],"sourcesContent":["/**\n * Contract Registry - Canonical Identifiers\n * \n * This file serves as the single source of truth for all critical string identifiers\n * used throughout the application. All new identifiers MUST be added here to prevent\n * \"fantasy names\" and ensure consistency.\n * \n * **IMPORTANT**: This file is protected by CODEOWNERS. Any changes require review.\n * \n * Usage:\n * ```typescript\n * import { ASSESSMENT_STATUS, FUNNEL_SLUG, USER_ROLE } from '@/lib/contracts/registry'\n * \n * const status: AssessmentStatus = ASSESSMENT_STATUS.IN_PROGRESS\n * const funnel: FunnelSlug = FUNNEL_SLUG.STRESS_ASSESSMENT\n * ```\n */\n\n// ============================================================\n// Assessment Statuses\n// ============================================================\n\n/**\n * Valid statuses for assessments\n */\nexport const ASSESSMENT_STATUS = {\n  IN_PROGRESS: 'in_progress',\n  COMPLETED: 'completed',\n} as const\n\nexport type AssessmentStatus = typeof ASSESSMENT_STATUS[keyof typeof ASSESSMENT_STATUS]\n\n// ============================================================\n// Content Page Statuses\n// ============================================================\n\n/**\n * Valid statuses for content pages\n */\nexport const CONTENT_STATUS = {\n  DRAFT: 'draft',\n  PUBLISHED: 'published',\n  ARCHIVED: 'archived',\n} as const\n\nexport type ContentStatus = typeof CONTENT_STATUS[keyof typeof CONTENT_STATUS]\n\n// ============================================================\n// Pillar Keys (7-Pillar Model)\n// ============================================================\n\n/**\n * Valid pillar keys for funnel taxonomy (7-Pillar Wellness Model)\n */\nexport const PILLAR_KEY = {\n  NUTRITION: 'nutrition',\n  MOVEMENT: 'movement',\n  SLEEP: 'sleep',\n  MENTAL_HEALTH: 'mental-health',\n  SOCIAL: 'social',\n  MEANING: 'meaning',\n  PREVENTION: 'prevention',\n} as const\n\nexport type PillarKey = typeof PILLAR_KEY[keyof typeof PILLAR_KEY]\n\n// ============================================================\n// Funnel Slugs\n// ============================================================\n\n/**\n * Valid funnel slugs\n * The canonical slug is the primary identifier\n * Legacy aliases are maintained for backward compatibility\n */\nexport const FUNNEL_SLUG = {\n  STRESS_ASSESSMENT: 'stress-assessment',\n  CARDIOVASCULAR_AGE: 'cardiovascular-age',\n  SLEEP_QUALITY: 'sleep-quality',\n  HEART_HEALTH_NUTRITION: 'heart-health-nutrition',\n  // Legacy aliases - deprecated but maintained for compatibility\n  STRESS: 'stress',\n  STRESS_CHECK: 'stress-check',\n  STRESS_CHECK_V2: 'stress-check-v2',\n} as const\n\nexport type FunnelSlug = typeof FUNNEL_SLUG[keyof typeof FUNNEL_SLUG]\n\n/**\n * Maps legacy funnel slugs to their canonical equivalents\n * Uses lowercase keys for case-insensitive matching\n */\nexport const FUNNEL_SLUG_ALIASES: Record<string, string> = {\n  'stress': FUNNEL_SLUG.STRESS_ASSESSMENT,\n  'stress-check': FUNNEL_SLUG.STRESS_ASSESSMENT,\n  'stress-check-v2': FUNNEL_SLUG.STRESS_ASSESSMENT,\n}\n\n/**\n * Resolves a funnel slug to its canonical form\n * Normalizes input by trimming and converting to lowercase for deterministic matching\n * \n * @param slug - The funnel slug to resolve (case-insensitive, whitespace trimmed)\n * @returns The canonical slug or the normalized input if no mapping exists\n */\nexport function getCanonicalFunnelSlug(slug: string): string {\n  const normalized = slug.toLowerCase().trim()\n  return FUNNEL_SLUG_ALIASES[normalized] || normalized\n}\n\n/**\n * Checks if a funnel slug is known in the registry\n * A funnel is \"known\" if it exists in FUNNEL_SLUG values (canonical or legacy)\n * \n * @param slug - The funnel slug to check (case-insensitive, whitespace trimmed)\n * @returns true if the funnel slug is registered, false otherwise\n */\nexport function isKnownFunnelSlug(slug: string): boolean {\n  const canonical = getCanonicalFunnelSlug(slug)\n  const allSlugs = Object.values(FUNNEL_SLUG)\n  return allSlugs.includes(canonical as FunnelSlug)\n}\n\n// ============================================================\n// Node/Step Types\n// ============================================================\n\n/**\n * Valid node/step types for funnel steps\n * These correspond to the 'type' field in the funnel_steps table\n */\nexport const NODE_TYPE = {\n  QUESTION_STEP: 'question_step',\n  FORM: 'form',\n  INFO_STEP: 'info_step',\n  INFO: 'info',\n  CONTENT_PAGE: 'content_page',\n  SUMMARY: 'summary',\n  OTHER: 'other',\n} as const\n\nexport type NodeType = typeof NODE_TYPE[keyof typeof NODE_TYPE]\n\n// ============================================================\n// User Roles\n// ============================================================\n\n/**\n * Valid user roles\n * These are stored in auth.users.raw_app_meta_data.role\n */\nexport const USER_ROLE = {\n  PATIENT: 'patient',\n  CLINICIAN: 'clinician',\n  ADMIN: 'admin',\n  NURSE: 'nurse',\n} as const\n\nexport type UserRole = typeof USER_ROLE[keyof typeof USER_ROLE]\n\n// ============================================================\n// Question Types\n// ============================================================\n\n/**\n * Valid question types\n * These correspond to the 'question_type' field in the questions table\n */\nexport const QUESTION_TYPE = {\n  RADIO: 'radio',\n  CHECKBOX: 'checkbox',\n  TEXT: 'text',\n  TEXTAREA: 'textarea',\n  NUMBER: 'number',\n  SCALE: 'scale',\n  SLIDER: 'slider',\n} as const\n\nexport type QuestionType = typeof QUESTION_TYPE[keyof typeof QUESTION_TYPE]\n\n// ============================================================\n// Patient Demographics\n// ============================================================\n\n/**\n * Valid sex/gender options for patient profiles\n * These correspond to the 'sex' field in the patient_profiles table\n */\nexport const PATIENT_SEX = {\n  MALE: 'male',\n  FEMALE: 'female',\n  OTHER: 'other',\n  PREFER_NOT_TO_SAY: 'prefer_not_to_say',\n} as const\n\nexport type PatientSex = typeof PATIENT_SEX[keyof typeof PATIENT_SEX]\n\n// ============================================================\n// Feature Flag Names\n// ============================================================\n\n/**\n * Valid feature flag names (without NEXT_PUBLIC_FEATURE_ prefix)\n */\nexport const FEATURE_FLAG = {\n  AMY_ENABLED: 'AMY_ENABLED',\n  CLINICIAN_DASHBOARD_ENABLED: 'CLINICIAN_DASHBOARD_ENABLED',\n  CHARTS_ENABLED: 'CHARTS_ENABLED',\n} as const\n\nexport type FeatureFlag = typeof FEATURE_FLAG[keyof typeof FEATURE_FLAG]\n\n// ============================================================\n// Helper Functions\n// ============================================================\n\n/**\n * Type guard to check if a value is a valid assessment status\n */\nexport function isValidAssessmentStatus(value: unknown): value is AssessmentStatus {\n  return typeof value === 'string' && Object.values(ASSESSMENT_STATUS).includes(value as AssessmentStatus)\n}\n\n/**\n * Type guard to check if a value is a valid content status\n */\nexport function isValidContentStatus(value: unknown): value is ContentStatus {\n  return typeof value === 'string' && Object.values(CONTENT_STATUS).includes(value as ContentStatus)\n}\n\n/**\n * Type guard to check if a value is a valid user role\n */\nexport function isValidUserRole(value: unknown): value is UserRole {\n  return typeof value === 'string' && Object.values(USER_ROLE).includes(value as UserRole)\n}\n\n/**\n * Type guard to check if a value is a valid node type\n */\nexport function isValidNodeType(value: unknown): value is NodeType {\n  return typeof value === 'string' && Object.values(NODE_TYPE).includes(value as NodeType)\n}\n\n/**\n * Type guard to check if a value is a valid pillar key\n */\nexport function isValidPillarKey(value: unknown): value is PillarKey {\n  return typeof value === 'string' && Object.values(PILLAR_KEY).includes(value as PillarKey)\n}\n\n/**\n * Type guard to check if a value is a valid patient sex option\n */\nexport function isValidPatientSex(value: unknown): value is PatientSex {\n  return typeof value === 'string' && Object.values(PATIENT_SEX).includes(value as PatientSex)\n}\n\n// ============================================================\n// Audit Log Entity Types\n// ============================================================\n\n/**\n * Valid entity types for audit logging\n * These correspond to the 'entity_type' field in the audit_log table\n */\nexport const AUDIT_ENTITY_TYPE = {\n  ASSESSMENT: 'assessment',\n  REPORT: 'report',\n  TASK: 'task',\n  FUNNEL_VERSION: 'funnel_version',\n  FUNNEL_CATALOG: 'funnel_catalog',\n  CONFIG: 'config',\n  CONSENT: 'consent',\n  ORGANIZATION: 'organization',\n  USER_ORG_MEMBERSHIP: 'user_org_membership',\n  CLINICIAN_ASSIGNMENT: 'clinician_assignment',\n  DOCUMENT: 'document', // V05-I04.3: Document confirmation tracking\n  PROCESSING_JOB: 'processing_job', // V05-I05.1: Processing job orchestration\n  REVIEW_RECORD: 'review_record', // V05-I05.7: Medical review records\n  PRE_SCREENING_CALL: 'pre_screening_call', // V05-I08.2: Pre-screening call records\n  DEVICE_SHIPMENT: 'device_shipment', // V05-I08.3: Shipment tracking\n  SUPPORT_CASE: 'support_case', // V05-I08.4: Support case documentation\n  ACCOUNT: 'account', // V05-I10.2: Account lifecycle (deletion/retention)\n} as const\n\nexport type AuditEntityType = typeof AUDIT_ENTITY_TYPE[keyof typeof AUDIT_ENTITY_TYPE]\n\n// ============================================================\n// Audit Log Actions\n// ============================================================\n\n/**\n * Valid actions for audit logging\n * These correspond to the 'action' field in the audit_log table\n */\nexport const AUDIT_ACTION = {\n  CREATE: 'create',\n  UPDATE: 'update',\n  DELETE: 'delete',\n  APPROVE: 'approve',\n  REJECT: 'reject',\n  REQUEST_CHANGES: 'request_changes', // V05-I05.7: Review workflow\n  GENERATE: 'generate',\n  FLAG: 'flag',\n  ASSIGN: 'assign',\n  ACTIVATE: 'activate',\n  DEACTIVATE: 'deactivate',\n  ROLLOUT: 'rollout',\n  COMPLETE: 'complete',\n  ESCALATE: 'escalate', // V05-I08.4: Support case escalation\n  DELETION_REQUEST: 'deletion_request', // V05-I10.2: User requested account deletion\n  DELETION_CANCEL: 'deletion_cancel', // V05-I10.2: User cancelled deletion request\n  DELETION_EXECUTE: 'deletion_execute', // V05-I10.2: System executed account deletion\n  ANONYMIZE: 'anonymize', // V05-I10.2: Records anonymized instead of deleted\n} as const\n\nexport type AuditAction = typeof AUDIT_ACTION[keyof typeof AUDIT_ACTION]\n\n// ============================================================\n// Audit Log Sources\n// ============================================================\n\n/**\n * Valid sources for audit logging\n * These correspond to the 'source' field in the audit_log table\n */\nexport const AUDIT_SOURCE = {\n  API: 'api',\n  JOB: 'job',\n  ADMIN_UI: 'admin-ui',\n  SYSTEM: 'system',\n} as const\n\nexport type AuditSource = typeof AUDIT_SOURCE[keyof typeof AUDIT_SOURCE]\n\n// ============================================================\n// Audit Type Guards\n// ============================================================\n\n/**\n * Type guard to check if a value is a valid audit entity type\n */\nexport function isValidAuditEntityType(value: unknown): value is AuditEntityType {\n  return typeof value === 'string' && Object.values(AUDIT_ENTITY_TYPE).includes(value as AuditEntityType)\n}\n\n/**\n * Type guard to check if a value is a valid audit action\n */\nexport function isValidAuditAction(value: unknown): value is AuditAction {\n  return typeof value === 'string' && Object.values(AUDIT_ACTION).includes(value as AuditAction)\n}\n\n/**\n * Type guard to check if a value is a valid audit source\n */\nexport function isValidAuditSource(value: unknown): value is AuditSource {\n  return typeof value === 'string' && Object.values(AUDIT_SOURCE).includes(value as AuditSource)\n}\n\n// ============================================================\n// Program Tier Levels (TV05_01D)\n// ============================================================\n\n/**\n * Valid program tier levels based on Thomas' journey model\n * These map the 3-tier patient journey to platform capabilities\n */\nexport const PROGRAM_TIER = {\n  /**\n   * Tier 1 (Essential): Basic stress/resilience assessment\n   * Focus: Initial assessment, baseline data collection\n   */\n  TIER_1_ESSENTIAL: 'tier-1-essential',\n  \n  /**\n   * Tier 2.5 (Enhanced): Extended monitoring with nurse touchpoints\n   * Focus: Regular check-ins, progress tracking\n   */\n  TIER_2_5_ENHANCED: 'tier-2-5-enhanced',\n  \n  /**\n   * Tier 2 (Comprehensive): Full program with intensive support\n   * Focus: Comprehensive care, multiple pillars, frequent touchpoints\n   */\n  TIER_2_COMPREHENSIVE: 'tier-2-comprehensive',\n} as const\n\nexport type ProgramTier = typeof PROGRAM_TIER[keyof typeof PROGRAM_TIER]\n\n/**\n * Type guard to check if a value is a valid program tier\n */\nexport function isValidProgramTier(value: unknown): value is ProgramTier {\n  return typeof value === 'string' && Object.values(PROGRAM_TIER).includes(value as ProgramTier)\n}\n\n// ============================================================\n// Document Extraction Versions (V05-I04.2)\n// ============================================================\n\n/**\n * Valid extractor versions for AI document extraction\n * Format: vMAJOR.MINOR.PATCH\n * Update when extraction logic or prompts change\n */\nexport const EXTRACTOR_VERSION = {\n  /**\n   * v1.0.0: Initial extraction pipeline\n   * - Basic lab value extraction\n   * - Medication list extraction\n   * - Confidence scoring\n   */\n  V1_0_0: 'v1.0.0',\n} as const\n\nexport type ExtractorVersion = typeof EXTRACTOR_VERSION[keyof typeof EXTRACTOR_VERSION]\n\n/**\n * Current extractor version (latest)\n */\nexport const CURRENT_EXTRACTOR_VERSION = EXTRACTOR_VERSION.V1_0_0\n\n/**\n * Type guard to check if a value is a valid extractor version\n */\nexport function isValidExtractorVersion(value: unknown): value is ExtractorVersion {\n  return typeof value === 'string' && Object.values(EXTRACTOR_VERSION).includes(value as ExtractorVersion)\n}\n\n// ============================================================\n// Processing Stages & Status (V05-I05.1)\n// ============================================================\n\n/**\n * Valid processing stages for job orchestrator\n * Jobs progress deterministically through these stages\n */\nexport const PROCESSING_STAGE = {\n  PENDING: 'pending',\n  RISK: 'risk',\n  RANKING: 'ranking',\n  CONTENT: 'content',\n  VALIDATION: 'validation',\n  REVIEW: 'review',\n  PDF: 'pdf',\n  DELIVERY: 'delivery',\n  COMPLETED: 'completed',\n  FAILED: 'failed',\n} as const\n\nexport type ProcessingStage = typeof PROCESSING_STAGE[keyof typeof PROCESSING_STAGE]\n\n/**\n * Valid processing statuses for job orchestrator\n */\nexport const PROCESSING_STATUS = {\n  QUEUED: 'queued',\n  IN_PROGRESS: 'in_progress',\n  COMPLETED: 'completed',\n  FAILED: 'failed',\n} as const\n\nexport type ProcessingStatus = typeof PROCESSING_STATUS[keyof typeof PROCESSING_STATUS]\n\n/**\n * Type guard to check if a value is a valid processing stage\n */\nexport function isValidProcessingStage(value: unknown): value is ProcessingStage {\n  return typeof value === 'string' && Object.values(PROCESSING_STAGE).includes(value as ProcessingStage)\n}\n\n/**\n * Type guard to check if a value is a valid processing status\n */\nexport function isValidProcessingStatus(value: unknown): value is ProcessingStatus {\n  return typeof value === 'string' && Object.values(PROCESSING_STATUS).includes(value as ProcessingStatus)\n}\n","// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { recordConsent } from '@/lib/actions/onboarding'\nimport { CURRENT_CONSENT_VERSION } from '@/lib/contracts/onboarding'\n\nexport function ConsentClient() {\n  const router = useRouter()\n  const [agreed, setAgreed] = useState(false)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!agreed) {\n      setError('Sie müssen den Nutzungsbedingungen zustimmen, um fortzufahren.')\n      return\n    }\n\n    setIsSubmitting(true)\n    setError(null)\n\n    try {\n      const result = await recordConsent({\n        consentVersion: CURRENT_CONSENT_VERSION,\n        agreedToTerms: agreed,\n      })\n\n      if (result.success) {\n        // Navigate to profile setup\n        router.push('/patient/onboarding/profile')\n      } else {\n        setError(result.error || 'Fehler beim Speichern der Zustimmung')\n      }\n    } catch (err) {\n      setError('Ein unerwarteter Fehler ist aufgetreten')\n      console.error('Consent submission error:', err)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <div className=\"w-full bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-6 sm:p-8\">\n      <h1 className=\"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4\">\n        Willkommen bei Rhythmologicum Connect\n      </h1>\n\n      <div className=\"prose prose-slate dark:prose-invert max-w-none mb-6\">\n        <h2 className=\"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3\">\n          Nutzungsbedingungen\n        </h2>\n\n        <div className=\"bg-slate-50 dark:bg-slate-900 rounded-md p-4 mb-4 max-h-[60vh] overflow-y-auto border border-slate-200 dark:border-slate-700\">\n          <h3 className=\"text-lg font-medium text-slate-700 dark:text-slate-300 mb-2\">\n            1. Zweck der Anwendung\n          </h3>\n          <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-4\">\n            Rhythmologicum Connect ist eine frühe Testversion einer digitalen Gesundheitsanwendung\n            zur Erfassung und Bewertung von Stress und Resilienz. Die Anwendung ist nicht für den\n            klinischen Einsatz bestimmt.\n          </p>\n\n          <h3 className=\"text-lg font-medium text-slate-700 dark:text-slate-300 mb-2\">\n            2. Datenschutz\n          </h3>\n          <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-4\">\n            Ihre Daten werden sicher gespeichert und nur für die Zwecke dieser Testversion verwendet.\n            Weitere Informationen finden Sie in unserer Datenschutzerklärung.\n          </p>\n\n          <h3 className=\"text-lg font-medium text-slate-700 dark:text-slate-300 mb-2\">\n            3. Einwilligung\n          </h3>\n          <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-4\">\n            Durch die Zustimmung zu diesen Nutzungsbedingungen erklären Sie sich damit einverstanden,\n            dass Ihre Angaben gespeichert und ausgewertet werden. Sie können Ihre Einwilligung jederzeit\n            widerrufen.\n          </p>\n\n          <h3 className=\"text-lg font-medium text-slate-700 dark:text-slate-300 mb-2\">\n            4. Haftungsausschluss\n          </h3>\n          <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n            Die Anwendung dient ausschließlich zu Forschungs- und Testzwecken. Sie ersetzt keine\n            medizinische Diagnose oder Behandlung. Bei gesundheitlichen Beschwerden wenden Sie sich\n            bitte an einen Arzt.\n          </p>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-6\">\n          <label className=\"flex items-start gap-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={agreed}\n              onChange={(e) => setAgreed(e.target.checked)}\n              className=\"mt-1 h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500\"\n              disabled={isSubmitting}\n            />\n            <span className=\"text-sm text-slate-700 dark:text-slate-300\">\n              Ich habe die Nutzungsbedingungen gelesen und stimme zu.\n            </span>\n          </label>\n        </div>\n\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md\">\n            <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n          </div>\n        )}\n\n        <div className=\"flex gap-3\">\n          <button\n            type=\"submit\"\n            disabled={!agreed || isSubmitting}\n            className=\"px-6 py-2.5 bg-sky-600 hover:bg-sky-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200\"\n          >\n            {isSubmitting ? 'Wird gespeichert...' : 'Zustimmen und fortfahren'}\n          </button>\n        </div>\n      </form>\n\n      <p className=\"mt-4 text-xs text-slate-500 dark:text-slate-400\">Version {CURRENT_CONSENT_VERSION}</p>\n    </div>\n  )\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"403595fa6e7b7d1b348c37040bb72197646de953f1\":\"recordConsent\"},\"lib/actions/onboarding.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"403595fa6e7b7d1b348c37040bb72197646de953f1\",callServer,void 0,findSourceMapURL,\"recordConsent\");export{$$RSC_SERVER_ACTION_0 as recordConsent};","/**\n * Onboarding Contracts\n * \n * Zod schemas and types for patient onboarding flow:\n * - Consent management\n * - Baseline profile collection\n * \n * @module lib/contracts/onboarding\n */\n\nimport { z } from 'zod'\nimport { PATIENT_SEX } from '@/lib/contracts/registry'\n\n// ============================================================\n// Consent Contracts\n// ============================================================\n\n/**\n * Current consent version\n * Must match the version stored in database\n */\nexport const CURRENT_CONSENT_VERSION = '1.0.0'\n\n/**\n * Consent form schema\n */\nexport const ConsentFormSchema = z.object({\n  consentVersion: z.string().min(1, 'Consent version is required'),\n  agreedToTerms: z.boolean().refine(val => val === true, {\n    message: 'You must agree to the terms to continue',\n  }),\n})\n\nexport type ConsentFormData = z.infer<typeof ConsentFormSchema>\n\n/**\n * Consent record from database\n */\nexport const ConsentRecordSchema = z.object({\n  id: z.string().uuid(),\n  user_id: z.string().uuid(),\n  consent_version: z.string(),\n  consented_at: z.string().datetime(),\n  ip_address: z.string().nullable(),\n  user_agent: z.string().nullable(),\n})\n\nexport type ConsentRecord = z.infer<typeof ConsentRecordSchema>\n\n// ============================================================\n// Baseline Profile Contracts\n// ============================================================\n\n/**\n * Baseline profile form schema\n * Minimal set of patient demographic data required before assessments\n */\nexport const BaselineProfileSchema = z.object({\n  full_name: z\n    .string()\n    .min(1, 'Name is required')\n    .max(200, 'Name must be less than 200 characters')\n    .trim(),\n  birth_year: z\n    .number()\n    .int('Birth year must be a whole number')\n    .min(1900, 'Birth year must be 1900 or later')\n    .max(new Date().getFullYear(), 'Birth year cannot be in the future')\n    .optional()\n    .nullable(),\n  sex: z\n    .enum(\n      [PATIENT_SEX.MALE, PATIENT_SEX.FEMALE, PATIENT_SEX.OTHER, PATIENT_SEX.PREFER_NOT_TO_SAY],\n      {\n        message: 'Please select a valid option',\n      },\n    )\n    .optional()\n    .nullable(),\n})\n\nexport type BaselineProfileData = z.infer<typeof BaselineProfileSchema>\n\n/**\n * Onboarding status enum values (E6.4.2)\n */\nexport const ONBOARDING_STATUS = {\n  NOT_STARTED: 'not_started',\n  IN_PROGRESS: 'in_progress',\n  COMPLETED: 'completed',\n} as const\n\nexport type OnboardingStatusValue = (typeof ONBOARDING_STATUS)[keyof typeof ONBOARDING_STATUS]\n\n/**\n * Patient profile record from database\n */\nexport const PatientProfileSchema = z.object({\n  id: z.string().uuid(),\n  user_id: z.string().uuid(),\n  created_at: z.string().datetime(),\n  full_name: z.string().nullable(),\n  birth_year: z.number().nullable(),\n  sex: z.string().nullable(),\n  onboarding_status: z.enum(['not_started', 'in_progress', 'completed']).optional(),\n})\n\nexport type PatientProfile = z.infer<typeof PatientProfileSchema>\n\n// ============================================================\n// Onboarding Status\n// ============================================================\n\n/**\n * Onboarding completion status\n */\nexport const OnboardingStatusSchema = z.object({\n  hasConsent: z.boolean(),\n  hasProfile: z.boolean(),\n  isComplete: z.boolean(),\n  status: z.enum(['not_started', 'in_progress', 'completed']).optional(),\n})\n\nexport type OnboardingStatus = z.infer<typeof OnboardingStatusSchema>\n"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"6DAwS4B,CAC1B,OAAQ,SACR,OAAQ,SACR,OAAQ,SACR,QAAS,UACT,OAAQ,SACR,gBAAiB,kBACjB,SAAU,WACV,KAAM,OACN,OAAQ,SACR,SAAU,WACV,WAAY,aACZ,QAAS,UACT,SAAU,WACV,SAAU,WACV,iBAAkB,mBAClB,gBAAiB,kBACjB,iBAAkB,mBAClB,UAAW,WACb,wBAjDiC,CAC/B,WAAY,aACZ,OAAQ,SACR,KAAM,OACN,eAAgB,iBAChB,eAAgB,iBAChB,OAAQ,SACR,QAAS,UACT,aAAc,eACd,oBAAqB,sBACrB,qBAAsB,uBACtB,SAAU,WACV,eAAgB,iBAChB,cAAe,gBACf,mBAAoB,qBACpB,gBAAiB,kBACjB,aAAc,eACd,QAAS,SACX,mBA2C4B,CAC1B,IAAK,MACL,IAAK,MACL,SAAU,WACV,OAAQ,QACV,gBAzMyB,CACvB,cAAe,gBACf,KAAM,OACN,UAAW,YACX,KAAM,OACN,aAAc,eACd,QAAS,UACT,MAAO,OACT,kBAiD2B,CACzB,KAAM,OACN,OAAQ,SACR,MAAO,QACP,kBAAmB,mBACrB,iBA3I0B,CACxB,UAAW,YACX,SAAU,WACV,MAAO,QACP,cAAe,gBACf,OAAQ,SACR,QAAS,UACT,WAAY,YACd,oBA0G6B,CAC3B,MAAO,QACP,SAAU,WACV,KAAM,OACN,SAAU,WACV,OAAQ,SACR,MAAO,QACP,OAAQ,QACV,yFC7KSA,UAAU,CAAA,kBAAVA,EAAAA,UAAU,EAMVC,qBAAqB,CAAA,kBAArBA,EAAAA,qBAAqB,EALrBC,gBAAgB,CAAA,kBAAhBA,EAAAA,gBAAgB,8EADE,CAAA,CAAA,IAAA,OACM,CAAA,CAAA,IAAA,MAKK,CAAA,CAAA,IAAA,2CCPtC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCH+K,EAAA,EAAA,CAAA,CAAA,MAAsG,IAAM,EAAmC,CAAA,EAAA,EAAA,iBAAb,IAAa,AAAqB,EAAC,KAAxB,wCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,iBCUpa,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAUO,IAAM,EAA0B,QFdhC,SAAS,IACd,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/B,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAE5C,EAAe,MAAO,IAG1B,GAFA,EAAE,cAAc,GAEZ,CAAC,EAAQ,YACX,EAAS,kEAIX,GAAgB,GAChB,EAAS,MAET,GAAI,CACF,IAAM,EAAS,MAAM,EAAc,CACjC,eAAgB,EAChB,cAAe,CACjB,GAEI,EAAO,OAAO,CAEhB,CAFkB,CAEX,IAAI,CAAC,+BAEZ,EAAS,EAAO,KAAK,EAAI,uCAE7B,CAAE,MAAO,EAAK,CACZ,EAAS,2CACT,QAAQ,KAAK,CAAC,4BAA6B,EAC7C,QAAU,CACR,GAAgB,EAClB,CACF,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4HACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sEAA6D,0CAI3E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,yEAAgE,wBAI9E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yIACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uEAA8D,2BAG5E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2DAAkD,8MAM/D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uEAA8D,mBAG5E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2DAAkD,gKAK/D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uEAA8D,oBAG5E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2DAAkD,uMAM/D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uEAA8D,0BAG5E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDAA6C,4MAQ9D,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,YACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,kDACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EACT,SAAU,AAAC,GAAM,EAAU,EAAE,MAAM,CAAC,OAAO,EAC3C,UAAU,wEACV,SAAU,IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sDAA6C,iEAMhE,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sGACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kDAA0C,MAI3D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAU,CAAC,GAAU,EACrB,UAAU,sKAET,EAAe,sBAAwB,kCAK9C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,4DAAkD,WAAS,OAG9E,CEvGiC,EAAA,CAAC,CAAC,MAAM,CAAC,CACxC,eAAgB,EAAA,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,EAAG,+BAClC,cAAe,EAAA,CAAC,CAAC,OAAO,GAAG,MAAM,CAAC,IAAe,IAAR,EAAc,CACrD,QAAS,yCACX,EACF,GAOmC,EAAA,CAAC,CAAC,MAAM,CAAC,CAC1C,GAAI,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GACnB,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GACxB,gBAAiB,EAAA,CAAC,CAAC,MAAM,GACzB,aAAc,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACjC,WAAY,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC/B,WAAY,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,EACjC,GAYqC,EAAA,CAAC,CAAC,MAAM,CAAC,CAC5C,UAAW,EAAA,CAAC,CACT,MAAM,GACN,GAAG,CAAC,EAAG,oBACP,GAAG,CAAC,IAAK,yCACT,IAAI,GACP,WAAY,EAAA,CAAC,CACV,MAAM,GACN,GAAG,CAAC,qCACJ,GAAG,CAAC,KAAM,oCACV,GAAG,CAAC,IAAI,OAAO,WAAW,GAAI,sCAC9B,QAAQ,GACR,QAAQ,GACX,IAAK,EAAA,CAAC,CACH,IAAI,CACH,CAAC,EAAA,WAAW,CAAC,IAAI,CAAE,EAAA,WAAW,CAAC,MAAM,CAAE,EAAA,WAAW,CAAC,KAAK,CAAE,EAAA,WAAW,CAAC,iBAAiB,CAAC,CACxF,CACE,QAAS,8BACX,GAED,QAAQ,GACR,QAAQ,EACb,GAkBoC,EAAA,CAAC,CAAC,MAAM,CAAC,CAC3C,GAAI,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GACnB,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GACxB,WAAY,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC/B,UAAW,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC9B,WAAY,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC/B,IAAK,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACxB,kBAAmB,EAAA,CAAC,CAAC,IAAI,CAAC,CAAC,cAAe,cAAe,YAAY,EAAE,QAAQ,EACjF,GAWsC,EAAA,CAAC,CAAC,MAAM,CAAC,CAC7C,WAAY,EAAA,CAAC,CAAC,OAAO,GACrB,WAAY,EAAA,CAAC,CAAC,OAAO,GACrB,WAAY,EAAA,CAAC,CAAC,OAAO,GACrB,OAAQ,EAAA,CAAC,CAAC,IAAI,CAAC,CAAC,cAAe,cAAe,YAAY,EAAE,QAAQ,EACtE","ignoreList":[1]}