module.exports=[41975,a=>{"use strict";a.s(["AUDIT_ACTION",0,{CREATE:"create",UPDATE:"update",DELETE:"delete",APPROVE:"approve",REJECT:"reject",REQUEST_CHANGES:"request_changes",GENERATE:"generate",FLAG:"flag",ASSIGN:"assign",ACTIVATE:"activate",DEACTIVATE:"deactivate",ROLLOUT:"rollout",COMPLETE:"complete",ESCALATE:"escalate",DELETION_REQUEST:"deletion_request",DELETION_CANCEL:"deletion_cancel",DELETION_EXECUTE:"deletion_execute",ANONYMIZE:"anonymize"},"AUDIT_ENTITY_TYPE",0,{ASSESSMENT:"assessment",REPORT:"report",TASK:"task",FUNNEL_VERSION:"funnel_version",FUNNEL_CATALOG:"funnel_catalog",CONFIG:"config",CONSENT:"consent",ORGANIZATION:"organization",USER_ORG_MEMBERSHIP:"user_org_membership",CLINICIAN_ASSIGNMENT:"clinician_assignment",DOCUMENT:"document",PROCESSING_JOB:"processing_job",REVIEW_RECORD:"review_record",PRE_SCREENING_CALL:"pre_screening_call",DEVICE_SHIPMENT:"device_shipment",SUPPORT_CASE:"support_case",ACCOUNT:"account"},"AUDIT_SOURCE",0,{API:"api",JOB:"job",ADMIN_UI:"admin-ui",SYSTEM:"system"},"NODE_TYPE",0,{QUESTION_STEP:"question_step",FORM:"form",INFO_STEP:"info_step",INFO:"info",CONTENT_PAGE:"content_page",SUMMARY:"summary",OTHER:"other"},"PATIENT_SEX",0,{MALE:"male",FEMALE:"female",OTHER:"other",PREFER_NOT_TO_SAY:"prefer_not_to_say"},"PILLAR_KEY",0,{NUTRITION:"nutrition",MOVEMENT:"movement",SLEEP:"sleep",MENTAL_HEALTH:"mental-health",SOCIAL:"social",MEANING:"meaning",PREVENTION:"prevention"},"QUESTION_TYPE",0,{RADIO:"radio",CHECKBOX:"checkbox",TEXT:"text",TEXTAREA:"textarea",NUMBER:"number",SCALE:"scale",SLIDER:"slider"}])},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},65238,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(5050);let f=(0,e.createServerReference)("402ef5f2d5a426118554d6877a28510036b982f22b",e.callServer,void 0,e.findSourceMapURL,"saveBaselineProfile"),g=(0,e.createServerReference)("006275a56515d43b3044afdff8181f10627efcc3d4",e.callServer,void 0,e.findSourceMapURL,"getBaselineProfile"),h=(0,e.createServerReference)("009c913e0aa088dff01f2444bc7901c308af146f0a",e.callServer,void 0,e.findSourceMapURL,"hasUserConsented");var i=a.i(41975);function j(){let a=(0,d.useRouter)(),[e,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(null);(0,c.useEffect)(()=>{!async function(){let b=await h();if(!b.success||!b.data)return a.push("/patient/onboarding/consent");let c=await g();if(c.success&&c.data){let a=c.data;j(a.full_name||""),l(a.birth_year?String(a.birth_year):""),n(a.sex||"")}r(!1)}()},[a]);let u=async b=>{if(b.preventDefault(),!e.trim())return void t("Bitte geben Sie Ihren Namen ein.");p(!0),t(null);try{let b=await f({full_name:e.trim(),birth_year:k?parseInt(k,10):null,sex:m||null});b.success?a.push("/patient/dashboard"):t(b.error||"Fehler beim Speichern des Profils")}catch(a){t("Ein unerwarteter Fehler ist aufgetreten"),console.error("Profile submission error:",a)}finally{p(!1)}};return q?(0,b.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,b.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Lädt..."})}):(0,b.jsxs)("div",{className:"w-full bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Basisprofil erstellen"}),(0,b.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Bitte geben Sie einige grundlegende Informationen an. Diese Daten helfen uns, Ihre Assessments besser zu verstehen."}),(0,b.jsxs)("form",{onSubmit:u,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:["Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"fullName",value:e,onChange:a=>j(a.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-sky-500 focus:border-sky-500",placeholder:"Ihr vollständiger Name",disabled:o,required:!0,maxLength:200})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"birthYear",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Geburtsjahr (optional)"}),(0,b.jsx)("input",{type:"number",id:"birthYear",value:k,onChange:a=>l(a.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-sky-500 focus:border-sky-500",placeholder:"z.B. 1990",disabled:o,min:1900,max:new Date().getFullYear()}),(0,b.jsx)("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Diese Information ist optional und wird nur für statistische Zwecke verwendet."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"sex",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Geschlecht (optional)"}),(0,b.jsxs)("select",{id:"sex",value:m,onChange:a=>n(a.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-sky-500 focus:border-sky-500",disabled:o,children:[(0,b.jsx)("option",{value:"",children:"Bitte wählen"}),(0,b.jsx)("option",{value:i.PATIENT_SEX.MALE,children:"Männlich"}),(0,b.jsx)("option",{value:i.PATIENT_SEX.FEMALE,children:"Weiblich"}),(0,b.jsx)("option",{value:i.PATIENT_SEX.OTHER,children:"Divers"}),(0,b.jsx)("option",{value:i.PATIENT_SEX.PREFER_NOT_TO_SAY,children:"Keine Angabe"})]})]}),s&&(0,b.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:(0,b.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:s})}),(0,b.jsx)("div",{className:"flex gap-3 pt-2",children:(0,b.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-2.5 bg-sky-600 hover:bg-sky-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200",children:o?"Wird gespeichert...":"Profil speichern"})})]}),(0,b.jsxs)("p",{className:"mt-6 text-xs text-slate-500 dark:text-slate-400",children:[(0,b.jsx)("span",{className:"text-red-500",children:"*"})," Pflichtfeld"]})]})}a.s(["ProfileClient",()=>j],65238)}];

//# sourceMappingURL=_01efdac0._.js.map