{"version":3,"sources":["../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/components/ScoreCard.tsx","../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/components/InsightCard.tsx","../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/components/StressDistributionBar.tsx","../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/components/FollowUpActions.tsx","../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/components/AmyTextSection.tsx","../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/components/ReportLibrary.tsx","../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/components/KeyOutcomesCard.tsx","../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/components/WorkupStatusCard.tsx","../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/components/EscalationOfferCard.tsx","../../../../../../lib/telemetry/correlationId.ts","../../../../../../lib/audit/log.ts","../../../../../../apps/rhythm-patient-ui/app/patient/funnel/%5Bslug%5D/result/client.tsx","../../../../../../lib/escalation/auditLog.ts","../../../../../../node_modules/lucide-react/src/icons/stethoscope.ts","../../../../../../lib/escalation/detectRedFlags.ts"],"sourcesContent":["'use client'\n\nimport { Card } from '@/lib/ui'\nimport { typography, spacing, colors } from '@/lib/design-tokens'\n\ntype ScoreCardProps = {\n  score?: number\n  maxScore?: number\n  level?: 'low' | 'medium' | 'high'\n  label?: string\n  description?: string\n}\n\n/**\n * ScoreCard Component\n * \n * Displays assessment score prominently with visual styling based on level.\n * Designed for mobile-first display with clear visual hierarchy.\n */\nexport function ScoreCard({\n  score,\n  maxScore = 100,\n  level = 'medium',\n  label = 'Stresslevel',\n  description = 'Ihre aktuelle Bewertung',\n}: ScoreCardProps) {\n  // Determine color scheme based on level\n  const getLevelColors = () => {\n    switch (level) {\n      case 'low':\n        return {\n          bg: 'bg-green-50',\n          border: 'border-green-200',\n          text: 'text-green-900',\n          icon: 'âœ“',\n          iconBg: 'bg-green-100',\n          badge: 'bg-green-100 text-green-800',\n        }\n      case 'high':\n        return {\n          bg: 'bg-red-50',\n          border: 'border-red-200',\n          text: 'text-red-900',\n          icon: 'âš ',\n          iconBg: 'bg-red-100',\n          badge: 'bg-red-100 text-red-800',\n        }\n      default:\n        return {\n          bg: 'bg-amber-50',\n          border: 'border-amber-200',\n          text: 'text-amber-900',\n          icon: 'â—†',\n          iconBg: 'bg-amber-100',\n          badge: 'bg-amber-100 text-amber-800',\n        }\n    }\n  }\n\n  const colorScheme = getLevelColors()\n  const percentage = score !== undefined ? Math.round((score / maxScore) * 100) : 0\n\n  return (\n    <Card\n      padding=\"lg\"\n      radius=\"2xl\"\n      shadow=\"lg\"\n      border\n      className={`${colorScheme.bg} ${colorScheme.border} border-2`}\n    >\n      <div className=\"flex items-start gap-4\">\n        {/* Icon */}\n        <div\n          className={`flex-shrink-0 w-14 h-14 sm:w-16 sm:h-16 ${colorScheme.iconBg} rounded-full flex items-center justify-center`}\n        >\n          <span className=\"text-2xl sm:text-3xl\">{colorScheme.icon}</span>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"text-sm sm:text-base text-slate-600 mb-1\">{description}</p>\n          <h3\n            className={`text-2xl sm:text-3xl md:text-4xl font-bold ${colorScheme.text} mb-2`}\n            style={{ lineHeight: typography.lineHeight.tight }}\n          >\n            {score !== undefined ? `${score}/${maxScore}` : 'â€”'}\n          </h3>\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            <span className={`inline-block px-3 py-1 rounded-full text-xs sm:text-sm font-semibold ${colorScheme.badge}`}>\n              {label}\n            </span>\n            {percentage > 0 && (\n              <span className=\"text-xs sm:text-sm text-slate-600\">\n                {percentage}%\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n    </Card>\n  )\n}\n","'use client'\n\nimport { Card } from '@/lib/ui'\nimport { typography } from '@/lib/design-tokens'\n\ntype InsightCardProps = {\n  icon?: string\n  title: string\n  description: string\n  variant?: 'default' | 'success' | 'warning' | 'info'\n}\n\n/**\n * InsightCard Component\n * \n * Displays a single insight or finding from the assessment.\n * Used to present key takeaways in a scannable format.\n */\nexport function InsightCard({\n  icon = 'ðŸ’¡',\n  title,\n  description,\n  variant = 'default',\n}: InsightCardProps) {\n  // Determine styling based on variant\n  const getVariantStyles = () => {\n    switch (variant) {\n      case 'success':\n        return {\n          bg: 'bg-green-50',\n          border: 'border-green-200',\n          iconBg: 'bg-green-100',\n          titleColor: 'text-green-900',\n          textColor: 'text-green-800',\n        }\n      case 'warning':\n        return {\n          bg: 'bg-amber-50',\n          border: 'border-amber-200',\n          iconBg: 'bg-amber-100',\n          titleColor: 'text-amber-900',\n          textColor: 'text-amber-800',\n        }\n      case 'info':\n        return {\n          bg: 'bg-primary-50',\n          border: 'border-primary-200',\n          iconBg: 'bg-primary-100',\n          titleColor: 'text-primary-900',\n          textColor: 'text-primary-800',\n        }\n      default:\n        return {\n          bg: 'bg-slate-50',\n          border: 'border-slate-200',\n          iconBg: 'bg-slate-100',\n          titleColor: 'text-slate-900',\n          textColor: 'text-slate-700',\n        }\n    }\n  }\n\n  const styles = getVariantStyles()\n\n  return (\n    <Card\n      padding=\"md\"\n      radius=\"xl\"\n      shadow=\"sm\"\n      border\n      className={`${styles.bg} ${styles.border} hover:shadow-md transition-shadow`}\n    >\n      <div className=\"flex items-start gap-3\">\n        {/* Icon */}\n        <div\n          className={`flex-shrink-0 w-10 h-10 ${styles.iconBg} rounded-full flex items-center justify-center`}\n        >\n          <span className=\"text-lg\">{icon}</span>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <h4\n            className={`text-base sm:text-lg font-semibold ${styles.titleColor} mb-1`}\n            style={{ lineHeight: typography.lineHeight.tight }}\n          >\n            {title}\n          </h4>\n          <p\n            className={`text-sm sm:text-base ${styles.textColor}`}\n            style={{ lineHeight: typography.lineHeight.relaxed }}\n          >\n            {description}\n          </p>\n        </div>\n      </div>\n    </Card>\n  )\n}\n\ntype InsightCardsGroupProps = {\n  insights: Array<Omit<InsightCardProps, 'children'>>\n}\n\n/**\n * InsightCardsGroup Component\n * \n * Groups multiple insight cards with consistent spacing.\n */\nexport function InsightCardsGroup({ insights }: InsightCardsGroupProps) {\n  if (insights.length === 0) return null\n\n  return (\n    <div className=\"space-y-3\">\n      {insights.map((insight, index) => (\n        <InsightCard key={index} {...insight} />\n      ))}\n    </div>\n  )\n}\n","'use client'\n\nimport { Card } from '@/lib/ui'\nimport { typography } from '@/lib/design-tokens'\n\ntype DistributionSegment = {\n  label: string\n  value: number\n  color: string\n}\n\ntype StressDistributionBarProps = {\n  segments?: DistributionSegment[]\n  title?: string\n  description?: string\n}\n\n/**\n * StressDistributionBar Component\n * \n * Visualizes stress distribution across different categories.\n * Currently a placeholder for future implementation.\n */\nexport function StressDistributionBar({\n  segments = [],\n  title = 'Stressverteilung',\n  description = 'Ãœbersicht Ihrer Stressbereiche',\n}: StressDistributionBarProps) {\n  // Calculate total for percentage computation\n  const total = segments.reduce((sum, seg) => sum + seg.value, 0)\n\n  // Default placeholder segments if none provided\n  const displaySegments =\n    segments.length > 0\n      ? segments\n      : [\n          { label: 'KÃ¶rperlich', value: 30, color: 'bg-red-500' },\n          { label: 'Emotional', value: 45, color: 'bg-amber-500' },\n          { label: 'Kognitiv', value: 25, color: 'bg-primary-500' },\n        ]\n\n  return (\n    <Card padding=\"lg\" radius=\"xl\" shadow=\"md\" border className=\"bg-white\">\n      {/* Header */}\n      <div className=\"mb-4\">\n        <h3\n          className=\"text-lg sm:text-xl font-bold text-slate-900 mb-1\"\n          style={{ lineHeight: typography.lineHeight.tight }}\n        >\n          {title}\n        </h3>\n        <p className=\"text-sm sm:text-base text-slate-600\">{description}</p>\n      </div>\n\n      {/* Distribution Bar */}\n      <div className=\"mb-4\">\n        <div className=\"h-3 sm:h-4 bg-slate-200 rounded-full overflow-hidden flex\">\n          {displaySegments.map((segment, index) => {\n            const percentage = total > 0 ? (segment.value / total) * 100 : 0\n            return (\n              <div\n                key={index}\n                className={`${segment.color} transition-all duration-300`}\n                style={{ width: `${percentage}%` }}\n                title={`${segment.label}: ${Math.round(percentage)}%`}\n              />\n            )\n          })}\n        </div>\n      </div>\n\n      {/* Legend */}\n      <div className=\"flex flex-wrap gap-3\">\n        {displaySegments.map((segment, index) => {\n          const percentage = total > 0 ? Math.round((segment.value / total) * 100) : 0\n          return (\n            <div key={index} className=\"flex items-center gap-2\">\n              <div className={`w-3 h-3 sm:w-4 sm:h-4 ${segment.color} rounded-sm`} />\n              <span className=\"text-xs sm:text-sm text-slate-700\">\n                {segment.label}\n                <span className=\"text-slate-500 ml-1\">({percentage}%)</span>\n              </span>\n            </div>\n          )\n        })}\n      </div>\n\n      {/* Placeholder Notice */}\n      {segments.length === 0 && (\n        <div className=\"mt-4 p-3 bg-slate-50 border border-slate-200 rounded-lg\">\n          <p className=\"text-xs sm:text-sm text-slate-600 italic\">\n            ðŸ’¡ Diese Visualisierung wird basierend auf Ihren konkreten Antworten erstellt,\n            sobald die detaillierte Auswertung verfÃ¼gbar ist.\n          </p>\n        </div>\n      )}\n    </Card>\n  )\n}\n","'use client'\n\nimport { Card } from '@/lib/ui'\nimport { typography } from '@/lib/design-tokens'\n\ntype ActionItem = {\n  icon?: string\n  title: string\n  description: string\n  actionLabel?: string\n  actionUrl?: string\n  onClick?: () => void\n}\n\ntype FollowUpActionsProps = {\n  actions: ActionItem[]\n  title?: string\n  description?: string\n}\n\n/**\n * FollowUpActions Component\n * \n * Displays recommended next steps and actions for the patient.\n * Provides clear guidance on what to do after completing the assessment.\n */\nexport function FollowUpActions({\n  actions,\n  title = 'NÃ¤chste Schritte',\n  description = 'Was kÃ¶nnen Sie jetzt tun?',\n}: FollowUpActionsProps) {\n  if (actions.length === 0) return null\n\n  return (\n    <Card padding=\"lg\" radius=\"xl\" shadow=\"md\" border className=\"bg-gradient-to-br from-sky-50 to-blue-50 dark:from-sky-900/20 dark:to-blue-900/20 border-sky-200 dark:border-sky-800\">\n      {/* Header */}\n      <div className=\"mb-4\">\n        <div className=\"flex items-center gap-2 mb-2\">\n          <span className=\"text-2xl\">ðŸŽ¯</span>\n          <h3\n            className=\"text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-100\"\n            style={{ lineHeight: typography.lineHeight.tight }}\n          >\n            {title}\n          </h3>\n        </div>\n        <p className=\"text-sm sm:text-base text-slate-700 dark:text-slate-300\">{description}</p>\n      </div>\n\n      {/* Action Items */}\n      <div className=\"space-y-3\">\n        {actions.map((action, index) => (\n          <div\n            key={index}\n            className=\"bg-white dark:bg-slate-800 border border-sky-200 dark:border-sky-800 rounded-lg p-4 hover:shadow-md transition-shadow\"\n          >\n            <div className=\"flex items-start gap-3\">\n              {/* Icon/Number */}\n              <div className=\"flex-shrink-0 w-8 h-8 bg-sky-100 dark:bg-sky-900/40 text-sky-700 dark:text-sky-400 rounded-full flex items-center justify-center font-bold text-sm\">\n                {action.icon || `${index + 1}`}\n              </div>\n\n              {/* Content */}\n              <div className=\"flex-1 min-w-0\">\n                <h4\n                  className=\"text-base sm:text-lg font-semibold text-slate-900 dark:text-slate-100 mb-1\"\n                  style={{ lineHeight: typography.lineHeight.tight }}\n                >\n                  {action.title}\n                </h4>\n                <p\n                  className=\"text-sm sm:text-base text-slate-700 dark:text-slate-300 mb-2\"\n                  style={{ lineHeight: typography.lineHeight.relaxed }}\n                >\n                  {action.description}\n                </p>\n\n                {/* Action Button/Link */}\n                {(action.actionLabel || action.actionUrl || action.onClick) && (\n                  <div>\n                    {action.actionUrl ? (\n                      <a\n                        href={action.actionUrl}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"inline-block text-sm sm:text-base font-medium text-sky-700 dark:text-sky-400 hover:text-sky-900 dark:hover:text-sky-300 hover:underline\"\n                      >\n                        {action.actionLabel || 'Mehr erfahren'} â†’\n                      </a>\n                    ) : action.onClick ? (\n                      <button\n                        onClick={action.onClick}\n                        className=\"text-sm sm:text-base font-medium text-sky-700 dark:text-sky-400 hover:text-sky-900 dark:hover:text-sky-300 hover:underline\"\n                      >\n                        {action.actionLabel || 'Mehr erfahren'} â†’\n                      </button>\n                    ) : null}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </Card>\n  )\n}\n","'use client'\n\nimport { Card } from '@/lib/ui'\nimport { typography } from '@/lib/design-tokens'\nimport ReactMarkdown from 'react-markdown'\nimport remarkGfm from 'remark-gfm'\n\ntype AmyTextSectionProps = {\n  text: string\n  title?: string\n  icon?: string\n}\n\n/**\n * AmyTextSection Component\n * \n * Renders AI-generated assessment text (AMY) with proper typography.\n * Applies path-layout styling for optimal readability on mobile and desktop.\n */\nexport function AmyTextSection({\n  text,\n  title = 'Ihre persÃ¶nliche Auswertung',\n  icon = 'ðŸ¤–',\n}: AmyTextSectionProps) {\n  if (!text || text.trim() === '') return null\n\n  return (\n    <Card padding=\"lg\" radius=\"xl\" shadow=\"md\" border className=\"bg-white\">\n      {/* Header */}\n      <div className=\"mb-4 pb-4 border-b border-slate-200\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-2xl\">{icon}</span>\n          <h3\n            className=\"text-lg sm:text-xl font-bold text-slate-900\"\n            style={{ lineHeight: typography.lineHeight.tight }}\n          >\n            {title}\n          </h3>\n        </div>\n        <p className=\"text-xs sm:text-sm text-slate-500 mt-1\">\n          Erstellt von AMY, Ihrer digitalen Gesundheitsassistentin\n        </p>\n      </div>\n\n      {/* AMY Text Content - Path Layout with Proper Typography */}\n      <div\n        className=\"amy-text-content prose prose-slate max-w-none\"\n        style={{\n          fontSize: typography.fontSize.base,\n          lineHeight: typography.lineHeight.relaxed,\n        }}\n      >\n        <ReactMarkdown\n          remarkPlugins={[remarkGfm]}\n          components={{\n            // Headings\n            h1: ({ children }) => (\n              <h1\n                className=\"text-2xl sm:text-3xl font-bold text-slate-900 mb-3\"\n                style={{ lineHeight: typography.lineHeight.tight }}\n              >\n                {children}\n              </h1>\n            ),\n            h2: ({ children }) => (\n              <h2\n                className=\"text-xl sm:text-2xl font-bold text-slate-900 mb-3 mt-6\"\n                style={{ lineHeight: typography.lineHeight.tight }}\n              >\n                {children}\n              </h2>\n            ),\n            h3: ({ children }) => (\n              <h3\n                className=\"text-lg sm:text-xl font-semibold text-slate-900 mb-2 mt-4\"\n                style={{ lineHeight: typography.lineHeight.tight }}\n              >\n                {children}\n              </h3>\n            ),\n            // Paragraphs\n            p: ({ children }) => (\n              <p\n                className=\"text-sm sm:text-base text-slate-700 mb-4\"\n                style={{ lineHeight: typography.lineHeight.relaxed }}\n              >\n                {children}\n              </p>\n            ),\n            // Lists\n            ul: ({ children }) => (\n              <ul className=\"list-disc list-inside space-y-2 mb-4 text-sm sm:text-base text-slate-700\">\n                {children}\n              </ul>\n            ),\n            ol: ({ children }) => (\n              <ol className=\"list-decimal list-inside space-y-2 mb-4 text-sm sm:text-base text-slate-700\">\n                {children}\n              </ol>\n            ),\n            li: ({ children }) => (\n              <li style={{ lineHeight: typography.lineHeight.relaxed }}>{children}</li>\n            ),\n            // Emphasis\n            strong: ({ children }) => (\n              <strong className=\"font-semibold text-slate-900\">{children}</strong>\n            ),\n            em: ({ children }) => <em className=\"italic text-slate-800\">{children}</em>,\n            // Code\n            code: ({ children }) => (\n              <code className=\"px-1.5 py-0.5 bg-slate-100 text-slate-800 rounded text-sm font-mono\">\n                {children}\n              </code>\n            ),\n            // Blockquote\n            blockquote: ({ children }) => (\n              <blockquote className=\"border-l-4 border-sky-500 pl-4 py-2 my-4 bg-sky-50 text-slate-700 italic\">\n                {children}\n              </blockquote>\n            ),\n            // Links\n            a: ({ href, children }) => (\n              <a\n                href={href}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-sky-700 hover:text-sky-900 underline\"\n              >\n                {children}\n              </a>\n            ),\n          }}\n        >\n          {text}\n        </ReactMarkdown>\n      </div>\n    </Card>\n  )\n}\n","/**\n * Report Library Component\n * Displays list of reports with download capability\n * V05-I03.4: Result Screen\n */\n\n'use client'\n\nimport type { ReportWithAssessment } from '@/lib/db/queries/reports'\n\ntype ReportLibraryProps = {\n  reports: ReportWithAssessment[]\n}\n\nexport function ReportLibrary({ reports }: ReportLibraryProps) {\n  if (reports.length === 0) {\n    return (\n      <div className=\"bg-white border border-slate-200 rounded-xl p-8 shadow-sm\">\n        <div className=\"text-center\">\n          <div\n            className=\"inline-flex items-center justify-center w-16 h-16 rounded-full mb-4\"\n            style={{ backgroundColor: 'var(--color-neutral-100)' }}\n          >\n            <span className=\"text-3xl\">ðŸ“„</span>\n          </div>\n          <h3 className=\"text-lg font-bold text-slate-900 mb-2\">Keine Berichte verfÃ¼gbar</h3>\n          <p className=\"text-sm text-slate-600\">\n            Es sind noch keine Berichte fÃ¼r dieses Assessment vorhanden.\n          </p>\n          <p className=\"text-sm text-slate-600 mt-2\">\n            Berichte werden automatisch erstellt, sobald Ihr Assessment ausgewertet wurde.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"bg-white border border-slate-200 rounded-xl p-6 shadow-sm\">\n      <div className=\"flex items-start gap-3 mb-4\">\n        <span className=\"text-2xl flex-shrink-0\">ðŸ“š</span>\n        <div className=\"flex-1\">\n          <h3 className=\"text-lg sm:text-xl font-bold text-slate-900\">Ihre Berichte</h3>\n          <p className=\"text-sm text-slate-600 mt-1\">\n            {reports.length === 1\n              ? '1 Bericht verfÃ¼gbar'\n              : `${reports.length} Berichte verfÃ¼gbar`}\n          </p>\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        {reports.map((report) => (\n          <div\n            key={report.id}\n            className=\"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors\"\n          >\n            <div className=\"flex items-start justify-between gap-3\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <span className=\"text-lg\">ðŸ“„</span>\n                  <span className=\"font-medium text-slate-900\">Assessment-Bericht</span>\n                </div>\n\n                {report.report_text_short && (\n                  <p className=\"text-sm text-slate-600 mb-2 line-clamp-2\">\n                    {report.report_text_short}\n                  </p>\n                )}\n\n                <div className=\"flex flex-wrap gap-3 text-xs text-slate-500\">\n                  <span>\n                    {new Intl.DateTimeFormat('de-DE', {\n                      dateStyle: 'medium',\n                      timeStyle: 'short',\n                    }).format(new Date(report.created_at))}\n                  </span>\n                  {report.risk_level && (\n                    <span className=\"flex items-center gap-1\">\n                      â€¢\n                      <span\n                        className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${\n                          report.risk_level === 'low'\n                            ? 'bg-green-100 text-green-800'\n                            : report.risk_level === 'moderate'\n                              ? 'bg-yellow-100 text-yellow-800'\n                              : 'bg-red-100 text-red-800'\n                        }`}\n                      >\n                        {report.risk_level === 'low'\n                          ? 'Niedriges Risiko'\n                          : report.risk_level === 'moderate'\n                            ? 'Moderates Risiko'\n                            : 'Hohes Risiko'}\n                      </span>\n                    </span>\n                  )}\n                </div>\n              </div>\n\n              <button\n                onClick={() => {\n                  // For now, show info. Download could be added later\n                  alert('Download-Funktion wird in KÃ¼rze verfÃ¼gbar sein.')\n                }}\n                className=\"flex-shrink-0 px-3 py-2 text-sm text-sky-700 hover:text-sky-900 hover:bg-sky-50 rounded transition-colors\"\n                aria-label=\"Bericht anzeigen\"\n              >\n                Anzeigen\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","/**\n * Key Outcomes Component\n * Displays summary of assessment outcomes\n * V05-I03.4: Result Screen\n */\n\n'use client'\n\nimport type { KeyOutcomes } from '@/lib/db/queries/reports'\n\ntype KeyOutcomesCardProps = {\n  outcomes: KeyOutcomes | null\n}\n\nexport function KeyOutcomesCard({ outcomes }: KeyOutcomesCardProps) {\n  if (!outcomes) {\n    return null\n  }\n\n  const hasData =\n    outcomes.score_numeric !== null ||\n    outcomes.sleep_score !== null ||\n    outcomes.risk_level !== null\n\n  if (!hasData) {\n    return (\n      <div className=\"bg-white border border-slate-200 rounded-xl p-6 shadow-sm\">\n        <div className=\"text-center\">\n          <div\n            className=\"inline-flex items-center justify-center w-16 h-16 rounded-full mb-4\"\n            style={{ backgroundColor: 'var(--color-neutral-100)' }}\n          >\n            <span className=\"text-3xl\">ðŸ“Š</span>\n          </div>\n          <h3 className=\"text-lg font-bold text-slate-900 mb-2\">\n            Auswertung wird vorbereitet\n          </h3>\n          <p className=\"text-sm text-slate-600\">\n            Ihre detaillierten Ergebnisse werden in KÃ¼rze verfÃ¼gbar sein.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"bg-white border border-slate-200 rounded-xl p-6 shadow-sm\">\n      <div className=\"flex items-start gap-3 mb-4\">\n        <span className=\"text-2xl flex-shrink-0\">ðŸ“Š</span>\n        <div className=\"flex-1\">\n          <h3 className=\"text-lg sm:text-xl font-bold text-slate-900\">\n            Wichtige Ergebnisse\n          </h3>\n          <p className=\"text-sm text-slate-600 mt-1\">Zusammenfassung Ihrer Bewertung</p>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n        {/* Stress Score */}\n        {outcomes.score_numeric !== null && (\n          <div className=\"bg-slate-50 rounded-lg p-4\">\n            <div className=\"text-xs text-slate-500 uppercase tracking-wide mb-2\">\n              Stress-Level\n            </div>\n            <div className=\"text-2xl font-bold text-slate-900 mb-1\">\n              {outcomes.score_numeric}\n              <span className=\"text-base text-slate-500\">/100</span>\n            </div>\n            <div className=\"w-full bg-slate-200 rounded-full h-2\">\n              <div\n                className=\"h-2 rounded-full bg-sky-600\"\n                style={{ width: `${outcomes.score_numeric}%` }}\n              />\n            </div>\n          </div>\n        )}\n\n        {/* Sleep Score */}\n        {outcomes.sleep_score !== null && (\n          <div className=\"bg-slate-50 rounded-lg p-4\">\n            <div className=\"text-xs text-slate-500 uppercase tracking-wide mb-2\">\n              Schlaf-QualitÃ¤t\n            </div>\n            <div className=\"text-2xl font-bold text-slate-900 mb-1\">\n              {outcomes.sleep_score}\n              <span className=\"text-base text-slate-500\">/100</span>\n            </div>\n            <div className=\"w-full bg-slate-200 rounded-full h-2\">\n              <div\n                className=\"h-2 rounded-full bg-indigo-600\"\n                style={{ width: `${outcomes.sleep_score}%` }}\n              />\n            </div>\n          </div>\n        )}\n\n        {/* Risk Level */}\n        {outcomes.risk_level && (\n          <div className=\"bg-slate-50 rounded-lg p-4\">\n            <div className=\"text-xs text-slate-500 uppercase tracking-wide mb-2\">\n              Risiko-Einstufung\n            </div>\n            <div\n              className={`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-semibold ${\n                outcomes.risk_level === 'low'\n                  ? 'bg-green-100 text-green-800'\n                  : outcomes.risk_level === 'moderate'\n                    ? 'bg-yellow-100 text-yellow-800'\n                    : 'bg-red-100 text-red-800'\n              }`}\n            >\n              {outcomes.risk_level === 'low'\n                ? 'âœ“ Niedrig'\n                : outcomes.risk_level === 'moderate'\n                  ? 'âš  Moderat'\n                  : 'âš  Hoch'}\n            </div>\n            <p className=\"text-xs text-slate-600 mt-2\">\n              {outcomes.risk_level === 'low'\n                ? 'Gute BewÃ¤ltigungsstrategien'\n                : outcomes.risk_level === 'moderate'\n                  ? 'UnterstÃ¼tzung empfohlen'\n                  : 'Professionelle Beratung empfohlen'}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {outcomes.total_reports > 0 && (\n        <div className=\"mt-4 pt-4 border-t border-slate-200\">\n          <p className=\"text-xs text-slate-500 text-center\">\n            Basierend auf {outcomes.total_reports}{' '}\n            {outcomes.total_reports === 1 ? 'Bericht' : 'Berichten'}\n          </p>\n        </div>\n      )}\n    </div>\n  )\n}\n","'use client'\n\nimport { Card } from '@/lib/ui'\nimport { typography } from '@/lib/design-tokens'\n\ntype WorkupStatus = 'needs_more_data' | 'ready_for_review' | null\n\ntype WorkupStatusCardProps = {\n  status: WorkupStatus\n  missingDataFields?: string[]\n}\n\n/**\n * WorkupStatusCard Component\n * \n * E6.4.4: Displays workup status and missing data information for patients.\n * Shows clear next steps without exposing medical diagnoses.\n */\nexport function WorkupStatusCard({ status, missingDataFields = [] }: WorkupStatusCardProps) {\n  if (!status) return null\n\n  const isNeedsMoreData = status === 'needs_more_data'\n  const statusConfig = isNeedsMoreData\n    ? {\n        icon: 'ðŸ“‹',\n        title: 'Weitere Angaben erforderlich',\n        description:\n          'Um Ihre Betreuung optimal zu gestalten, benÃ¶tigen wir noch einige zusÃ¤tzliche Informationen.',\n        bgColor: 'from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20',\n        borderColor: 'border-amber-200 dark:border-amber-800',\n        statusLabel: 'Daten ergÃ¤nzen',\n        statusColor: 'text-amber-700 dark:text-amber-400',\n      }\n    : {\n        icon: 'âœ…',\n        title: 'Assessment vollstÃ¤ndig',\n        description:\n          'Ihre Angaben sind vollstÃ¤ndig und werden fÃ¼r die weitere Betreuung verwendet.',\n        bgColor: 'from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20',\n        borderColor: 'border-emerald-200 dark:border-emerald-800',\n        statusLabel: 'Bereit zur Auswertung',\n        statusColor: 'text-emerald-700 dark:text-emerald-400',\n      }\n\n  return (\n    <Card\n      padding=\"lg\"\n      radius=\"xl\"\n      shadow=\"md\"\n      border\n      className={`bg-gradient-to-br ${statusConfig.bgColor} ${statusConfig.borderColor}`}\n    >\n      {/* Header */}\n      <div className=\"flex items-start gap-3 mb-4\">\n        <span className=\"text-3xl flex-shrink-0\">{statusConfig.icon}</span>\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <h3\n              className=\"text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-100\"\n              style={{ lineHeight: typography.lineHeight.tight }}\n            >\n              {statusConfig.title}\n            </h3>\n            <span\n              className={`text-xs sm:text-sm font-semibold px-2 py-1 rounded-full ${statusConfig.statusColor} bg-white dark:bg-slate-800`}\n            >\n              {statusConfig.statusLabel}\n            </span>\n          </div>\n          <p className=\"text-sm sm:text-base text-slate-700 dark:text-slate-300\">\n            {statusConfig.description}\n          </p>\n        </div>\n      </div>\n\n      {/* Missing Data List */}\n      {isNeedsMoreData && missingDataFields.length > 0 && (\n        <div className=\"mt-4 pt-4 border-t border-amber-200 dark:border-amber-800\">\n          <h4 className=\"text-sm sm:text-base font-semibold text-slate-900 dark:text-slate-100 mb-2\">\n            Fehlende Informationen:\n          </h4>\n          <ul className=\"space-y-1\">\n            {missingDataFields.map((field, index) => (\n              <li\n                key={index}\n                className=\"text-sm text-slate-700 dark:text-slate-300 flex items-center gap-2\"\n              >\n                <span className=\"text-amber-600 dark:text-amber-400\">â€¢</span>\n                <span>{formatFieldName(field)}</span>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </Card>\n  )\n}\n\n/**\n * Format field names for display\n * Converts snake_case to readable German labels\n */\nfunction formatFieldName(field: string): string {\n  const fieldLabels: Record<string, string> = {\n    sleep_quality: 'SchlafqualitÃ¤t',\n    stress_triggers: 'StressauslÃ¶ser',\n    daily_routine: 'Tagesablauf',\n    exercise_frequency: 'BewegungshÃ¤ufigkeit',\n    nutrition_habits: 'ErnÃ¤hrungsgewohnheiten',\n    social_support: 'Soziale UnterstÃ¼tzung',\n    work_stress: 'Arbeitsstress',\n    family_history: 'Familienanamnese',\n  }\n\n  // Return German label if available, otherwise show technical field name\n  return fieldLabels[field] || `[${field}]`\n}\n","'use client'\n\nimport { useState } from 'react'\nimport { Card, Button, EmergencyContactInfo } from '@/lib/ui'\nimport { AlertTriangle, Video, Stethoscope } from 'lucide-react'\nimport { typography } from '@/lib/design-tokens'\nimport {\n  ESCALATION_DISCLAIMER,\n  RED_FLAG_EMERGENCY_WARNING,\n} from '@/lib/safety/disclaimers'\n\ntype EscalationOfferCardProps = {\n  reasons: string[]\n  correlationId: string\n  onCtaClick?: (offerType: 'video_consultation' | 'doctor_appointment' | 'emergency_contact') => void\n}\n\n/**\n * EscalationOfferCard Component\n *\n * E6.4.6: Displays emergency/high-risk warning with escalation CTAs.\n * E6.6.8: Uses centralized disclaimers with stronger emergency guidance.\n * Shown when red flags are detected in assessment results.\n * NO SCHEDULING - placeholder links only.\n */\nexport function EscalationOfferCard({ reasons, correlationId, onCtaClick }: EscalationOfferCardProps) {\n  const [clicked, setClicked] = useState<string | null>(null)\n\n  const handleClick = (offerType: 'video_consultation' | 'doctor_appointment' | 'emergency_contact') => {\n    setClicked(offerType)\n    onCtaClick?.(offerType)\n  }\n\n  return (\n    <Card\n      padding=\"lg\"\n      radius=\"xl\"\n      shadow=\"lg\"\n      border\n      className=\"bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 border-red-300 dark:border-red-800\"\n    >\n      {/* Alert Header */}\n      <div className=\"flex items-start gap-3 mb-4\">\n        <div className=\"flex-shrink-0 w-12 h-12 bg-red-100 dark:bg-red-900/40 rounded-full flex items-center justify-center\">\n          <AlertTriangle className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\n        </div>\n        <div className=\"flex-1\">\n          <h3\n            className=\"text-xl font-bold text-red-900 dark:text-red-100 mb-2\"\n            style={{ lineHeight: typography.lineHeight.tight }}\n          >\n            Wichtiger Hinweis zu Ihrem Ergebnis\n          </h3>\n          <p className=\"text-sm text-red-800 dark:text-red-200\">\n            {ESCALATION_DISCLAIMER.intro}\n          </p>\n        </div>\n      </div>\n\n      {/* Disclaimer - E6.6.8: Stronger language */}\n      <div className=\"mb-6 p-4 bg-white dark:bg-slate-800 rounded-lg border border-red-200 dark:border-red-800\">\n        <p className=\"text-sm text-slate-700 dark:text-slate-300 mb-2\">\n          <strong>{ESCALATION_DISCLAIMER.title}:</strong>\n        </p>\n        <ul className=\"space-y-1 text-sm text-slate-700 dark:text-slate-300\">\n          {reasons.map((reason, index) => (\n            <li key={index} className=\"flex items-start gap-2\">\n              <span className=\"text-red-600 dark:text-red-400 flex-shrink-0\">â€¢</span>\n              <span>{reason}</span>\n            </li>\n          ))}\n        </ul>\n      </div>\n\n      {/* Emergency Notice - E6.6.8: Use EmergencyContactInfo component with stronger warning */}\n      <div className=\"mb-6 p-4 bg-red-100 dark:bg-red-900/30 rounded-lg\">\n        <EmergencyContactInfo\n          variant=\"compact\"\n          title={RED_FLAG_EMERGENCY_WARNING.title}\n          showAll={false}\n        />\n        <p className=\"text-sm text-red-800 dark:text-red-200 mt-2 ml-6\">\n          {RED_FLAG_EMERGENCY_WARNING.urgentAction}\n        </p>\n      </div>\n\n      {/* CTA Buttons */}\n      <div className=\"space-y-3\">\n        <Button\n          variant=\"danger\"\n          size=\"lg\"\n          fullWidth\n          onClick={() => handleClick('video_consultation')}\n          disabled={clicked !== null}\n          className=\"flex items-center justify-center gap-2\"\n        >\n          <Video className=\"w-5 h-5\" />\n          {clicked === 'video_consultation' ? 'Wird vorbereitet...' : 'Video-Sprechstunde anfordern'}\n        </Button>\n\n        <Button\n          variant=\"outline\"\n          size=\"lg\"\n          fullWidth\n          onClick={() => handleClick('doctor_appointment')}\n          disabled={clicked !== null}\n          className=\"flex items-center justify-center gap-2\"\n        >\n          <Stethoscope className=\"w-5 h-5\" />\n          {clicked === 'doctor_appointment' ? 'Wird vorbereitet...' : 'Arzttermin vereinbaren'}\n        </Button>\n      </div>\n\n      {/* Footer Note */}\n      <p className=\"mt-4 text-xs text-slate-500 dark:text-slate-400 text-center\">\n        Correlation ID: {correlationId.substring(0, 16)}...\n      </p>\n    </Card>\n  )\n}\n","/**\n * E6.4.8: Correlation ID Utilities\n * \n * Enhanced correlation ID handling with validation and bounded length.\n * Aligns with E6.2.8 (X-Request-Id) but adds stricter validation.\n */\n\n/**\n * Maximum allowed length for correlation IDs\n */\nconst MAX_CORRELATION_ID_LENGTH = 64\n\n/**\n * Allowed characters for correlation ID: alphanumeric, hyphens, underscores\n */\nconst CORRELATION_ID_PATTERN = /^[a-zA-Z0-9_-]+$/\n\n/**\n * Validates a correlation ID format and length\n * \n * @param correlationId - Correlation ID to validate\n * @returns true if valid, false otherwise\n */\nexport function isValidCorrelationId(correlationId: string): boolean {\n  if (!correlationId || typeof correlationId !== 'string') {\n    return false\n  }\n  \n  if (correlationId.length > MAX_CORRELATION_ID_LENGTH) {\n    return false\n  }\n  \n  return CORRELATION_ID_PATTERN.test(correlationId)\n}\n\n/**\n * Gets or generates a correlation ID from a request\n * \n * E6.4.8 Guardrails:\n * - Bounded length (max 64 characters)\n * - Only [a-zA-Z0-9-_] allowed\n * - Fail-closed: invalid incoming ID â†’ generate new one (don't fail request)\n * \n * @param request - Optional Request object to extract existing ID from headers\n * @returns Valid correlation ID (existing or newly generated)\n */\nexport function getCorrelationId(request?: Request): string {\n  if (request) {\n    // Try X-Correlation-Id header first (E6.4.8 standard)\n    const correlationIdHeader = request.headers.get('x-correlation-id')\n    if (correlationIdHeader && isValidCorrelationId(correlationIdHeader)) {\n      return correlationIdHeader\n    }\n    \n    // Fallback to X-Request-Id (E6.2.8 compatibility)\n    const requestIdHeader = request.headers.get('x-request-id')\n    if (requestIdHeader && isValidCorrelationId(requestIdHeader)) {\n      return requestIdHeader\n    }\n  }\n  \n  // Generate new UUID v4\n  return generateCorrelationId()\n}\n\n/**\n * Generates a new correlation ID (UUID v4 format)\n * \n * @returns New correlation ID\n */\nexport function generateCorrelationId(): string {\n  if (typeof crypto !== 'undefined' && 'randomUUID' in crypto) {\n    return crypto.randomUUID()\n  }\n  \n  // Fallback for environments without crypto.randomUUID\n  return `${Date.now()}-${Math.random().toString(36).slice(2, 11)}`\n}\n\n/**\n * Adds correlation ID to response headers\n * \n * Sets both X-Correlation-Id (E6.4.8) and X-Request-Id (E6.2.8 compat)\n * \n * @param response - Response to modify\n * @param correlationId - Correlation ID to add\n * @returns Modified response\n */\nexport function withCorrelationId<T extends Response>(\n  response: T,\n  correlationId: string,\n): T {\n  response.headers.set('x-correlation-id', correlationId)\n  response.headers.set('x-request-id', correlationId) // E6.2.8 compatibility\n  return response\n}\n","/**\n * Audit Logging Helper\n *\n * Provides type-safe audit logging functionality for decision-relevant events.\n * Ensures no PHI leakage and maintains comprehensive audit trails.\n *\n * @module lib/audit/log\n */\n\nimport { createClient } from '@supabase/supabase-js'\nimport type { Database, Json } from '@/lib/types/supabase'\nimport {\n  type AuditEntityType,\n  type AuditAction,\n  type AuditSource,\n  type UserRole,\n} from '@/lib/contracts/registry'\nimport { env } from '@/lib/env'\n\n// ============================================================\n// Types\n// ============================================================\n\n/**\n * Audit event metadata\n * Contains version information and correlation IDs\n * NO PHI should be stored here\n */\nexport type AuditMetadata = {\n  request_id?: string\n  algorithm_version?: string\n  prompt_version?: string\n  report_version?: string\n  correlation_id?: string\n  safety_score?: number\n  status_from?: string\n  status_to?: string\n  [key: string]: string | number | boolean | undefined\n}\n\n/**\n * Audit diff payload\n * Contains before/after snapshots of changes\n * Should contain IDs and status transitions, NOT raw clinical text\n */\nexport type AuditDiff = {\n  before?: Record<string, unknown>\n  after?: Record<string, unknown>\n  changes?: Record<string, { from: unknown; to: unknown }>\n}\n\n/**\n * Complete audit event structure\n */\nexport type AuditEvent = {\n  // Context\n  org_id?: string\n  actor_user_id?: string\n  actor_role?: UserRole\n  source: AuditSource\n\n  // Entity\n  entity_type: AuditEntityType\n  entity_id: string\n  action: AuditAction\n\n  // Details\n  diff?: AuditDiff\n  metadata?: AuditMetadata\n}\n\n/**\n * Result of logging an audit event\n */\nexport type AuditLogResult = {\n  success: boolean\n  audit_id?: string\n  error?: string\n}\n\n// ============================================================\n// Supabase Client (Service Role)\n// ============================================================\n\n/**\n * Creates a Supabase client with service role key for audit logging\n * Bypasses RLS to ensure audit logs are always written\n */\nfunction getAuditClient() {\n  const supabaseUrl = env.NEXT_PUBLIC_SUPABASE_URL || env.SUPABASE_URL\n  const supabaseServiceKey = env.SUPABASE_SERVICE_ROLE_KEY || env.SUPABASE_SERVICE_KEY\n\n  if (!supabaseUrl || !supabaseServiceKey) {\n    console.error('[audit/log] Missing Supabase credentials')\n    return null\n  }\n\n  return createClient<Database>(supabaseUrl, supabaseServiceKey, {\n    auth: { persistSession: false },\n  })\n}\n\n// ============================================================\n// PHI Protection & Redaction\n// ============================================================\n\n/**\n * List of allowed keys in metadata and diff objects\n * These are safe to store (IDs, versions, statuses, numeric values)\n */\nconst ALLOWED_METADATA_KEYS = [\n  'request_id',\n  'correlation_id',\n  'algorithm_version',\n  'prompt_version',\n  'report_version',\n  'version',\n  'safety_score',\n  'finding_count',\n  'status_from',\n  'status_to',\n  'assigned_to_role',\n  'reason',\n  'consent_type',\n  'granted',\n  'rollout_percent',\n  'rollout_percent_from',\n  'rollout_percent_to',\n  'is_active',\n  'assessment_id',\n  'report_id',\n  'task_id',\n  'funnel_id',\n  'version_id',\n  'consent_id',\n  'config_key',\n  'consent_version',\n  'profile_updated',\n  'review_id',\n  'job_id',\n  'decision_reason',\n  'has_notes',\n  // V05-I10.2: Account deletion/retention metadata\n  'deletion_reason',\n  'scheduled_for',\n  'retention_period_days',\n  'records_deleted',\n  'records_anonymized',\n  'executed_by',\n  'anonymization_reason',\n  // V05-I10.3: KPI/Observability tracking\n  'kpi_event',\n  'funnel_slug',\n  'drop_off_reason',\n  'current_step_id',\n  'step_order_index',\n  'duration_seconds',\n  'duration_before_drop_seconds',\n  'started_at',\n  'completed_at',\n  'time_to_report_seconds',\n  'report_created_at',\n  'error_type',\n] as const\n\n/**\n * List of keys that contain PHI and must be blocked\n */\nconst PHI_KEYS = [\n  'content',\n  'text',\n  'notes',\n  'answers',\n  'answer',\n  'response',\n  'extracted_data',\n  'clinical_notes',\n  'patient_notes',\n  'observation',\n  'diagnosis',\n  'medication',\n  'name',\n  'email',\n  'phone',\n  'address',\n  'ssn',\n  'dob',\n  'date_of_birth',\n] as const\n\n/**\n * Redacts PHI from a data object\n * Only allows specific safe keys and removes PHI-containing fields\n *\n * @param data - Object to redact\n * @param maxSize - Maximum allowed size in characters (default: 5000)\n * @returns Redacted object with only safe fields\n */\nexport function redactPHI(\n  data: Record<string, unknown> | undefined,\n  maxSize = 5000,\n): Record<string, unknown> {\n  if (!data || typeof data !== 'object') {\n    return {}\n  }\n\n  const redacted: Record<string, unknown> = {}\n  let totalSize = 0\n\n  for (const [key, value] of Object.entries(data)) {\n    // Block PHI keys explicitly\n    const lowerKey = key.toLowerCase()\n    if (PHI_KEYS.some((phiKey) => lowerKey.includes(phiKey))) {\n      redacted[key] = '[REDACTED]'\n      continue\n    }\n\n    // Check if key is in allowlist\n    const isAllowed = ALLOWED_METADATA_KEYS.includes(key as (typeof ALLOWED_METADATA_KEYS)[number])\n\n    // Allow numeric values, booleans, and safe strings\n    if (typeof value === 'number' || typeof value === 'boolean') {\n      redacted[key] = value\n      totalSize += String(value).length\n    } else if (typeof value === 'string') {\n      // Only allow strings from allowlist or UUID-like patterns\n      const isUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(value)\n      const isShortSafe = value.length <= 100 && !/[<>{}]/.test(value) // No HTML/JSON\n\n      if (isAllowed || isUUID || (isShortSafe && lowerKey.includes('id'))) {\n        redacted[key] = value\n        totalSize += value.length\n      } else {\n        redacted[key] = '[REDACTED]'\n      }\n    } else if (value === null || value === undefined) {\n      redacted[key] = value\n    } else if (typeof value === 'object' && !Array.isArray(value)) {\n      // Recursively redact nested objects\n      redacted[key] = redactPHI(value as Record<string, unknown>, maxSize - totalSize)\n      totalSize += JSON.stringify(redacted[key]).length\n    } else {\n      // Arrays and other types - redact to be safe\n      redacted[key] = '[REDACTED]'\n    }\n\n    // Enforce size limit\n    if (totalSize > maxSize) {\n      console.warn('[audit/log] Metadata/diff size exceeded limit, truncating')\n      break\n    }\n  }\n\n  return redacted\n}\n\n// ============================================================\n// Core Logging Function\n// ============================================================\n\n/**\n * Logs an audit event to the database\n *\n * This function:\n * - Validates event structure\n * - Ensures no PHI in diff/metadata\n * - Uses service role to bypass RLS\n * - Returns success/failure status\n *\n * @param event - The audit event to log\n * @returns Result indicating success or failure\n *\n * @example\n * ```typescript\n * await logAuditEvent({\n *   org_id: '123e4567-e89b-12d3-a456-426614174000',\n *   actor_user_id: user.id,\n *   actor_role: 'clinician',\n *   source: 'api',\n *   entity_type: 'report',\n *   entity_id: reportId,\n *   action: 'generate',\n *   metadata: {\n *     algorithm_version: '1.0',\n *     prompt_version: '2.0',\n *     report_version: '1.0',\n *   },\n * })\n * ```\n */\nexport async function logAuditEvent(event: AuditEvent): Promise<AuditLogResult> {\n  const startTime = Date.now()\n\n  try {\n    // Validate event\n    if (!event.entity_type) {\n      return { success: false, error: 'entity_type is required' }\n    }\n    if (!event.entity_id) {\n      return { success: false, error: 'entity_id is required' }\n    }\n    if (!event.action) {\n      return { success: false, error: 'action is required' }\n    }\n    if (!event.source) {\n      return { success: false, error: 'source is required' }\n    }\n\n    // Get Supabase client\n    const supabase = getAuditClient()\n    if (!supabase) {\n      console.error('[audit/log] Cannot create Supabase client')\n      return { success: false, error: 'Supabase client unavailable' }\n    }\n\n    // Redact PHI from diff and metadata\n    const safeMetadata = redactPHI(event.metadata || {})\n    const safeDiff: Record<string, unknown> = {}\n\n    if (event.diff?.before) {\n      safeDiff.before = redactPHI(event.diff.before as Record<string, unknown>)\n    }\n    if (event.diff?.after) {\n      safeDiff.after = redactPHI(event.diff.after as Record<string, unknown>)\n    }\n    if (event.diff?.changes) {\n      safeDiff.changes = redactPHI(event.diff.changes as Record<string, unknown>)\n    }\n\n    // Prepare audit log entry\n    const auditEntry: Database['public']['Tables']['audit_log']['Insert'] = {\n      org_id: event.org_id || null,\n      actor_user_id: event.actor_user_id || null,\n      actor_role: event.actor_role || null,\n      source: event.source,\n      entity_type: event.entity_type,\n      entity_id: event.entity_id,\n      action: event.action,\n      diff: (safeDiff as Json) || {},\n      metadata: (safeMetadata as Json) || {},\n    }\n\n    // Insert audit log\n    const { data, error } = await supabase\n      .from('audit_log')\n      .insert(auditEntry)\n      .select('id')\n      .single()\n\n    if (error) {\n      console.error('[audit/log] Failed to insert audit event', {\n        error,\n        entity_type: event.entity_type,\n        entity_id: event.entity_id,\n        action: event.action,\n      })\n      return { success: false, error: error.message }\n    }\n\n    const duration = Date.now() - startTime\n    console.log('[audit/log] Audit event logged successfully', {\n      audit_id: data.id,\n      entity_type: event.entity_type,\n      entity_id: event.entity_id,\n      action: event.action,\n      duration_ms: duration,\n    })\n\n    return { success: true, audit_id: data.id }\n  } catch (err) {\n    console.error('[audit/log] Unexpected error logging audit event', err)\n    return {\n      success: false,\n      error: err instanceof Error ? err.message : 'Unknown error',\n    }\n  }\n}\n\n// ============================================================\n// Helper Functions for Common Audit Scenarios\n// ============================================================\n\n/**\n * Logs a report generation event\n */\nexport async function logReportGenerated(params: {\n  org_id?: string\n  actor_user_id?: string\n  actor_role?: UserRole\n  report_id: string\n  assessment_id: string\n  algorithm_version?: string\n  prompt_version?: string\n  report_version?: string\n  safety_score?: number\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'api',\n    entity_type: 'report',\n    entity_id: params.report_id,\n    action: 'generate',\n    metadata: {\n      assessment_id: params.assessment_id,\n      algorithm_version: params.algorithm_version,\n      prompt_version: params.prompt_version,\n      report_version: params.report_version,\n      safety_score: params.safety_score,\n    },\n  })\n}\n\n/**\n * Logs a report flagged event (safety findings)\n */\nexport async function logReportFlagged(params: {\n  org_id?: string\n  actor_user_id?: string\n  actor_role?: UserRole\n  report_id: string\n  safety_score?: number\n  finding_count?: number\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'system',\n    entity_type: 'report',\n    entity_id: params.report_id,\n    action: 'flag',\n    metadata: {\n      safety_score: params.safety_score,\n      finding_count: params.finding_count,\n    },\n  })\n}\n\n/**\n * Logs a report approval/rejection event\n */\nexport async function logReportReviewed(params: {\n  org_id?: string\n  actor_user_id: string\n  actor_role: UserRole\n  report_id: string\n  action: 'approve' | 'reject'\n  reason?: string\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'api',\n    entity_type: 'report',\n    entity_id: params.report_id,\n    action: params.action,\n    metadata: {\n      reason: params.reason,\n    },\n  })\n}\n\n/**\n * Logs a task lifecycle event\n */\nexport async function logTaskEvent(params: {\n  org_id?: string\n  actor_user_id?: string\n  actor_role?: UserRole\n  task_id: string\n  action: AuditAction\n  status_from?: string\n  status_to?: string\n  assigned_to_role?: UserRole\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'api',\n    entity_type: 'task',\n    entity_id: params.task_id,\n    action: params.action,\n    metadata: {\n      status_from: params.status_from,\n      status_to: params.status_to,\n      assigned_to_role: params.assigned_to_role,\n    },\n  })\n}\n\n/**\n * Logs a funnel activation/deactivation event\n */\nexport async function logFunnelConfigChange(params: {\n  org_id?: string\n  actor_user_id: string\n  actor_role: UserRole\n  funnel_id: string\n  action: 'activate' | 'deactivate'\n  is_active: boolean\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'admin-ui',\n    entity_type: 'funnel_catalog',\n    entity_id: params.funnel_id,\n    action: params.action,\n    diff: {\n      after: { is_active: params.is_active },\n    },\n  })\n}\n\n/**\n * Logs a funnel version rollout change\n */\nexport async function logFunnelVersionRollout(params: {\n  org_id?: string\n  actor_user_id: string\n  actor_role: UserRole\n  version_id: string\n  rollout_percent_from?: number\n  rollout_percent_to: number\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'admin-ui',\n    entity_type: 'funnel_version',\n    entity_id: params.version_id,\n    action: 'rollout',\n    diff: {\n      before: { rollout_percent: params.rollout_percent_from },\n      after: { rollout_percent: params.rollout_percent_to },\n    },\n  })\n}\n\n/**\n * Logs a consent record change\n */\nexport async function logConsentChange(params: {\n  org_id?: string\n  actor_user_id?: string\n  actor_role?: UserRole\n  consent_id: string\n  action: AuditAction\n  consent_type?: string\n  granted?: boolean\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'api',\n    entity_type: 'consent',\n    entity_id: params.consent_id,\n    action: params.action,\n    metadata: {\n      consent_type: params.consent_type,\n      granted: params.granted,\n    },\n  })\n}\n\n/**\n * Logs a support case creation event\n */\nexport async function logSupportCaseCreated(params: {\n  org_id?: string\n  actor_user_id?: string\n  actor_role?: UserRole\n  support_case_id: string\n  category?: string\n  priority?: string\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'api',\n    entity_type: 'support_case',\n    entity_id: params.support_case_id,\n    action: 'create',\n    metadata: {\n      // PHI-safe: NO patient_id, only category/priority metadata\n      has_notes: false,\n    },\n  })\n}\n\n/**\n * Logs a support case escalation event\n * This creates both an audit log entry and updates the support case\n */\nexport async function logSupportCaseEscalated(params: {\n  org_id?: string\n  actor_user_id: string\n  actor_role: UserRole\n  support_case_id: string\n  task_id: string\n  assigned_to_role: UserRole\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'api',\n    entity_type: 'support_case',\n    entity_id: params.support_case_id,\n    action: 'escalate',\n    metadata: {\n      task_id: params.task_id,\n      assigned_to_role: params.assigned_to_role,\n    },\n  })\n}\n\n/**\n * Logs a support case status update event\n */\nexport async function logSupportCaseStatusChanged(params: {\n  org_id?: string\n  actor_user_id: string\n  actor_role: UserRole\n  support_case_id: string\n  status_from: string\n  status_to: string\n  has_notes?: boolean\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'api',\n    entity_type: 'support_case',\n    entity_id: params.support_case_id,\n    action: 'update',\n    metadata: {\n      status_from: params.status_from,\n      status_to: params.status_to,\n      has_notes: params.has_notes ?? false,\n    },\n  })\n}\n\n// ============================================================\n// Account Lifecycle Events (V05-I10.2)\n// ============================================================\n\n/**\n * Logs an account deletion request event\n * User has requested to delete their account (GDPR Article 17)\n */\nexport async function logAccountDeletionRequest(params: {\n  org_id?: string\n  actor_user_id: string\n  actor_role: UserRole\n  account_id: string\n  deletion_reason?: string\n  scheduled_for?: string\n  retention_period_days?: number\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'api',\n    entity_type: 'account',\n    entity_id: params.account_id,\n    action: 'deletion_request',\n    metadata: {\n      deletion_reason: params.deletion_reason,\n      scheduled_for: params.scheduled_for,\n      retention_period_days: params.retention_period_days,\n    },\n  })\n}\n\n/**\n * Logs an account deletion cancellation event\n * User cancelled their deletion request during retention period\n */\nexport async function logAccountDeletionCancel(params: {\n  org_id?: string\n  actor_user_id: string\n  actor_role: UserRole\n  account_id: string\n  cancellation_reason?: string\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'api',\n    entity_type: 'account',\n    entity_id: params.account_id,\n    action: 'deletion_cancel',\n    metadata: {\n      reason: params.cancellation_reason,\n    },\n  })\n}\n\n/**\n * Logs an account deletion execution event\n * System or admin executed the account deletion\n */\nexport async function logAccountDeletionExecute(params: {\n  org_id?: string\n  actor_user_id?: string\n  actor_role?: UserRole\n  account_id: string\n  records_deleted?: number\n  records_anonymized?: number\n  executed_by?: string\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: params.executed_by === 'system' ? 'system' : 'admin-ui',\n    entity_type: 'account',\n    entity_id: params.account_id,\n    action: 'deletion_execute',\n    metadata: {\n      records_deleted: params.records_deleted,\n      records_anonymized: params.records_anonymized,\n      executed_by: params.executed_by,\n    },\n  })\n}\n\n/**\n * Logs an account anonymization event\n * Records were anonymized instead of deleted (retention requirements)\n */\nexport async function logAccountAnonymize(params: {\n  org_id?: string\n  actor_user_id?: string\n  actor_role?: UserRole\n  account_id: string\n  records_anonymized: number\n  anonymization_reason?: string\n}): Promise<AuditLogResult> {\n  return logAuditEvent({\n    org_id: params.org_id,\n    actor_user_id: params.actor_user_id,\n    actor_role: params.actor_role,\n    source: 'system',\n    entity_type: 'account',\n    entity_id: params.account_id,\n    action: 'anonymize',\n    metadata: {\n      records_anonymized: params.records_anonymized,\n      reason: params.anonymization_reason,\n    },\n  })\n}\n","\n'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport type { ContentPage } from '@/lib/types/content'\nimport type { ReportWithAssessment, KeyOutcomes } from '@/lib/db/queries/reports'\nimport { getResultPages, getInfoPages } from '@/lib/utils/contentPageHelpers'\nimport { useIsMobile } from '@/lib/hooks/useIsMobile'\nimport { LoadingSpinner, ErrorState } from '@/lib/ui'\nimport MobileHeader from '@/app/components/MobileHeader'\nimport ContentContainer from '@/app/components/layout/ContentContainer'\nimport {\n  ScoreCard,\n  InsightCardsGroup,\n  StressDistributionBar,\n  FollowUpActions,\n  AmyTextSection,\n  ReportLibrary,\n  KeyOutcomesCard,\n  WorkupStatusCard,\n  EscalationOfferCard,\n} from './components'\nimport { detectRedFlags } from '@/lib/escalation/detectRedFlags'\nimport { logEscalationOfferShown } from '@/lib/escalation/auditLog'\nimport type { EscalationOfferType } from '@/lib/types/escalation'\n\nconst GENERIC_ERROR = 'Fehler beim Laden der Ergebnisse.'\n\ntype WorkupStatus = 'needs_more_data' | 'ready_for_review' | null\n\ntype ResultClientProps = {\n  slug: string\n  assessmentId: string\n  reports: ReportWithAssessment[]\n  keyOutcomes: KeyOutcomes | null\n}\n\ntype AssessmentResult = {\n  id: string\n  funnel: string\n  completedAt: string\n  status: string\n  funnelTitle: string | null\n  workupStatus?: WorkupStatus\n  missingDataFields?: string[]\n  result?: {\n    kind: 'poc'\n    summaryTitle: string\n    summaryBullets: string[]\n    derived?: {\n      cardiovascularAgeYears?: number | null\n      riskBand?: 'low' | 'medium' | 'high' | 'unknown'\n    }\n    answersEcho?: { questionId: string; value: string | number | boolean }[]\n  }\n  nextActions?: { kind: string; label: string; status?: string }[]\n  report?: { id?: string | null; status: 'not_generated' | 'generated' }\n}\n\ntype ResultResponse = {\n  success: boolean\n  data?: AssessmentResult\n  error?: { message: string }\n}\n\nexport default function ResultClient({\n  slug,\n  assessmentId,\n  reports,\n  keyOutcomes,\n}: ResultClientProps) {\n  const router = useRouter()\n  const isMobile = useIsMobile()\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [assessment, setAssessment] = useState<AssessmentResult | null>(null)\n  const [contentPages, setContentPages] = useState<ContentPage[]>([])\n  const [contentUnavailable, setContentUnavailable] = useState(false)\n  \n  // E6.4.6: Red flag detection state\n  const [escalationData, setEscalationData] = useState<{\n    shouldEscalate: boolean\n    reasons: string[]\n    correlationId: string\n  } | null>(null)\n\n  const canonicalSlug = assessment?.funnel ?? slug\n  const funnelTitle = assessment?.funnelTitle ?? ''\n\n  useEffect(() => {\n    const loadResultData = async () => {\n      try {\n        setLoading(true)\n        setError(null)\n\n        const response = await fetch(\n          `/api/funnels/${slug}/assessments/${assessmentId}/result`,\n          { credentials: 'include' },\n        )\n\n        if (!response.ok) {\n          const payload = (await response.json().catch(() => null)) as ResultResponse | null\n          const message = payload?.error?.message || GENERIC_ERROR\n          throw new Error(message)\n        }\n\n        const payload = (await response.json()) as ResultResponse\n        if (!payload.success || !payload.data) {\n          throw new Error(payload.error?.message || GENERIC_ERROR)\n        }\n\n        if (payload.data.status !== 'completed') {\n          setAssessment(payload.data)\n          setLoading(false)\n          return\n        }\n\n        setAssessment(payload.data)\n        \n        // E6.4.6: Check for red flags\n        const redFlagCheck = detectRedFlags({\n          assessmentId: payload.data.id,\n          reportId: reports[0]?.id,\n          riskLevel: keyOutcomes?.risk_level || null,\n          workupStatus: payload.data.workupStatus || null,\n          missingDataFields: payload.data.missingDataFields || [],\n        })\n        \n        if (redFlagCheck.shouldEscalate) {\n          setEscalationData({\n            shouldEscalate: true,\n            reasons: redFlagCheck.redFlags.map((flag) => flag.reason),\n            correlationId: redFlagCheck.correlationId,\n          })\n          \n          // Log that escalation offer was shown\n          const highestFlag = redFlagCheck.redFlags[0]\n          if (highestFlag) {\n            await logEscalationOfferShown(\n              payload.data.id,\n              redFlagCheck.correlationId,\n              highestFlag.severity,\n              highestFlag.source\n            ).catch((err) => {\n              console.error('[escalation] Failed to log offer shown:', err)\n            })\n          }\n        }\n\n        try {\n          const pagesRes = await fetch(`/api/funnels/${payload.data.funnel}/content-pages`)\n          if (pagesRes.ok) {\n            const pages: ContentPage[] = await pagesRes.json()\n            setContentPages(pages)\n            setContentUnavailable(pages.length === 0)\n          } else {\n            setContentPages([])\n            setContentUnavailable(true)\n          }\n        } catch (err) {\n          console.error('Error loading content pages:', err)\n          setContentPages([])\n          setContentUnavailable(true)\n        }\n\n        setLoading(false)\n      } catch (err) {\n        console.error('Error loading result:', err)\n        setError(err instanceof Error ? err.message : GENERIC_ERROR)\n        setLoading(false)\n      }\n    }\n\n    loadResultData()\n  }, [assessmentId, slug, router])\n\n  if (loading) {\n    return (\n      <main className=\"flex items-center justify-center bg-muted py-20\">\n        <LoadingSpinner size=\"md\" text=\"Ergebnisse werden geladenâ€¦\" />\n      </main>\n    )\n  }\n\n  if (error || !assessment) {\n    return (\n      <main className=\"flex items-center justify-center bg-muted py-20 px-4\">\n        <ErrorState\n          title=\"Fehler\"\n          message={error || 'Ergebnisse konnten nicht geladen werden.'}\n          onRetry={() => router.push('/patient/dashboard')}\n          retryText=\"ZurÃ¼ck zum Dashboard\"\n        />\n      </main>\n    )\n  }\n\n  const resultPages = getResultPages(contentPages)\n  const infoPages = getInfoPages(contentPages)\n\n  // Sample insights - these would come from assessment analysis\n  const sampleInsights = [\n    {\n      icon: 'ðŸŽ¯',\n      title: 'Stresslevel erkannt',\n      description:\n        'Ihre Antworten zeigen ein moderates Stresslevel. Dies ist wichtig fÃ¼r das GesprÃ¤ch mit Ihrem Behandlungsteam.',\n      variant: 'info' as const,\n    },\n    {\n      icon: 'ðŸ’ª',\n      title: 'Resilienz-Faktoren',\n      description:\n        'Sie verfÃ¼gen Ã¼ber gute BewÃ¤ltigungsstrategien, die Ihnen helfen, mit Stress umzugehen.',\n      variant: 'success' as const,\n    },\n    {\n      icon: 'âš¡',\n      title: 'Achtsamkeitspunkte',\n      description:\n        'Einige Bereiche kÃ¶nnten von zusÃ¤tzlicher UnterstÃ¼tzung profitieren. Besprechen Sie diese beim nÃ¤chsten Termin.',\n      variant: 'warning' as const,\n    },\n  ]\n\n  // Sample follow-up actions - E6.4.4: Updated to include follow-up questions and escalation\n  const followUpActions = [\n    // E6.4.4: Follow-up questions CTA (only if needs more data)\n    ...(assessment.workupStatus === 'needs_more_data'\n      ? [\n          {\n            title: 'ZusÃ¤tzliche Fragen beantworten',\n            description:\n              'ErgÃ¤nzen Sie fehlende Informationen, um eine vollstÃ¤ndige Auswertung zu ermÃ¶glichen.',\n            actionLabel: 'Fragen beantworten',\n            onClick: () => router.push(`/patient/funnel/${canonicalSlug}`),\n          },\n        ]\n      : []),\n    {\n      title: 'Termin besprechen',\n      description:\n        'Ihre Ergebnisse werden von Ihrem Behandlungsteam eingesehen und beim nÃ¤chsten Termin besprochen.',\n    },\n    {\n      title: 'Ressourcen ansehen',\n      description:\n        'Entdecken Sie hilfreiche Artikel und Strategien zum Umgang mit Stress und zur StÃ¤rkung Ihrer Resilienz.',\n      ...(resultPages.length > 0 || infoPages.length > 0\n        ? {\n            actionLabel: 'Ressourcen ansehen',\n            actionUrl: `/patient/funnel/${canonicalSlug}/content/${\n              resultPages[0]?.slug || infoPages[0]?.slug\n            }`,\n          }\n        : {}),\n    },\n    {\n      title: 'Verlauf ansehen',\n      description:\n        'Verfolgen Sie Ihre Assessments Ã¼ber die Zeit und erkennen Sie Muster in Ihrer Historie.',\n      actionLabel: 'Zur Historie',\n      onClick: () => router.push('/patient/history'),\n    },\n    // E6.4.4: Escalation offer CTA (stub) - disabled until feature is available\n    // Note: Commenting out instead of using alert() for better UX\n    // {\n    //   title: 'RÃ¼ckfragen oder UnterstÃ¼tzung benÃ¶tigt?',\n    //   description:\n    //     'Wenn Sie Fragen haben oder zusÃ¤tzliche UnterstÃ¼tzung benÃ¶tigen, kÃ¶nnen Sie sich jederzeit an Ihr Behandlungsteam wenden.',\n    //   actionLabel: 'Support kontaktieren (demnÃ¤chst verfÃ¼gbar)',\n    // },\n  ]\n  \n  // E6.4.6: Handle escalation CTA click\n  const handleEscalationCtaClick = async (offerType: EscalationOfferType) => {\n    if (!assessment || !escalationData) return\n    \n    try {\n      // Log the click event\n      await fetch('/api/escalation/log-click', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          assessmentId: assessment.id,\n          correlationId: escalationData.correlationId,\n          offerType,\n        }),\n      }).catch((err) => {\n        console.error('[escalation] Failed to log CTA click:', err)\n      })\n      \n      // Navigate to placeholder page\n      router.push(\n        `/patient/escalation?type=${offerType}&correlation=${encodeURIComponent(escalationData.correlationId)}`\n      )\n    } catch (err) {\n      console.error('[escalation] Error handling CTA click:', err)\n    }\n  }\n\n  return (\n    <>\n      {/* Mobile Header - Only on Mobile */}\n      {isMobile && (\n        <MobileHeader\n          variant=\"with-title\"\n          title=\"Ergebnisse\"\n          subtitle={funnelTitle || 'Assessment'}\n          showBack={true}\n        />\n      )}\n      \n      <main className=\"min-h-screen bg-muted px-4 pt-8 sm:py-12\" style={{\n        paddingBottom: 'calc(6rem + env(safe-area-inset-bottom))',\n      }}>\n        <ContentContainer className=\"space-y-6\">\n        {/* Success Header */}\n        <div className=\"text-center\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-full mb-4\"\n            style={{ backgroundColor: 'var(--color-success-light)' }}\n          >\n            <span className=\"text-3xl sm:text-4xl\">âœ“</span>\n          </div>\n          <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold mb-2\"\n            style={{ color: 'var(--foreground)' }}\n          >\n            Assessment abgeschlossen!\n          </h1>\n          <p className=\"text-base sm:text-lg\" style={{ color: 'var(--color-neutral-600)' }}>\n            {funnelTitle || 'Ihr Assessment'} wurde erfolgreich gespeichert\n          </p>\n          {assessment.completedAt && !Number.isNaN(Date.parse(assessment.completedAt)) && (\n            <p className=\"text-sm mt-2\" style={{ color: 'var(--color-neutral-500)' }}>\n              {new Intl.DateTimeFormat('de-DE', {\n                dateStyle: 'medium',\n                timeStyle: 'short',\n              }).format(new Date(assessment.completedAt))}\n            </p>\n          )}\n        </div>\n\n        {/* E6.4.6: Escalation Offer Card - Show at top if red flags detected */}\n        {escalationData?.shouldEscalate && (\n          <EscalationOfferCard\n            reasons={escalationData.reasons}\n            correlationId={escalationData.correlationId}\n            onCtaClick={handleEscalationCtaClick}\n          />\n        )}\n\n        {/* E6.4.4: Workup Status Card - Shows status and missing data */}\n        <WorkupStatusCard\n          status={assessment.workupStatus || null}\n          missingDataFields={assessment.missingDataFields || []}\n        />\n\n        {/* POC Result Summary */}\n        <div className=\"bg-white border border-slate-200 rounded-xl p-6 shadow-sm\">\n          <div className=\"flex items-start gap-3\">\n            <span className=\"text-2xl flex-shrink-0\">ðŸ§¾</span>\n            <div className=\"flex-1\">\n              <h3 className=\"text-lg sm:text-xl font-bold text-slate-900 mb-2\">\n                {assessment.result?.summaryTitle || 'Ergebnis wird vorbereitet'}\n              </h3>\n              <ul className=\"text-sm sm:text-base text-slate-600 space-y-1 list-disc pl-5\">\n                {(assessment.result?.summaryBullets?.length\n                  ? assessment.result.summaryBullets\n                  : [\n                      'Ihre Antworten wurden gespeichert.',\n                      'Die Auswertung ist in Vorbereitung.',\n                      'Bitte prÃ¼fen Sie spÃ¤ter erneut.',\n                    ]\n                ).map((bullet, index) => (\n                  <li key={index}>{bullet}</li>\n                ))}\n              </ul>\n              {assessment.result?.derived?.cardiovascularAgeYears !== undefined && (\n                <p className=\"text-sm text-slate-500 mt-3\">\n                  Erfasste Altersangabe: {assessment.result.derived.cardiovascularAgeYears ?? 'â€”'}\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Key Outcomes - Show real data if available */}\n        <KeyOutcomesCard outcomes={keyOutcomes} />\n\n        {/* Report Library */}\n        <ReportLibrary reports={reports} />\n\n        {/* Score Card - Only if we have outcome data - E6.4.4: Keep for non-diagnostic metrics */}\n        {keyOutcomes && keyOutcomes.score_numeric !== null && (\n          <ScoreCard\n            score={keyOutcomes.score_numeric}\n            maxScore={100}\n            level={\n              keyOutcomes.risk_level === 'low'\n                ? 'low'\n                : keyOutcomes.risk_level === 'high'\n                  ? 'high'\n                  : 'medium'\n            }\n            label=\"Stress-Level\"\n            description=\"Ihre Gesamtbewertung\"\n          />\n        )}\n\n        {/* AMY Text Section - E6.4.4: Updated to focus on next steps, not diagnoses */}\n        <AmyTextSection\n          text={`## Vielen Dank fÃ¼r Ihre Teilnahme\n\nIhre Antworten sind nun gesichert und werden fÃ¼r die weitere Betreuung verwendet.\n\n### Ihre nÃ¤chsten Schritte\n\n${\n  assessment.workupStatus === 'needs_more_data'\n    ? `Es werden noch einige zusÃ¤tzliche Informationen benÃ¶tigt, um eine vollstÃ¤ndige Auswertung zu ermÃ¶glichen. Bitte beantworten Sie die fehlenden Fragen Ã¼ber die SchaltflÃ¤che \"ZusÃ¤tzliche Fragen beantworten\" in den nÃ¤chsten Schritten.\n\n`\n    : ''\n}Ihre Angaben helfen Ihrem Behandlungsteam dabei, ein besseres VerstÃ¤ndnis Ihrer aktuellen Situation zu entwickeln. Die Ergebnisse werden vertraulich behandelt und nur mit autorisiertem medizinischem Personal geteilt.\n\n### Wie geht es weiter?\n\nBei Ihrem nÃ¤chsten Termin kÃ¶nnen die Ergebnisse gemeinsam besprochen werden. Ihr Behandlungsteam wird Sie Ã¼ber weitere Schritte informieren.`}\n          title=\"Ihre Zusammenfassung\"\n          icon=\"ðŸ¤–\"\n        />\n\n        {/* Insight Cards - E6.4.4: Removed to avoid showing diagnostic content */}\n        {/* Sample insights removed per AC1: Patient should not see diagnoses/differentials in v0.6 */}\n\n        {/* Stress Distribution Bar - E6.4.4: Keep as non-diagnostic visual */}\n        <StressDistributionBar />\n\n        {/* Follow-Up Actions - What's Next */}\n        <FollowUpActions actions={followUpActions} />\n\n        {/* Additional Resources */}\n        {(resultPages.length > 0 || infoPages.length > 0) && (\n          <div className=\"bg-white border border-slate-200 rounded-xl p-6 shadow-sm\">\n            <div className=\"flex items-start gap-3\">\n              <span className=\"text-2xl flex-shrink-0\">ðŸ“š</span>\n              <div className=\"flex-1\">\n                <h3 className=\"text-lg sm:text-xl font-bold text-slate-900 mb-2\">\n                  Weitere Ressourcen\n                </h3>\n                <p className=\"text-sm sm:text-base text-slate-600 mb-4\">\n                  Erfahren Sie mehr Ã¼ber Stress, Resilienz und praktische Strategien:\n                </p>\n                <div className=\"grid gap-2\">\n                  {resultPages.map((page) => (\n                    <a\n                      key={page.id}\n                      href={`/patient/funnel/${canonicalSlug}/content/${page.slug}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"flex items-center gap-2 text-sm sm:text-base text-sky-700 hover:text-sky-900 hover:underline font-medium p-2 hover:bg-sky-50 rounded transition-colors\"\n                    >\n                      <span>ðŸ“„</span>\n                      <span>{page.title}</span>\n                    </a>\n                  ))}\n                  {infoPages.map((page) => (\n                    <a\n                      key={page.id}\n                      href={`/patient/funnel/${canonicalSlug}/content/${page.slug}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"flex items-center gap-2 text-sm sm:text-base text-sky-700 hover:text-sky-900 hover:underline font-medium p-2 hover:bg-sky-50 rounded transition-colors\"\n                    >\n                      <span>ðŸ“„</span>\n                      <span>{page.title}</span>\n                    </a>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Content missing (non-error state) */}\n        {contentUnavailable && resultPages.length === 0 && infoPages.length === 0 && (\n          <div className=\"bg-white border border-slate-200 rounded-xl p-6 shadow-sm\">\n            <div className=\"flex items-start gap-3\">\n              <span className=\"text-2xl flex-shrink-0\">ðŸ“š</span>\n              <div className=\"flex-1\">\n                <h3 className=\"text-lg sm:text-xl font-bold text-slate-900 mb-2\">\n                  Inhalte noch nicht verfÃ¼gbar\n                </h3>\n                <p className=\"text-sm sm:text-base text-slate-600\">\n                  FÃ¼r dieses Assessment sind aktuell noch keine zusÃ¤tzlichen Inhalte hinterlegt.\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Action Buttons */}\n        <div className=\"flex flex-col sm:flex-row gap-3 pt-4\">\n          <button\n            onClick={() => router.push('/patient/dashboard?refresh=funnel')}\n            className=\"w-full sm:flex-1 px-6 py-4 bg-sky-600 text-white rounded-xl text-base font-semibold hover:bg-sky-700 active:bg-sky-800 transition-colors shadow-md\"\n            style={{ minHeight: '56px' }}\n          >\n            Zum Dashboard\n          </button>\n          <button\n            onClick={() => router.push('/patient/history')}\n            className=\"w-full sm:flex-1 px-6 py-4 bg-slate-200 text-slate-700 rounded-xl text-base font-semibold hover:bg-slate-300 active:bg-slate-400 transition-colors\"\n            style={{ minHeight: '56px' }}\n          >\n            Meine Assessments\n          </button>\n        </div>\n\n        {/* Privacy Notice */}\n        <div className=\"bg-white border border-slate-200 rounded-xl p-5 shadow-sm\">\n          <div className=\"flex items-start gap-3\">\n            <span className=\"text-2xl flex-shrink-0\">ðŸ”’</span>\n            <div className=\"flex-1\">\n              <h3 className=\"text-base sm:text-lg font-bold text-slate-900 mb-2\">\n                Ihre Daten sind sicher\n              </h3>\n              <p className=\"text-sm sm:text-base text-slate-600\">\n                Alle Ihre Antworten wurden verschlÃ¼sselt gespeichert und unterliegen strengen\n                Datenschutzrichtlinien. Nur autorisiertes medizinisches Personal hat Zugriff auf\n                Ihre Daten.\n              </p>\n            </div>\n          </div>\n        </div>\n        </ContentContainer>\n    </main>\n    </>\n  )\n}\n","/**\n * E6.4.6: Escalation Audit Logging\n *\n * Audit logging for escalation events (no PHI, correlation IDs only)\n */\n\nimport { logAuditEvent } from '@/lib/audit/log'\nimport { AUDIT_ACTION, AUDIT_ENTITY_TYPE, AUDIT_SOURCE } from '@/lib/contracts/registry'\nimport type { EscalationOfferType, RedFlagSeverity, RedFlagSource } from '@/lib/types/escalation'\n\n/**\n * Log escalation offer shown to patient\n *\n * @param assessmentId - Assessment ID (entity)\n * @param correlationId - Correlation ID for tracking\n * @param severity - Red flag severity\n * @param source - Red flag source\n */\nexport async function logEscalationOfferShown(\n  assessmentId: string,\n  correlationId: string,\n  severity: RedFlagSeverity,\n  source: RedFlagSource,\n) {\n  return await logAuditEvent({\n    entity_type: AUDIT_ENTITY_TYPE.ASSESSMENT,\n    entity_id: assessmentId,\n    action: AUDIT_ACTION.FLAG,\n    source: AUDIT_SOURCE.SYSTEM,\n    metadata: {\n      correlation_id: correlationId,\n      red_flag_severity: severity,\n      red_flag_source: source,\n    },\n  })\n}\n\n/**\n * Log escalation CTA clicked by patient\n *\n * @param assessmentId - Assessment ID (entity)\n * @param userId - User ID (actor)\n * @param correlationId - Correlation ID for tracking\n * @param offerType - Type of escalation offer clicked\n */\nexport async function logEscalationCtaClicked(\n  assessmentId: string,\n  userId: string,\n  correlationId: string,\n  offerType: EscalationOfferType,\n) {\n  return await logAuditEvent({\n    entity_type: AUDIT_ENTITY_TYPE.ASSESSMENT,\n    entity_id: assessmentId,\n    action: AUDIT_ACTION.ESCALATE,\n    source: AUDIT_SOURCE.API,\n    actor_user_id: userId,\n    metadata: {\n      correlation_id: correlationId,\n      offer_type: offerType,\n    },\n  })\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M11 2v2', key: '1539x4' }],\n  ['path', { d: 'M5 2v2', key: '1yf1q8' }],\n  ['path', { d: 'M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1', key: 'rb5t3r' }],\n  ['path', { d: 'M8 15a6 6 0 0 0 12 0v-3', key: 'x18d4x' }],\n  ['circle', { cx: '20', cy: '10', r: '2', key: 'ts1r5v' }],\n];\n\n/**\n * @component @name Stethoscope\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEgMnYyIiAvPgogIDxwYXRoIGQ9Ik01IDJ2MiIgLz4KICA8cGF0aCBkPSJNNSAzSDRhMiAyIDAgMCAwLTIgMnY0YTYgNiAwIDAgMCAxMiAwVjVhMiAyIDAgMCAwLTItMmgtMSIgLz4KICA8cGF0aCBkPSJNOCAxNWE2IDYgMCAwIDAgMTIgMHYtMyIgLz4KICA8Y2lyY2xlIGN4PSIyMCIgY3k9IjEwIiByPSIyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/stethoscope\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Stethoscope = createLucideIcon('stethoscope', __iconNode);\n\nexport default Stethoscope;\n","/**\n * E6.4.6: Red Flag Detection\n *\n * Deterministic rule-based detection of red flags requiring escalation.\n * NO DIAGNOSIS - this checks for safety/emergency indicators only.\n */\n\nimport { generateCorrelationId as generateBaseCorrelationId } from '@/lib/telemetry/correlationId'\nimport type {\n  RedFlag,\n  EscalationCheckResult,\n  RedFlagSeverity,\n} from '@/lib/types/escalation'\n\n/**\n * Input data for red flag detection\n */\nexport type RedFlagCheckInput = {\n  assessmentId: string\n  reportId?: string\n  riskLevel?: 'low' | 'moderate' | 'high' | null\n  workupStatus?: 'needs_more_data' | 'ready_for_review' | null\n  missingDataFields?: string[]\n}\n\n/**\n * Check for red flags in assessment/report data\n *\n * Detection rules:\n * 1. Report risk_level = 'high' â†’ CRITICAL red flag\n * 2. Future: specific answer patterns indicating crisis\n * 3. Future: workup flags for urgent follow-up\n *\n * @param input - Assessment and report data to check\n * @returns EscalationCheckResult with detected red flags\n */\nexport function detectRedFlags(input: RedFlagCheckInput): EscalationCheckResult {\n  const redFlags: RedFlag[] = []\n  const correlationId = generateCorrelationId()\n\n  // Rule 1: High risk level from report\n  if (input.riskLevel === 'high') {\n    redFlags.push({\n      severity: 'critical',\n      source: 'report_risk_level',\n      reason: 'Hohes Stressniveau erkannt â€“ Ã¤rztliche RÃ¼cksprache empfohlen',\n      triggeredBy: input.reportId ? [input.reportId] : undefined,\n    })\n  }\n\n  // Rule 2: Future - Answer pattern detection\n  // Example: Specific questions about suicidal ideation, severe symptoms\n  // Not implemented in v0.6 stub\n\n  // Rule 3: Future - Workup-based flags\n  // Example: Critical data missing that indicates urgent care need\n  // Not implemented in v0.6 stub\n\n  return {\n    shouldEscalate: redFlags.length > 0,\n    redFlags,\n    correlationId,\n  }\n}\n\n/**\n * Generate a correlation ID for tracking escalation events\n * Uses crypto.randomUUID() for security\n */\nfunction generateCorrelationId(): string {\n  return `esc-${generateBaseCorrelationId()}`\n}\n\n/**\n * Get the highest severity from a list of red flags\n */\nexport function getHighestSeverity(redFlags: RedFlag[]): RedFlagSeverity | null {\n  if (redFlags.length === 0) return null\n\n  const hasCritical = redFlags.some((flag) => flag.severity === 'critical')\n  return hasCritical ? 'critical' : 'high'\n}\n\n/**\n * Format red flags for display (German)\n */\nexport function formatRedFlagReasons(redFlags: RedFlag[]): string[] {\n  return redFlags.map((flag) => flag.reason)\n}\n"],"names":[],"mappings":"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","ignoreList":[13]}