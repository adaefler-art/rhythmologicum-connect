module.exports=[23174,a=>{a.n(a.i(6429))},4344,a=>{a.n(a.i(92184))},69572,a=>{a.n(a.i(70457))},91050,a=>{a.n(a.i(13800))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},68297,a=>{a.n(a.i(10871))},19349,a=>{a.n(a.i(21496))},38650,a=>{a.n(a.i(5617))},77598,a=>{"use strict";let b={STRESS_ASSESSMENT:"stress-assessment",CARDIOVASCULAR_AGE:"cardiovascular-age",SLEEP_QUALITY:"sleep-quality",HEART_HEALTH_NUTRITION:"heart-health-nutrition",STRESS:"stress",STRESS_CHECK:"stress-check",STRESS_CHECK_V2:"stress-check-v2"},c={stress:b.STRESS_ASSESSMENT,"stress-check":b.STRESS_ASSESSMENT,"stress-check-v2":b.STRESS_ASSESSMENT};function d(a){let b=a.toLowerCase().trim();return c[b]||b}function e(a){let c=d(a);return Object.values(b).includes(c)}a.s(["AUDIT_ACTION",0,{CREATE:"create",UPDATE:"update",DELETE:"delete",APPROVE:"approve",REJECT:"reject",REQUEST_CHANGES:"request_changes",GENERATE:"generate",FLAG:"flag",ASSIGN:"assign",ACTIVATE:"activate",DEACTIVATE:"deactivate",ROLLOUT:"rollout",COMPLETE:"complete",ESCALATE:"escalate",DELETION_REQUEST:"deletion_request",DELETION_CANCEL:"deletion_cancel",DELETION_EXECUTE:"deletion_execute",ANONYMIZE:"anonymize"},"AUDIT_ENTITY_TYPE",0,{ASSESSMENT:"assessment",REPORT:"report",TASK:"task",FUNNEL_VERSION:"funnel_version",FUNNEL_CATALOG:"funnel_catalog",CONFIG:"config",CONSENT:"consent",ORGANIZATION:"organization",USER_ORG_MEMBERSHIP:"user_org_membership",CLINICIAN_ASSIGNMENT:"clinician_assignment",DOCUMENT:"document",PROCESSING_JOB:"processing_job",REVIEW_RECORD:"review_record",PRE_SCREENING_CALL:"pre_screening_call",DEVICE_SHIPMENT:"device_shipment",SUPPORT_CASE:"support_case",ACCOUNT:"account"},"AUDIT_SOURCE",0,{API:"api",JOB:"job",ADMIN_UI:"admin-ui",SYSTEM:"system"},"FUNNEL_SLUG_ALIASES",0,c,"PATIENT_SEX",0,{MALE:"male",FEMALE:"female",OTHER:"other",PREFER_NOT_TO_SAY:"prefer_not_to_say"},"QUESTION_TYPE",0,{RADIO:"radio",CHECKBOX:"checkbox",TEXT:"text",TEXTAREA:"textarea",NUMBER:"number",SCALE:"scale",SLIDER:"slider"},"getCanonicalFunnelSlug",()=>d,"isKnownFunnelSlug",()=>e])},65616,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/apps/rhythm-patient-ui/app/patient/funnel/[slug]/result/client.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/rhythm-patient-ui/app/patient/funnel/[slug]/result/client.tsx <module evaluation>","default")},33709,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/apps/rhythm-patient-ui/app/patient/funnel/[slug]/result/client.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/rhythm-patient-ui/app/patient/funnel/[slug]/result/client.tsx","default")},43245,a=>{"use strict";a.i(65616);var b=a.i(33709);a.n(b)},56341,a=>{"use strict";var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(91896),e=a.i(45259),f=a.i(77598);async function g(a){try{let b=await (0,d.createServerSupabaseClient)(),{data:c,error:e}=await b.from("reports").select(`
        id,
        assessment_id,
        score_numeric,
        sleep_score,
        risk_level,
        report_text_short,
        created_at,
        updated_at,
        assessment:assessments!assessment_id (
          id,
          funnel,
          completed_at
        )
      `).eq("assessment_id",a).order("created_at",{ascending:!1}).order("id",{ascending:!1});if(e)return console.error("Error fetching reports for assessment:",{assessmentId:a,errorMessage:e.message}),{data:null,error:Error(e.message)};return{data:c,error:null}}catch(b){return console.error("Unexpected error fetching reports:",{assessmentId:a}),{data:null,error:b instanceof Error?b:Error("Unknown error")}}}async function h(a){try{let{data:b,error:c}=await g(a);if(c||!b||0===b.length)return{data:{score_numeric:null,sleep_score:null,risk_level:null,total_reports:0},error:c};let d=b[0];return{data:{score_numeric:d.score_numeric,sleep_score:d.sleep_score,risk_level:d.risk_level,total_reports:b.length},error:null}}catch(b){return console.error("Unexpected error getting key outcomes:",{assessmentId:a}),{data:null,error:b instanceof Error?b:Error("Unknown error")}}}a.i(143);var i=a.i(43245);async function j({params:a,searchParams:j}){let k,l,m,{slug:n}=await a,o=(await j).assessmentId;o||(0,c.redirect)(`/patient/funnel/${n}?error=missing_assessment_id`);let p=await (0,d.createServerSupabaseClient)(),{data:{user:q}}=await p.auth.getUser();q||(0,c.redirect)("/");let r=`/patient/funnel/${n}/result`,s=await (0,e.enforceDashboardFirst)(r);s&&(0,c.redirect)(s);let{data:t}=await p.from("patient_profiles").select("id").eq("user_id",q.id).single();t||(0,c.redirect)("/");let u=(k=n.toLowerCase().trim(),l=(0,f.getCanonicalFunnelSlug)(k),m=Object.entries(f.FUNNEL_SLUG_ALIASES).filter(([,a])=>a===l).map(([a])=>a),Array.from(new Set([k,l,...m]))),{data:v}=await p.from("assessments").select("id, patient_id, funnel, status, completed_at").eq("id",o).in("funnel",u).single();v&&v.patient_id===t.id||(0,c.redirect)(`/patient/funnel/${n}?error=invalid_assessment`);let{data:w}=await g(o),{data:x}=await h(o);return(0,b.jsx)(i.default,{slug:n,assessmentId:o,reports:w||[],keyOutcomes:x})}a.s(["default",()=>j],56341)}];

//# sourceMappingURL=_2ecfaec2._.js.map