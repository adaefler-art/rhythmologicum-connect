(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3308,e=>{"use strict";e.s(["AUDIT_ACTION",0,{CREATE:"create",UPDATE:"update",DELETE:"delete",APPROVE:"approve",REJECT:"reject",REQUEST_CHANGES:"request_changes",GENERATE:"generate",FLAG:"flag",ASSIGN:"assign",ACTIVATE:"activate",DEACTIVATE:"deactivate",ROLLOUT:"rollout",COMPLETE:"complete",ESCALATE:"escalate",DELETION_REQUEST:"deletion_request",DELETION_CANCEL:"deletion_cancel",DELETION_EXECUTE:"deletion_execute",ANONYMIZE:"anonymize"},"AUDIT_ENTITY_TYPE",0,{ASSESSMENT:"assessment",REPORT:"report",TASK:"task",FUNNEL_VERSION:"funnel_version",FUNNEL_CATALOG:"funnel_catalog",CONFIG:"config",CONSENT:"consent",ORGANIZATION:"organization",USER_ORG_MEMBERSHIP:"user_org_membership",CLINICIAN_ASSIGNMENT:"clinician_assignment",DOCUMENT:"document",PROCESSING_JOB:"processing_job",REVIEW_RECORD:"review_record",PRE_SCREENING_CALL:"pre_screening_call",DEVICE_SHIPMENT:"device_shipment",SUPPORT_CASE:"support_case",ACCOUNT:"account"},"AUDIT_SOURCE",0,{API:"api",JOB:"job",ADMIN_UI:"admin-ui",SYSTEM:"system"},"NODE_TYPE",0,{QUESTION_STEP:"question_step",FORM:"form",INFO_STEP:"info_step",INFO:"info",CONTENT_PAGE:"content_page",SUMMARY:"summary",OTHER:"other"},"PATIENT_SEX",0,{MALE:"male",FEMALE:"female",OTHER:"other",PREFER_NOT_TO_SAY:"prefer_not_to_say"},"PILLAR_KEY",0,{NUTRITION:"nutrition",MOVEMENT:"movement",SLEEP:"sleep",MENTAL_HEALTH:"mental-health",SOCIAL:"social",MEANING:"meaning",PREVENTION:"prevention"},"QUESTION_TYPE",0,{RADIO:"radio",CHECKBOX:"checkbox",TEXT:"text",TEXTAREA:"textarea",NUMBER:"number",SCALE:"scale",SLIDER:"slider"}])},95187,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return l.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=e.r(32120),n=e.r(92245),i=e.r(35326)},93337,e=>{"use strict";var t=e.i(18050),r=e.i(71645),a=e.i(18566),s=e.i(95187);let l=(0,s.createServerReference)("402ef5f2d5a426118554d6877a28510036b982f22b",s.callServer,void 0,s.findSourceMapURL,"saveBaselineProfile"),n=(0,s.createServerReference)("006275a56515d43b3044afdff8181f10627efcc3d4",s.callServer,void 0,s.findSourceMapURL,"getBaselineProfile"),i=(0,s.createServerReference)("009c913e0aa088dff01f2444bc7901c308af146f0a",s.callServer,void 0,s.findSourceMapURL,"hasUserConsented");var d=e.i(3308);function o(){let e=(0,a.useRouter)(),[s,o]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[E,m]=(0,r.useState)(""),[f,b]=(0,r.useState)(!1),[x,h]=(0,r.useState)(!0),[N,T]=(0,r.useState)(null);(0,r.useEffect)(()=>{!async function(){let t=await i();if(!t.success||!t.data)return e.push("/patient/onboarding/consent");let r=await n();if(r.success&&r.data){let e=r.data;o(e.full_name||""),u(e.birth_year?String(e.birth_year):""),m(e.sex||"")}h(!1)}()},[e]);let p=async t=>{if(t.preventDefault(),!s.trim())return void T("Bitte geben Sie Ihren Namen ein.");b(!0),T(null);try{let t=await l({full_name:s.trim(),birth_year:c?parseInt(c,10):null,sex:E||null});t.success?e.push("/patient/dashboard"):T(t.error||"Fehler beim Speichern des Profils")}catch(e){T("Ein unerwarteter Fehler ist aufgetreten"),console.error("Profile submission error:",e)}finally{b(!1)}};return x?(0,t.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,t.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Lädt..."})}):(0,t.jsxs)("div",{className:"w-full bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Basisprofil erstellen"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Bitte geben Sie einige grundlegende Informationen an. Diese Daten helfen uns, Ihre Assessments besser zu verstehen."}),(0,t.jsxs)("form",{onSubmit:p,className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:["Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"fullName",value:s,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-sky-500 focus:border-sky-500",placeholder:"Ihr vollständiger Name",disabled:f,required:!0,maxLength:200})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"birthYear",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Geburtsjahr (optional)"}),(0,t.jsx)("input",{type:"number",id:"birthYear",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-sky-500 focus:border-sky-500",placeholder:"z.B. 1990",disabled:f,min:1900,max:new Date().getFullYear()}),(0,t.jsx)("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Diese Information ist optional und wird nur für statistische Zwecke verwendet."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"sex",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Geschlecht (optional)"}),(0,t.jsxs)("select",{id:"sex",value:E,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-sky-500 focus:border-sky-500",disabled:f,children:[(0,t.jsx)("option",{value:"",children:"Bitte wählen"}),(0,t.jsx)("option",{value:d.PATIENT_SEX.MALE,children:"Männlich"}),(0,t.jsx)("option",{value:d.PATIENT_SEX.FEMALE,children:"Weiblich"}),(0,t.jsx)("option",{value:d.PATIENT_SEX.OTHER,children:"Divers"}),(0,t.jsx)("option",{value:d.PATIENT_SEX.PREFER_NOT_TO_SAY,children:"Keine Angabe"})]})]}),N&&(0,t.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:(0,t.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:N})}),(0,t.jsx)("div",{className:"flex gap-3 pt-2",children:(0,t.jsx)("button",{type:"submit",disabled:f,className:"px-6 py-2.5 bg-sky-600 hover:bg-sky-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200",children:f?"Wird gespeichert...":"Profil speichern"})})]}),(0,t.jsxs)("p",{className:"mt-6 text-xs text-slate-500 dark:text-slate-400",children:[(0,t.jsx)("span",{className:"text-red-500",children:"*"})," Pflichtfeld"]})]})}e.s(["ProfileClient",()=>o],93337)}]);

//# sourceMappingURL=d1e2803a9f25e696.js.map