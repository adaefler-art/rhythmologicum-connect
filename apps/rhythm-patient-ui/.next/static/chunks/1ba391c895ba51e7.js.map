{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","turbopack:///[project]/apps/rhythm-patient-ui/app/patient/documents/[id]/confirm/client.tsx","turbopack:///[project]/lib/actions/data:058599 <text/javascript>","turbopack:///[project]/lib/types/extraction.ts"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","/**\n * Document Confirmation Client Component (V05-I04.3)\n * \n * Interactive UI for reviewing and confirming extracted document data\n */\n\n'use client'\n\nimport { useState, useCallback } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { saveDocumentConfirmation } from '@/lib/actions/confirmations'\nimport {\n  type ExtractedData,\n  type ConfidenceMetadata,\n  type ConfirmationData,\n  type FieldConfirmation,\n  FIELD_STATUS,\n  isLowConfidence,\n} from '@/lib/types/extraction'\n\ntype Props = {\n  documentId: string\n  initialData: {\n    id: string\n    extracted_data: ExtractedData\n    confidence: ConfidenceMetadata\n    confirmed_data: ConfirmationData | null\n    confirmed_at: string | null\n  }\n}\n\nexport default function ConfirmationClient({ documentId, initialData }: Props) {\n  const router = useRouter()\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Initialize confirmation state from existing confirmations or create new\n  const [confirmations, setConfirmations] = useState<Record<string, FieldConfirmation>>(() => {\n    if (initialData.confirmed_data?.field_confirmations) {\n      return initialData.confirmed_data.field_confirmations\n    }\n    return {}\n  })\n\n  // Initialize confirmed values from existing or use extracted\n  const [confirmedData, setConfirmedData] = useState<ExtractedData>(() => {\n    if (initialData.confirmed_data) {\n      return {\n        lab_values: initialData.confirmed_data.lab_values,\n        medications: initialData.confirmed_data.medications,\n        vital_signs: initialData.confirmed_data.vital_signs,\n        diagnoses: initialData.confirmed_data.diagnoses,\n        notes: initialData.confirmed_data.notes,\n      }\n    }\n    return initialData.extracted_data\n  })\n\n  const handleFieldAccept = useCallback(\n    (fieldKey: string, value: any) => {\n      setConfirmations(prev => ({\n        ...prev,\n        [fieldKey]: {\n          status: FIELD_STATUS.ACCEPTED,\n          original_value: value,\n          confirmed_value: value,\n          confirmed_at: new Date().toISOString(),\n        },\n      }))\n    },\n    [],\n  )\n\n  const handleFieldEdit = useCallback(\n    (fieldKey: string, originalValue: any, newValue: any) => {\n      setConfirmations(prev => ({\n        ...prev,\n        [fieldKey]: {\n          status: FIELD_STATUS.EDITED,\n          original_value: originalValue,\n          confirmed_value: newValue,\n          confirmed_at: new Date().toISOString(),\n        },\n      }))\n    },\n    [],\n  )\n\n  const handleFieldReject = useCallback((fieldKey: string, value: any) => {\n    setConfirmations(prev => ({\n      ...prev,\n      [fieldKey]: {\n        status: FIELD_STATUS.REJECTED,\n        original_value: value,\n        confirmed_at: new Date().toISOString(),\n      },\n    }))\n  }, [])\n\n  const handleAcceptAll = useCallback(() => {\n    const newConfirmations: Record<string, FieldConfirmation> = {}\n\n    // Accept all lab values\n    initialData.extracted_data.lab_values?.forEach((labValue, idx) => {\n      const key = `lab_values[${idx}]`\n      newConfirmations[key] = {\n        status: FIELD_STATUS.ACCEPTED,\n        original_value: labValue,\n        confirmed_value: labValue,\n        confirmed_at: new Date().toISOString(),\n      }\n    })\n\n    // Accept all medications\n    initialData.extracted_data.medications?.forEach((med, idx) => {\n      const key = `medications[${idx}]`\n      newConfirmations[key] = {\n        status: FIELD_STATUS.ACCEPTED,\n        original_value: med,\n        confirmed_value: med,\n        confirmed_at: new Date().toISOString(),\n      }\n    })\n\n    // Accept all vital signs - sort keys for deterministic ordering\n    if (initialData.extracted_data.vital_signs) {\n      Object.entries(initialData.extracted_data.vital_signs)\n        .sort(([a], [b]) => a.localeCompare(b))\n        .forEach(([vitalKey, value]) => {\n          const key = `vital_signs.${vitalKey}`\n          newConfirmations[key] = {\n            status: FIELD_STATUS.ACCEPTED,\n            original_value: value,\n            confirmed_value: value,\n            confirmed_at: new Date().toISOString(),\n          }\n        })\n    }\n\n    // Accept all diagnoses\n    initialData.extracted_data.diagnoses?.forEach((diagnosis, idx) => {\n      const key = `diagnoses[${idx}]`\n      newConfirmations[key] = {\n        status: FIELD_STATUS.ACCEPTED,\n        original_value: diagnosis,\n        confirmed_value: diagnosis,\n        confirmed_at: new Date().toISOString(),\n      }\n    })\n\n    // Accept notes\n    if (initialData.extracted_data.notes) {\n      newConfirmations['notes'] = {\n        status: FIELD_STATUS.ACCEPTED,\n        original_value: initialData.extracted_data.notes,\n        confirmed_value: initialData.extracted_data.notes,\n        confirmed_at: new Date().toISOString(),\n      }\n    }\n\n    setConfirmations(newConfirmations)\n  }, [initialData.extracted_data])\n\n  const handleSave = useCallback(async () => {\n    setSaving(true)\n    setError(null)\n\n    try {\n      const result = await saveDocumentConfirmation({\n        document_id: documentId,\n        confirmed_data: {\n          ...confirmedData,\n          field_confirmations: confirmations,\n        },\n      })\n\n      if (!result.success) {\n        setError(result.error?.message || 'Failed to save confirmation')\n        setSaving(false)\n        return\n      }\n\n      // Success - redirect to patient home or show success message\n      router.push('/patient?confirmation=success')\n    } catch (err) {\n      setError('An unexpected error occurred')\n      setSaving(false)\n    }\n  }, [documentId, confirmedData, confirmations, router])\n\n  const getConfidenceScore = (fieldPath: string): number | undefined => {\n    return initialData.confidence.field_confidence?.[fieldPath]\n  }\n\n  const hasConfirmations = Object.keys(confirmations).length > 0\n  const allFieldsConfirmed =\n    hasConfirmations &&\n    (initialData.extracted_data.lab_values?.length || 0) +\n      (initialData.extracted_data.medications?.length || 0) +\n      (Object.keys(initialData.extracted_data.vital_signs || {}).length || 0) +\n      (initialData.extracted_data.diagnoses?.length || 0) +\n      (initialData.extracted_data.notes ? 1 : 0) ===\n      Object.keys(confirmations).length\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"border-b pb-4\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Review Extracted Values</h1>\n        <p className=\"text-gray-600 mt-2\">\n          Please review the information extracted from your document and confirm or correct it.\n        </p>\n        {initialData.confirmed_at && (\n          <p className=\"text-sm text-green-600 mt-2\">\n            Last confirmed on {new Date(initialData.confirmed_at).toLocaleString()}\n          </p>\n        )}\n      </div>\n\n      {/* Error message */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Action buttons */}\n      <div className=\"flex gap-3\">\n        <button\n          onClick={handleAcceptAll}\n          className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50\"\n          disabled={saving}\n        >\n          Accept All\n        </button>\n        <button\n          onClick={handleSave}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50\"\n          disabled={saving || !hasConfirmations}\n        >\n          {saving ? 'Saving...' : 'Save Confirmations'}\n        </button>\n      </div>\n\n      {/* Lab Values Section */}\n      {initialData.extracted_data.lab_values &&\n        initialData.extracted_data.lab_values.length > 0 && (\n          <LabValuesSection\n            labValues={initialData.extracted_data.lab_values}\n            confirmations={confirmations}\n            getConfidenceScore={getConfidenceScore}\n            onAccept={handleFieldAccept}\n            onEdit={handleFieldEdit}\n            onReject={handleFieldReject}\n          />\n        )}\n\n      {/* Medications Section */}\n      {initialData.extracted_data.medications &&\n        initialData.extracted_data.medications.length > 0 && (\n          <MedicationsSection\n            medications={initialData.extracted_data.medications}\n            confirmations={confirmations}\n            getConfidenceScore={getConfidenceScore}\n            onAccept={handleFieldAccept}\n            onEdit={handleFieldEdit}\n            onReject={handleFieldReject}\n          />\n        )}\n\n      {/* Vital Signs Section */}\n      {initialData.extracted_data.vital_signs &&\n        Object.keys(initialData.extracted_data.vital_signs).length > 0 && (\n          <VitalSignsSection\n            vitalSigns={initialData.extracted_data.vital_signs}\n            confirmations={confirmations}\n            getConfidenceScore={getConfidenceScore}\n            onAccept={handleFieldAccept}\n            onEdit={handleFieldEdit}\n            onReject={handleFieldReject}\n          />\n        )}\n\n      {/* Diagnoses Section */}\n      {initialData.extracted_data.diagnoses &&\n        initialData.extracted_data.diagnoses.length > 0 && (\n          <DiagnosesSection\n            diagnoses={initialData.extracted_data.diagnoses}\n            confirmations={confirmations}\n            getConfidenceScore={getConfidenceScore}\n            onAccept={handleFieldAccept}\n            onEdit={handleFieldEdit}\n            onReject={handleFieldReject}\n          />\n        )}\n\n      {/* Notes Section */}\n      {initialData.extracted_data.notes && (\n        <NotesSection\n          notes={initialData.extracted_data.notes}\n          confirmations={confirmations}\n          getConfidenceScore={getConfidenceScore}\n          onAccept={handleFieldAccept}\n          onEdit={handleFieldEdit}\n          onReject={handleFieldReject}\n        />\n      )}\n\n      {/* Progress indicator */}\n      {hasConfirmations && (\n        <div className=\"bg-blue-50 border border-blue-200 px-4 py-3 rounded\">\n          <p className=\"text-sm text-blue-700\">\n            {Object.keys(confirmations).length} field(s) confirmed\n            {allFieldsConfirmed && ' - All fields confirmed!'}\n          </p>\n        </div>\n      )}\n    </div>\n  )\n}\n\n// ============================================================\n// Section Components\n// ============================================================\n\ntype SectionProps = {\n  confirmations: Record<string, FieldConfirmation>\n  getConfidenceScore: (fieldPath: string) => number | undefined\n  onAccept: (key: string, value: any) => void\n  onEdit: (key: string, originalValue: any, newValue: any) => void\n  onReject: (key: string, value: any) => void\n}\n\nfunction LabValuesSection({\n  labValues,\n  confirmations,\n  getConfidenceScore,\n  onAccept,\n  onEdit,\n  onReject,\n}: SectionProps & { labValues: any[] }) {\n  return (\n    <div className=\"border rounded-lg p-4\">\n      <h2 className=\"text-lg font-semibold mb-3\">Lab Values</h2>\n      <div className=\"space-y-3\">\n        {labValues.map((labValue, idx) => {\n          const key = `lab_values[${idx}]`\n          const confidence = getConfidenceScore(key)\n          const isLow = confidence !== undefined && isLowConfidence(confidence)\n          const confirmation = confirmations[key]\n\n          return (\n            <FieldCard\n              key={key}\n              fieldKey={key}\n              label={labValue.test_name}\n              value={`${labValue.value}${labValue.unit ? ' ' + labValue.unit : ''}`}\n              isLowConfidence={isLow}\n              confidence={confidence}\n              confirmation={confirmation}\n              onAccept={() => onAccept(key, labValue)}\n              onEdit={newValue => onEdit(key, labValue, newValue)}\n              onReject={() => onReject(key, labValue)}\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nfunction MedicationsSection({\n  medications,\n  confirmations,\n  getConfidenceScore,\n  onAccept,\n  onEdit,\n  onReject,\n}: SectionProps & { medications: any[] }) {\n  return (\n    <div className=\"border rounded-lg p-4\">\n      <h2 className=\"text-lg font-semibold mb-3\">Medications</h2>\n      <div className=\"space-y-3\">\n        {medications.map((med, idx) => {\n          const key = `medications[${idx}]`\n          const confidence = getConfidenceScore(key)\n          const isLow = confidence !== undefined && isLowConfidence(confidence)\n          const confirmation = confirmations[key]\n          const displayValue = `${med.name}${med.dosage ? ' - ' + med.dosage : ''}${med.frequency ? ' (' + med.frequency + ')' : ''}`\n\n          return (\n            <FieldCard\n              key={key}\n              fieldKey={key}\n              label=\"Medication\"\n              value={displayValue}\n              isLowConfidence={isLow}\n              confidence={confidence}\n              confirmation={confirmation}\n              onAccept={() => onAccept(key, med)}\n              onEdit={newValue => onEdit(key, med, newValue)}\n              onReject={() => onReject(key, med)}\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nfunction VitalSignsSection({\n  vitalSigns,\n  confirmations,\n  getConfidenceScore,\n  onAccept,\n  onEdit,\n  onReject,\n}: SectionProps & { vitalSigns: Record<string, string | number> }) {\n  // Sort vital signs by key for deterministic ordering\n  const sortedVitalSigns = Object.entries(vitalSigns).sort(([a], [b]) => a.localeCompare(b))\n\n  return (\n    <div className=\"border rounded-lg p-4\">\n      <h2 className=\"text-lg font-semibold mb-3\">Vital Signs</h2>\n      <div className=\"space-y-3\">\n        {sortedVitalSigns.map(([vitalKey, value]) => {\n          const key = `vital_signs.${vitalKey}`\n          const confidence = getConfidenceScore(key)\n          const isLow = confidence !== undefined && isLowConfidence(confidence)\n          const confirmation = confirmations[key]\n\n          return (\n            <FieldCard\n              key={key}\n              fieldKey={key}\n              label={vitalKey.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\n              value={String(value)}\n              isLowConfidence={isLow}\n              confidence={confidence}\n              confirmation={confirmation}\n              onAccept={() => onAccept(key, value)}\n              onEdit={newValue => onEdit(key, value, newValue)}\n              onReject={() => onReject(key, value)}\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nfunction DiagnosesSection({\n  diagnoses,\n  confirmations,\n  getConfidenceScore,\n  onAccept,\n  onEdit,\n  onReject,\n}: SectionProps & { diagnoses: string[] }) {\n  return (\n    <div className=\"border rounded-lg p-4\">\n      <h2 className=\"text-lg font-semibold mb-3\">Diagnoses</h2>\n      <div className=\"space-y-3\">\n        {diagnoses.map((diagnosis, idx) => {\n          const key = `diagnoses[${idx}]`\n          const confidence = getConfidenceScore(key)\n          const isLow = confidence !== undefined && isLowConfidence(confidence)\n          const confirmation = confirmations[key]\n\n          return (\n            <FieldCard\n              key={key}\n              fieldKey={key}\n              label=\"Diagnosis\"\n              value={diagnosis}\n              isLowConfidence={isLow}\n              confidence={confidence}\n              confirmation={confirmation}\n              onAccept={() => onAccept(key, diagnosis)}\n              onEdit={newValue => onEdit(key, diagnosis, newValue)}\n              onReject={() => onReject(key, diagnosis)}\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nfunction NotesSection({\n  notes,\n  confirmations,\n  getConfidenceScore,\n  onAccept,\n  onEdit,\n  onReject,\n}: SectionProps & { notes: string }) {\n  const key = 'notes'\n  const confidence = getConfidenceScore(key)\n  const isLow = confidence !== undefined && isLowConfidence(confidence)\n  const confirmation = confirmations[key]\n\n  return (\n    <div className=\"border rounded-lg p-4\">\n      <h2 className=\"text-lg font-semibold mb-3\">Notes</h2>\n      <FieldCard\n        fieldKey={key}\n        label=\"Additional Notes\"\n        value={notes}\n        isLowConfidence={isLow}\n        confidence={confidence}\n        confirmation={confirmation}\n        onAccept={() => onAccept(key, notes)}\n        onEdit={newValue => onEdit(key, notes, newValue)}\n        onReject={() => onReject(key, notes)}\n        multiline\n      />\n    </div>\n  )\n}\n\n// ============================================================\n// Field Card Component\n// ============================================================\n\ntype FieldCardProps = {\n  fieldKey: string\n  label: string\n  value: string\n  isLowConfidence: boolean\n  confidence?: number\n  confirmation?: FieldConfirmation\n  onAccept: () => void\n  onEdit: (newValue: any) => void\n  onReject: () => void\n  multiline?: boolean\n}\n\nfunction FieldCard({\n  fieldKey,\n  label,\n  value,\n  isLowConfidence,\n  confidence,\n  confirmation,\n  onAccept,\n  onEdit,\n  onReject,\n  multiline = false,\n}: FieldCardProps) {\n  const [isEditing, setIsEditing] = useState(false)\n  const [editValue, setEditValue] = useState(value)\n\n  const handleSaveEdit = () => {\n    onEdit(editValue)\n    setIsEditing(false)\n  }\n\n  const handleCancelEdit = () => {\n    setEditValue(value)\n    setIsEditing(false)\n  }\n\n  const status = confirmation?.status\n  const bgColor = isLowConfidence\n    ? 'bg-yellow-50 border-yellow-300'\n    : status === 'accepted'\n      ? 'bg-green-50 border-green-300'\n      : status === 'edited'\n        ? 'bg-blue-50 border-blue-300'\n        : status === 'rejected'\n          ? 'bg-red-50 border-red-300'\n          : 'bg-white border-gray-300'\n\n  return (\n    <div className={`border rounded p-3 ${bgColor}`}>\n      <div className=\"flex justify-between items-start mb-2\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"font-medium text-sm text-gray-700\">{label}</span>\n            {confidence !== undefined && (\n              <span\n                className={`text-xs px-2 py-0.5 rounded ${\n                  isLowConfidence ? 'bg-yellow-200 text-yellow-800' : 'bg-green-200 text-green-800'\n                }`}\n              >\n                {Math.round(confidence * 100)}% confidence\n              </span>\n            )}\n          </div>\n\n          {!isEditing && (\n            <div className=\"mt-1 text-gray-900\">\n              {multiline ? (\n                <pre className=\"whitespace-pre-wrap font-sans text-sm\">{value}</pre>\n              ) : (\n                <span className=\"text-sm\">{value}</span>\n              )}\n            </div>\n          )}\n\n          {isEditing && (\n            <div className=\"mt-2\">\n              {multiline ? (\n                <textarea\n                  value={editValue}\n                  onChange={e => setEditValue(e.target.value)}\n                  className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\n                  rows={4}\n                />\n              ) : (\n                <input\n                  type=\"text\"\n                  value={editValue}\n                  onChange={e => setEditValue(e.target.value)}\n                  className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\n                />\n              )}\n              <div className=\"flex gap-2 mt-2\">\n                <button\n                  onClick={handleSaveEdit}\n                  className=\"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700\"\n                >\n                  Save\n                </button>\n                <button\n                  onClick={handleCancelEdit}\n                  className=\"px-3 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          )}\n\n          {status && !isEditing && (\n            <div className=\"mt-1 text-xs text-gray-600\">\n              Status: {status.charAt(0).toUpperCase() + status.slice(1)}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {!isEditing && !status && (\n        <div className=\"flex gap-2 mt-2\">\n          <button\n            onClick={onAccept}\n            className=\"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700\"\n          >\n            Accept\n          </button>\n          <button\n            onClick={() => setIsEditing(true)}\n            className=\"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700\"\n          >\n            Edit\n          </button>\n          <button\n            onClick={onReject}\n            className=\"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700\"\n          >\n            Not Applicable\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"4065c67e4958cf201c3bb8de8d8f1709976fb255dc\":\"saveDocumentConfirmation\"},\"lib/actions/confirmations.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"4065c67e4958cf201c3bb8de8d8f1709976fb255dc\",callServer,void 0,findSourceMapURL,\"saveDocumentConfirmation\");export{$$RSC_SERVER_ACTION_0 as saveDocumentConfirmation};","/**\n * Document Extraction Types and Schemas (V05-I04.2)\n * \n * Type definitions and Zod schemas for AI document extraction pipeline\n */\n\nimport { z } from 'zod'\nimport type { ExtractorVersion } from '@/lib/contracts/registry'\n\n/**\n * Evidence pointer for confidence metadata\n * PHI-safe reference to where data was found in the document\n */\nexport const EvidencePointerSchema = z.object({\n  page: z.number().optional(),\n  section: z.string().optional(),\n  confidence_score: z.number().min(0).max(1),\n})\n\nexport type EvidencePointer = z.infer<typeof EvidencePointerSchema>\n\n/**\n * Lab value extraction schema\n */\nexport const LabValueSchema = z.object({\n  test_name: z.string(),\n  value: z.union([z.number(), z.string()]),\n  unit: z.string().optional(),\n  reference_range: z.string().optional(),\n  date: z.string().optional(),\n})\n\nexport type LabValue = z.infer<typeof LabValueSchema>\n\n/**\n * Medication extraction schema\n */\nexport const MedicationSchema = z.object({\n  name: z.string(),\n  dosage: z.string().optional(),\n  frequency: z.string().optional(),\n  route: z.string().optional(),\n})\n\nexport type Medication = z.infer<typeof MedicationSchema>\n\n/**\n * Generic extracted data schema\n * Can be extended with additional fields as needed\n */\nexport const ExtractedDataSchema = z.object({\n  lab_values: z.array(LabValueSchema).optional(),\n  medications: z.array(MedicationSchema).optional(),\n  vital_signs: z.record(z.string(), z.union([z.number(), z.string()])).optional(),\n  diagnoses: z.array(z.string()).optional(),\n  notes: z.string().optional(),\n})\n\nexport type ExtractedData = z.infer<typeof ExtractedDataSchema>\n\n/**\n * Confidence metadata schema\n * Per-field confidence scores with PHI-safe evidence pointers\n */\nexport const ConfidenceMetadataSchema = z.object({\n  overall_confidence: z.number().min(0).max(1),\n  field_confidence: z.record(z.string(), z.number().min(0).max(1)),\n  evidence: z.record(z.string(), EvidencePointerSchema),\n  extraction_timestamp: z.string(),\n})\n\nexport type ConfidenceMetadata = z.infer<typeof ConfidenceMetadataSchema>\n\n/**\n * Extraction result schema\n * Complete result from the extraction pipeline\n */\nexport const ExtractionResultSchema = z.object({\n  extractor_version: z.string(),\n  input_hash: z.string(),\n  extracted_data: ExtractedDataSchema,\n  confidence: ConfidenceMetadataSchema,\n  extracted_at: z.string(),\n})\n\nexport type ExtractionResult = z.infer<typeof ExtractionResultSchema>\n\n/**\n * Extraction request schema\n */\nexport const ExtractionRequestSchema = z.object({\n  document_id: z.string().uuid(),\n  force_reextract: z.boolean().optional().default(false),\n})\n\nexport type ExtractionRequest = z.infer<typeof ExtractionRequestSchema>\n\n/**\n * Extraction response schema (API response)\n */\nexport const ExtractionResponseSchema = z.object({\n  success: z.boolean(),\n  data: z.object({\n    document_id: z.string().uuid(),\n    extractor_version: z.string(),\n    input_hash: z.string(),\n    extraction_created: z.boolean(),\n    extracted_data: ExtractedDataSchema.optional(),\n    confidence: ConfidenceMetadataSchema.optional(),\n  }).optional(),\n  error: z.object({\n    code: z.string(),\n    message: z.string(),\n  }).optional(),\n})\n\nexport type ExtractionResponse = z.infer<typeof ExtractionResponseSchema>\n\n/**\n * Validates extracted data against schema\n */\nexport function validateExtractedData(data: unknown): {\n  valid: boolean\n  data?: ExtractedData\n  error?: string\n} {\n  try {\n    const validated = ExtractedDataSchema.parse(data)\n    return { valid: true, data: validated }\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return {\n        valid: false,\n        error: error.issues.map(e => `${e.path.join('.')}: ${e.message}`).join(', '),\n      }\n    }\n    return { valid: false, error: String(error) }\n  }\n}\n\n/**\n * Validates confidence metadata against schema\n */\nexport function validateConfidenceMetadata(data: unknown): {\n  valid: boolean\n  data?: ConfidenceMetadata\n  error?: string\n} {\n  try {\n    const validated = ConfidenceMetadataSchema.parse(data)\n    return { valid: true, data: validated }\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return {\n        valid: false,\n        error: error.issues.map(e => `${e.path.join('.')}: ${e.message}`).join(', '),\n      }\n    }\n    return { valid: false, error: String(error) }\n  }\n}\n\n/**\n * Extracts structured data from document using AI\n * This is a placeholder - actual implementation will use Anthropic Claude\n */\nexport interface ExtractionPayload {\n  documentId: string\n  storagePath: string\n  mimeType: string\n  extractorVersion: ExtractorVersion\n  parsedText?: string // If available from previous parsing step\n}\n\n/**\n * Error codes for extraction pipeline\n */\nexport const EXTRACTION_ERROR = {\n  INVALID_STATE: 'INVALID_STATE',\n  NOT_PARSED: 'NOT_PARSED',\n  EXTRACTION_FAILED: 'EXTRACTION_FAILED',\n  VALIDATION_FAILED: 'VALIDATION_FAILED',\n  STORAGE_ERROR: 'STORAGE_ERROR',\n  IDEMPOTENCY_VIOLATION: 'IDEMPOTENCY_VIOLATION',\n} as const\n\nexport type ExtractionErrorCode = typeof EXTRACTION_ERROR[keyof typeof EXTRACTION_ERROR]\n\n// ============================================================\n// Confirmation Types (V05-I04.3)\n// ============================================================\n\n/**\n * Status for a confirmed field\n */\nexport const FIELD_STATUS = {\n  ACCEPTED: 'accepted', // Patient accepted extracted value as-is\n  EDITED: 'edited', // Patient corrected the extracted value\n  REJECTED: 'rejected', // Patient marked field as not applicable/unknown\n} as const\n\nexport type FieldStatus = typeof FIELD_STATUS[keyof typeof FIELD_STATUS]\n\n/**\n * Per-field confirmation metadata\n */\nexport const FieldConfirmationSchema = z.object({\n  status: z.enum(['accepted', 'edited', 'rejected']),\n  original_value: z.any().optional(),\n  confirmed_value: z.any().optional(),\n  confirmed_at: z.string(),\n})\n\nexport type FieldConfirmation = z.infer<typeof FieldConfirmationSchema>\n\n/**\n * Complete confirmation data structure\n * Mirrors extracted_data but adds per-field status tracking\n */\nexport const ConfirmationDataSchema = z.object({\n  lab_values: z.array(LabValueSchema).optional(),\n  medications: z.array(MedicationSchema).optional(),\n  vital_signs: z.record(z.string(), z.union([z.number(), z.string()])).optional(),\n  diagnoses: z.array(z.string()).optional(),\n  notes: z.string().optional(),\n  // Per-field confirmation metadata\n  field_confirmations: z.record(z.string(), FieldConfirmationSchema),\n})\n\nexport type ConfirmationData = z.infer<typeof ConfirmationDataSchema>\n\n/**\n * Request schema for saving confirmations\n */\nexport const SaveConfirmationRequestSchema = z.object({\n  document_id: z.string().uuid(),\n  confirmed_data: ConfirmationDataSchema,\n})\n\nexport type SaveConfirmationRequest = z.infer<typeof SaveConfirmationRequestSchema>\n\n/**\n * Response schema for confirmation operations\n */\nexport const ConfirmationResponseSchema = z.object({\n  success: z.boolean(),\n  data: z\n    .object({\n      document_id: z.string().uuid(),\n      confirmed_at: z.string(),\n    })\n    .optional(),\n  error: z\n    .object({\n      code: z.string(),\n      message: z.string(),\n    })\n    .optional(),\n})\n\nexport type ConfirmationResponse = z.infer<typeof ConfirmationResponseSchema>\n\n/**\n * Helper to determine if a field has low confidence\n */\nexport function isLowConfidence(score: number, threshold = 0.7): boolean {\n  return score < threshold\n}\n\n/**\n * Helper to get confirmation status summary\n */\nexport function getConfirmationSummary(confirmations: Record<string, FieldConfirmation>) {\n  const statuses = Object.values(confirmations)\n  return {\n    total: statuses.length,\n    accepted: statuses.filter(c => c.status === FIELD_STATUS.ACCEPTED).length,\n    edited: statuses.filter(c => c.status === FIELD_STATUS.EDITED).length,\n    rejected: statuses.filter(c => c.status === FIELD_STATUS.REJECTED).length,\n  }\n}\n"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"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","ignoreList":[0]}