(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51977,e=>{"use strict";var t=e.i(18050),s=e.i(71645);e.i(47446);var r=e.i(12911),a=e.i(67488),n=e.i(32796);let i=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var l=e.i(63209),o=e.i(81307);let c="open",d="in_progress",u="escalated",g="resolved",m="closed",x=o.z.enum([c,d,u,g,m]),p={LOW:"low",MEDIUM:"medium",HIGH:"high",URGENT:"urgent"},b=o.z.enum([p.LOW,p.MEDIUM,p.HIGH,p.URGENT]),h={TECHNICAL:"technical",MEDICAL:"medical",ADMINISTRATIVE:"administrative",BILLING:"billing",GENERAL:"general",OTHER:"other"},y=o.z.enum([h.TECHNICAL,h.MEDICAL,h.ADMINISTRATIVE,h.BILLING,h.GENERAL,h.OTHER]);function f(e){switch(e){case p.LOW:return"Niedrig";case p.MEDIUM:return"Mittel";case p.HIGH:return"Hoch";case p.URGENT:return"Dringend";default:return e}}function j(e){switch(e){case h.TECHNICAL:return"Technisch";case h.MEDICAL:return"Medizinisch";case h.ADMINISTRATIVE:return"Administrativ";case h.BILLING:return"Abrechnung";case h.GENERAL:return"Allgemein";case h.OTHER:return"Sonstiges";default:return e}}o.z.object({id:o.z.string().uuid(),patient_id:o.z.string().uuid(),organization_id:o.z.string().uuid().nullable(),created_by_user_id:o.z.string().uuid().nullable(),assigned_to_user_id:o.z.string().uuid().nullable(),escalated_task_id:o.z.string().uuid().nullable(),category:y,priority:b,status:x,subject:o.z.string(),description:o.z.string().nullable(),notes:o.z.string().nullable(),resolution_notes:o.z.string().nullable(),metadata:o.z.record(o.z.string(),o.z.any()).nullable(),escalated_at:o.z.string().nullable(),escalated_by_user_id:o.z.string().uuid().nullable(),created_at:o.z.string(),updated_at:o.z.string().nullable(),resolved_at:o.z.string().nullable(),closed_at:o.z.string().nullable()}),o.z.object({patient_id:o.z.string().uuid(),category:y.optional(),priority:b.optional(),subject:o.z.string().min(1,"Subject is required").max(200,"Subject too long"),description:o.z.string().optional(),metadata:o.z.record(o.z.string(),o.z.any()).optional()}),o.z.object({status:x.optional(),priority:b.optional(),assigned_to_user_id:o.z.string().uuid().nullable().optional(),description:o.z.string().nullable().optional(),notes:o.z.string().nullable().optional(),resolution_notes:o.z.string().nullable().optional(),metadata:o.z.record(o.z.string(),o.z.any()).optional()}),o.z.object({assigned_to_role:o.z.enum(["clinician","admin"]),assigned_to_user_id:o.z.string().uuid().optional(),escalation_notes:o.z.string().optional(),task_due_at:o.z.string().optional()}),o.z.object({patient_id:o.z.string().uuid().optional(),organization_id:o.z.string().uuid().optional(),assigned_to_user_id:o.z.string().uuid().optional(),category:y.optional(),priority:b.optional(),status:x.optional(),is_escalated:o.z.boolean().optional()});var N=e.i(37727);function z({onClose:e,onCreate:r}){let[n,i]=(0,s.useState)(""),[l,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(h.GENERAL),[u,g]=(0,s.useState)(p.MEDIUM),[m,x]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null);async function z(e){if(e.preventDefault(),!n.trim())return void y("Bitte geben Sie einen Betreff ein");try{x(!0),y(null),await r({subject:n.trim(),description:l.trim(),category:c,priority:u})}catch(e){console.error("Error creating support case:",e),y(e instanceof Error?e.message:"Fehler beim Erstellen der Anfrage"),x(!1)}}return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Neue Support-Anfrage"}),(0,t.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:m,children:(0,t.jsx)(N.X,{size:24})})]}),(0,t.jsxs)("form",{onSubmit:z,className:"p-6 space-y-6",children:[b&&(0,t.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded text-red-800 text-sm",children:b}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:["Betreff ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"subject",value:n,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Kurze Zusammenfassung Ihrer Anfrage",maxLength:200,required:!0,disabled:m}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[n.length,"/200 Zeichen"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategorie"}),(0,t.jsx)("select",{id:"category",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m,children:Object.values(h).map(e=>(0,t.jsx)("option",{value:e,children:j(e)},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Dringlichkeit"}),(0,t.jsx)("select",{id:"priority",value:u,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m,children:Object.values(p).map(e=>(0,t.jsx)("option",{value:e,children:f(e)},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Beschreibung"}),(0,t.jsx)("textarea",{id:"description",value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[120px]",placeholder:"Detaillierte Beschreibung Ihrer Anfrage...",disabled:m})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,t.jsx)(a.Button,{type:"button",onClick:e,disabled:m,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Abbrechen"}),(0,t.jsx)(a.Button,{type:"submit",disabled:m,children:m?"Wird erstellt...":"Anfrage erstellen"})]})]})]})})}function v({patientId:e,patientName:o}){let[x,b]=(0,s.useState)([]),[h,y]=(0,s.useState)(!0),[N,v]=(0,s.useState)(null),[_,E]=(0,s.useState)(!1);async function w(){try{y(!0),v(null);let t=await fetch(`/api/support-cases?patient_id=${e}`),s=await t.json();if(!s.success)throw Error(s.error?.message||"Failed to load support cases");b(s.data||[])}catch(e){console.error("Error loading support cases:",e),v(e instanceof Error?e.message:"Failed to load support cases")}finally{y(!1)}}async function A(t){try{let s=await fetch("/api/support-cases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:e,subject:t.subject,description:t.description,category:t.category,priority:t.priority})}),r=await s.json();if(!r.success)throw Error(r.error?.message||"Failed to create support case");await w(),E(!1)}catch(e){throw console.error("Error creating support case:",e),e}}return((0,s.useEffect)(()=>{w()},[e]),h)?(0,t.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})}):(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Support"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:[o?`Hallo ${o}`:"Hallo",", hier können Sie Support-Anfragen erstellen und verfolgen."]})]}),(0,t.jsxs)(a.Button,{onClick:()=>E(!0),className:"flex items-center gap-2",children:[(0,t.jsx)(i,{size:20}),"Neue Anfrage"]})]}),N&&(0,t.jsx)(r.Card,{className:"p-4 border-red-200 bg-red-50",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,t.jsx)(l.AlertCircle,{size:20}),(0,t.jsx)("p",{children:N})]})}),(0,t.jsx)("div",{className:"space-y-4",children:0===x.length?(0,t.jsxs)(r.Card,{className:"p-8 text-center",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Noch keine Support-Anfragen vorhanden."}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:'Klicken Sie auf "Neue Anfrage", um eine Support-Anfrage zu erstellen.'})]}):x.map(e=>(0,t.jsxs)(r.Card,{className:"p-6 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.subject}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)(n.Badge,{className:function(e){switch(e){case c:return"bg-blue-100 text-blue-800";case d:return"bg-yellow-100 text-yellow-800";case u:return"bg-red-100 text-red-800";case g:return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}(e.status),children:function(e){switch(e){case c:return"Offen";case d:return"In Bearbeitung";case u:return"Eskaliert";case g:return"Gelöst";case m:return"Geschlossen";default:return e}}(e.status)}),(0,t.jsx)(n.Badge,{className:function(e){switch(e){case p.LOW:return"bg-gray-100 text-gray-800";case p.MEDIUM:return"bg-blue-100 text-blue-800";case p.HIGH:return"bg-orange-100 text-orange-800";case p.URGENT:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}(e.priority),children:f(e.priority)}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:j(e.category)})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("de-DE")}),e.escalated_at&&(0,t.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["Eskaliert am"," ",new Date(e.escalated_at).toLocaleDateString("de-DE")]})]})]}),e.description&&(0,t.jsx)("p",{className:"text-gray-700 text-sm mt-2",children:e.description}),e.resolution_notes&&e.status===g&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-800 mb-1",children:"Lösung:"}),(0,t.jsx)("p",{className:"text-sm text-green-700",children:e.resolution_notes})]})]},e.id))}),_&&(0,t.jsx)(z,{onClose:()=>E(!1),onCreate:A})]})}e.s(["SupportCaseList",()=>v],51977)}]);

//# sourceMappingURL=f87c5a7a6764f196.js.map