{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/rhythmologicum-connect/rhythmologicum-connect/lib/utils/roleLanding.ts"],"sourcesContent":["export type ResolvedUserRole = 'patient' | 'clinician' | 'admin' | 'nurse'\n\nexport function getLandingForRole(role: ResolvedUserRole): string {\n  switch (role) {\n    case 'patient':\n      return '/patient'\n    case 'clinician':\n    case 'nurse':\n      return '/clinician'\n    case 'admin':\n      return '/admin'\n  }\n}\n"],"names":[],"mappings":";;;;AAEO,SAAS,kBAAkB,IAAsB;IACtD,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;QACL,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;IACX;AACF"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/rhythmologicum-connect/rhythmologicum-connect/lib/utils/authRedirect.ts"],"sourcesContent":["import type { ResolvedUserRole } from './roleLanding'\nimport { getLandingForRole } from './roleLanding'\n\nexport type PostLoginRole = ResolvedUserRole | 'unknown'\n\ntype PostLoginRedirectInput = {\n  role: PostLoginRole\n  patientOnboardingPath?: string\n}\n\nexport function getPostLoginRedirect({\n  role,\n  patientOnboardingPath,\n}: PostLoginRedirectInput): string {\n  let target = '/'\n\n  if (role === 'patient') {\n    target = patientOnboardingPath ?? getLandingForRole('patient')\n  } else if (role === 'clinician' || role === 'admin' || role === 'nurse') {\n    target = getLandingForRole(role)\n  }\n\n  console.log(`[AUTH_LANDING] role=${role} target=${target}`)\n\n  return target\n}"],"names":[],"mappings":";;;;AACA;;AASO,SAAS,qBAAqB,EACnC,IAAI,EACJ,qBAAqB,EACE;IACvB,IAAI,SAAS;IAEb,IAAI,SAAS,WAAW;QACtB,SAAS,yBAAyB,IAAA,mJAAiB,EAAC;IACtD,OAAO,IAAI,SAAS,eAAe,SAAS,WAAW,SAAS,SAAS;QACvE,SAAS,IAAA,mJAAiB,EAAC;IAC7B;IAEA,QAAQ,GAAG,CAAC,CAAC,oBAAoB,EAAE,KAAK,QAAQ,EAAE,QAAQ;IAE1D,OAAO;AACT"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/rhythmologicum-connect/rhythmologicum-connect/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { supabase } from '../lib/supabaseClient'\nimport { useRouter } from 'next/navigation'\nimport { ThemeToggle, Input } from '@/lib/ui'\nimport type { ResolvedUserRole } from '@/lib/utils/roleLanding'\nimport { getPostLoginRedirect } from '@/lib/utils/authRedirect'\n\nasync function syncServerSession() {\n  const { data } = await supabase.auth.getSession()\n  const session = data.session\n  if (!session) return\n\n  await fetch('/api/auth/callback', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ event: 'SIGNED_IN', session }),\n  })\n}\n\ntype ResolveRoleResult = {\n  role: ResolvedUserRole\n  requiresOnboarding: boolean\n  reason?: string\n}\n\ntype ResolveRoleOutcome =\n  | { kind: 'ok'; value: ResolveRoleResult }\n  | { kind: 'unauthenticated' }\n  | { kind: 'fallback_patient' }\n\nasync function resolveRole(): Promise<ResolveRoleOutcome> {\n  try {\n    const res = await fetch('/api/auth/resolve-role', { method: 'GET' })\n    if (res.status === 401) return { kind: 'unauthenticated' }\n    if (!res.ok) return { kind: 'fallback_patient' }\n    const json: unknown = await res.json()\n    if (!json || typeof json !== 'object') return { kind: 'fallback_patient' }\n    const data = (json as { data?: unknown }).data\n    if (!data || typeof data !== 'object') return { kind: 'fallback_patient' }\n\n    const role = (data as { role?: string }).role\n    const requiresOnboarding = (data as { requiresOnboarding?: boolean }).requiresOnboarding\n    const reason = (data as { reason?: string }).reason\n    if (role === 'patient' || role === 'clinician' || role === 'admin' || role === 'nurse') {\n      return { kind: 'ok', value: { role, requiresOnboarding: requiresOnboarding === true, reason } }\n    }\n\n    // If the API returns an unexpected role, don't block UX.\n    return { kind: 'fallback_patient' }\n  } catch {\n    return { kind: 'fallback_patient' }\n  }\n}\n\ntype OnboardingStatusResponse =\n  | {\n      success: true\n      data: { needsConsent: boolean; needsProfile: boolean; completed: boolean }\n    }\n  | { success: false; error: { code: string; message: string } }\n\nasync function getPatientRedirectFromOnboardingStatus(): Promise<\n  | { kind: 'ok'; path: string }\n  | { kind: 'unauthenticated' }\n  | { kind: 'fallback' }\n> {\n  try {\n    const res = await fetch('/api/patient/onboarding-status', { method: 'GET', cache: 'no-store' })\n    if (res.status === 401) return { kind: 'unauthenticated' }\n    if (!res.ok) return { kind: 'fallback' }\n\n    const json: unknown = await res.json()\n    if (!json || typeof json !== 'object') return { kind: 'fallback' }\n    const parsed = json as OnboardingStatusResponse\n    if (!('success' in parsed) || parsed.success !== true) return { kind: 'fallback' }\n\n    if (parsed.data.needsConsent) return { kind: 'ok', path: '/patient/onboarding/consent' }\n    if (parsed.data.needsProfile) return { kind: 'ok', path: '/patient/onboarding/profile' }\n    return { kind: 'fallback' }\n  } catch {\n    return { kind: 'fallback' }\n  }\n}\n\nasync function resolvePostLoginRedirect(role: ResolvedUserRole): Promise<string | null> {\n  if (role === 'patient') {\n    const onboarding = await getPatientRedirectFromOnboardingStatus()\n    if (onboarding.kind === 'unauthenticated') return null\n    if (onboarding.kind === 'ok') {\n      return getPostLoginRedirect({ role, patientOnboardingPath: onboarding.path })\n    }\n  }\n\n  return getPostLoginRedirect({ role })\n}\n\n\ntype Mode = 'login' | 'signup'\n\ninterface VersionInfo {\n  commitHash: string\n  commitHashShort: string\n  commitDate: string\n  buildDate: string\n}\n\nexport default function LoginPage() {\n  const router = useRouter()\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [mode, setMode] = useState<Mode>('login')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [info, setInfo] = useState<string | null>(null) // neu: Erfolgsmeldungen\n  const [versionInfo, setVersionInfo] = useState<VersionInfo | null>(null)\n\n  // Check if user is already authenticated and redirect to appropriate landing page\n  useEffect(() => {\n    const checkAuthAndRedirect = async () => {\n      const {\n        data: { user },\n      } = await supabase.auth.getUser()\n\n      if (user) {\n        await syncServerSession()\n\n        const resolved = await resolveRole()\n\n        if (resolved.kind === 'unauthenticated') {\n          return\n        }\n\n        const role = resolved.kind === 'fallback_patient' ? 'patient' : resolved.value.role\n\n        const target = await resolvePostLoginRedirect(role)\n        if (target) {\n          router.replace(target)\n        }\n      }\n    }\n\n    checkAuthAndRedirect()\n  }, [router])\n\n  useEffect(() => {\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange(async (event, session) => {\n      await fetch('/api/auth/callback', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ event, session }),\n      })\n    })\n\n    return () => subscription.unsubscribe()\n  }, [])\n\n  // Fetch version info on component mount\n  useEffect(() => {\n    fetch('/version.json')\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(`HTTP error! status: ${res.status}`)\n        }\n        return res.json()\n      })\n      .then((data) => {\n        // Basic validation of the response structure\n        if (data && typeof data.commitHashShort === 'string' && typeof data.commitDate === 'string') {\n          setVersionInfo(data)\n        }\n      })\n      .catch((err) => console.error('Failed to load version info:', err))\n  }, [])\n\n  // Check for error/message query parameters from middleware redirect\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search)\n    const errorParam = params.get('error')\n    const messageParam = params.get('message')\n    \n    if (errorParam && messageParam) {\n      setError(messageParam)\n      // Clean up URL\n      window.history.replaceState({}, '', '/')\n    }\n  }, [])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(null)\n    setInfo(null)\n\n    const trimmedEmail = email.trim()\n    const trimmedPassword = password.trim()\n\n    if (!trimmedEmail || !trimmedPassword) {\n      setError('Bitte E-Mail und Passwort eingeben.')\n      return\n    }\n\n    setLoading(true)\n\n    try {\n      if (mode === 'signup') {\n        const { error: signUpError } = await supabase.auth.signUp({\n          email: trimmedEmail,\n          password: trimmedPassword,\n        })\n\n        if (signUpError) throw signUpError\n\n        // Erfolgsmeldung für Signup\n        setInfo(\n          'Ihr Konto wurde angelegt. Bitte prüfen Sie Ihre E-Mails, um Ihre Adresse zu bestätigen.'\n        )\n\n        return // kein sofortiger Login → User soll Mail bestätigen\n      } else {\n        const { error: signInError } = await supabase.auth.signInWithPassword({\n          email: trimmedEmail,\n          password: trimmedPassword,\n        })\n\n        if (signInError) throw signInError\n      }\n\n      // Ensure the server-side cookie session exists before any SSR pages run.\n      await syncServerSession()\n\n      // aktuellen User holen\n      const {\n        data: { user },\n        error: userError,\n      } = await supabase.auth.getUser()\n\n      if (userError) throw userError\n      if (!user) throw new Error('Kein Benutzerprofil gefunden.')\n\n      // Resolve role from auth metadata (metadata-only; no DB/RLS dependency)\n      const resolved = await resolveRole()\n      if (resolved.kind === 'unauthenticated') {\n        setError('Bitte einloggen.')\n        return\n      }\n\n      const role = resolved.kind === 'fallback_patient' ? 'patient' : resolved.value.role\n\n      const target = await resolvePostLoginRedirect(role)\n      if (!target) {\n        setError('Bitte einloggen.')\n        return\n      }\n\n      router.replace(target)\n    } catch (err: unknown) {\n      console.error(err)\n      const error = err as { message?: string; error_description?: string }\n      const message =\n        error?.message ??\n        error?.error_description ??\n        'Es ist ein unerwarteter Fehler aufgetreten.'\n      setError(message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const canSubmit =\n    email.trim() !== '' && password.trim() !== '' && !loading\n\n  return (\n    <main className=\"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900 px-4 py-10 transition-colors duration-150 relative\">\n      {/* Theme Toggle - Top Right */}\n      <div className=\"absolute top-4 right-4\">\n        <ThemeToggle size=\"md\" />\n      </div>\n      \n      <div className=\"w-full max-w-5xl flex flex-col md:flex-row items-stretch gap-8\">\n        {/* Left column: brand + copy */}\n        <div className=\"w-full md:w-[420px] rounded-3xl bg-white/80 dark:bg-slate-800/80 backdrop-blur p-8 shadow-lg transition-colors duration-150\">\n          <div className=\"space-y-4\">\n            <div>\n              <h1 className=\"text-4xl sm:text-5xl font-bold tracking-tight text-sky-600 dark:text-sky-400\">RHYTHM</h1>\n              <h2 className=\"text-xl sm:text-2xl font-semibold tracking-tight text-slate-900 dark:text-slate-100\">\n                Rhythmologicum Connect\n              </h2>\n            </div>\n            <p className=\"text-sm text-slate-600 dark:text-slate-300 leading-relaxed\">\n              Willkommen! Dieser Bereich dient dem sicheren Zugang zu Ihrem persönlichen\n              Stress- & Resilienz-Programm.\n            </p>\n            <p className=\"text-sm text-slate-600 dark:text-slate-300 leading-relaxed\">\n              Ihre Angaben werden vertraulich behandelt und ausschließlich zur Durchführung Ihrer\n              Stress- & Resilienz-Analyse genutzt.\n            </p>\n            <a\n              href=\"/datenschutz\"\n              className=\"inline-flex text-sm font-medium text-sky-700 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-300\"\n            >\n              Datenschutz & Datennutzung\n            </a>\n          </div>\n          {versionInfo && (\n            <div className=\"mt-6 pt-4 border-t border-slate-100 dark:border-slate-700 text-sm text-slate-500 dark:text-slate-400 space-y-1\">\n              <p>\n                Version: <span className=\"font-mono\">{versionInfo.commitHashShort}</span>\n              </p>\n              <p>\n                {new Date(versionInfo.commitDate).toLocaleString('de-DE', {\n                  year: 'numeric',\n                  month: '2-digit',\n                  day: '2-digit',\n                  hour: '2-digit',\n                  minute: '2-digit',\n                })}\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Right column: auth form */}\n        <div className=\"flex-1 rounded-3xl bg-white dark:bg-slate-800 p-8 shadow-lg transition-colors duration-150\">\n          {/* Tabs */}\n          <div className=\"mb-6 grid grid-cols-2 rounded-full bg-slate-100 dark:bg-slate-700 p-1 text-sm font-medium\">\n            <button\n              type=\"button\"\n              onClick={() => setMode('login')}\n              className={`rounded-full py-2 transition ${\n                mode === 'login'\n                  ? 'bg-white dark:bg-slate-600 shadow-sm text-slate-900 dark:text-slate-100'\n                  : 'text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200'\n              }`}\n            >\n              Einloggen\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setMode('signup')}\n              className={`rounded-full py-2 transition ${\n                mode === 'signup'\n                  ? 'bg-white dark:bg-slate-600 shadow-sm text-slate-900 dark:text-slate-100'\n                  : 'text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200'\n              }`}\n            >\n              Registrieren\n            </button>\n          </div>\n\n          {/* Formular */}\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* E-Mail */}\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1\">E-Mail</label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                required\n                autoComplete=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                inputSize=\"md\"\n              />\n            </div>\n\n            {/* Passwort */}\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1\">Passwort</label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                required\n                minLength={6}\n                autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                inputSize=\"md\"\n                helperText=\"Mindestens 6 Zeichen.\"\n              />\n            </div>\n\n            {/* Fehlermeldung */}\n            {error && (\n              <p className=\"text-sm text-red-600 bg-red-50 border border-red-100 rounded-lg px-3 py-2\">\n                {error}\n              </p>\n            )}\n\n            {/* Erfolgsmeldung (nur Signup) */}\n            {info && (\n              <p className=\"text-sm text-green-600 bg-green-50 border border-green-100 rounded-lg px-3 py-2\">\n                {info}\n              </p>\n            )}\n\n            {/* Submit */}\n            <button\n              type=\"submit\"\n              disabled={!canSubmit}\n              className=\"w-full rounded-xl bg-sky-600 dark:bg-sky-500 text-white px-4 py-2 font-semibold shadow-sm hover:bg-sky-700 dark:hover:bg-sky-600 disabled:opacity-60 transition\"\n            >\n              {loading\n                ? 'Bitte warten…'\n                : mode === 'signup'\n                ? 'Konto anlegen'\n                : 'Einloggen'}\n            </button>\n          </form>\n        </div>\n      </div>\n    </main>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}