{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/rhythmologicum-connect/rhythmologicum-connect/lib/env.ts"],"sourcesContent":["/**\n * Environment Variables Schema and Validation\n * \n * This file provides type-safe access to environment variables using Zod validation.\n * All environment variables MUST be accessed through this module to ensure:\n * 1. Type safety\n * 2. Runtime validation\n * 3. Clear documentation of required vs. optional variables\n * 4. Fail-fast behavior for missing required variables\n * \n * **IMPORTANT**: This file is protected by CODEOWNERS. Any changes require review.\n * \n * Usage:\n * ```typescript\n * import { env } from '@/lib/env'\n * \n * const supabaseUrl = env.NEXT_PUBLIC_SUPABASE_URL\n * const apiKey = env.ANTHROPIC_API_KEY // Can be undefined\n * ```\n */\n\nimport { z } from 'zod'\n\n// ============================================================\n// Environment Schema Definition\n// ============================================================\n\n// IMPORTANT:\n// - NEXT_PUBLIC_* vars can be read in both server + client bundles.\n// - Server-only secrets (e.g. SUPABASE_SERVICE_ROLE_KEY) must never be\n//   required/validated in the browser, otherwise production will crash.\nconst isServerRuntime = typeof window === 'undefined'\nconst isBuildTime = process.env.NEXT_PHASE === 'phase-production-build'\nconst isProdRuntime = process.env.NODE_ENV === 'production'\nconst requireServerSecrets = isServerRuntime && isProdRuntime && !isBuildTime\n\nfunction sanitizeEnvString(value: unknown) {\n  if (typeof value !== 'string') return value\n\n  let v = value.trim()\n\n  // Common deployment UI pitfall: values pasted with wrapping quotes/backticks.\n  // Remove exactly one wrapping pair to avoid breaking legitimate inner quotes.\n  const first = v[0]\n  const last = v[v.length - 1]\n  const isWrapped =\n    (first === '\"' && last === '\"') ||\n    (first === \"'\" && last === \"'\") ||\n    (first === '`' && last === '`')\n\n  if (isWrapped && v.length >= 2) {\n    v = v.slice(1, -1).trim()\n  }\n\n  return v\n}\n\nconst baseEnvSchema = z.object({\n  // Client-safe vars (may be inlined at build time by Next.js)\n  NEXT_PUBLIC_SUPABASE_URL: z.preprocess(sanitizeEnvString, z.string().url().optional()),\n  NEXT_PUBLIC_SUPABASE_ANON_KEY: z.preprocess(sanitizeEnvString, z.string().optional()),\n\n  // OPTIONAL: Review Queue Sampling\n  REVIEW_SAMPLING_PERCENTAGE: z.string().optional(),\n  REVIEW_SAMPLING_SALT: z.string().optional(),\n\n  // OPTIONAL: Feature Flags\n  NEXT_PUBLIC_FEATURE_AMY_ENABLED: z.string().optional(),\n  NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED: z.string().optional(),\n  NEXT_PUBLIC_FEATURE_CHARTS_ENABLED: z.string().optional(),\n\n  // OPTIONAL: E6.4.1 Pilot Feature Flags\n  NEXT_PUBLIC_PILOT_ENABLED: z.string().optional(),\n  NEXT_PUBLIC_PILOT_ENV: z.string().optional(),\n\n  // Node Environment\n  NODE_ENV: z.enum(['development', 'production', 'test']).optional(),\n  NEXT_PHASE: z.string().optional(),\n\n  // Hosting provider (optional)\n  VERCEL_ENV: z.string().optional(),\n\n  // OPTIONAL: Usage Telemetry Toggle\n  USAGE_TELEMETRY_ENABLED: z.string().optional(),\n})\n\nconst serverOnlyEnvSchema = baseEnvSchema.extend({\n  // OPTIONAL: Dev/Admin tooling feature flags\n  DEV_ENDPOINT_CATALOG: z.string().optional(),\n\n  // OPTIONAL: UI split routing (Package 2)\n  STUDIO_BASE_URL: z.preprocess(sanitizeEnvString, z.string().url().optional()),\n  PATIENT_BASE_URL: z.preprocess(sanitizeEnvString, z.string().url().optional()),\n  ENGINE_BASE_URL: z.preprocess(sanitizeEnvString, z.string().url().optional()),\n\n  // OPTIONAL: E6.4.1 Pilot Allowlists (server-only)\n  PILOT_ORG_ALLOWLIST: z.string().optional(),\n  PILOT_USER_ALLOWLIST: z.string().optional(),\n\n  // REQUIRED (server runtime only): Supabase Admin\n  SUPABASE_SERVICE_ROLE_KEY: requireServerSecrets\n    ? z.preprocess(\n        sanitizeEnvString,\n        z.string().min(1, 'SUPABASE_SERVICE_ROLE_KEY is required'),\n      )\n    : z.preprocess(sanitizeEnvString, z.string().optional()),\n\n  // OPTIONAL: Anthropic AI Configuration\n  ANTHROPIC_API_KEY: z.string().optional(),\n  ANTHROPIC_API_TOKEN: z.string().optional(), // Legacy support\n  ANTHROPIC_MODEL: z.string().optional(),\n\n  // OPTIONAL: Legacy/Alternative Variable Names\n  SUPABASE_URL: z.preprocess(sanitizeEnvString, z.string().url().optional()), // Alternative to NEXT_PUBLIC_SUPABASE_URL\n  SUPABASE_SERVICE_KEY: z.preprocess(sanitizeEnvString, z.string().optional()), // Alternative to SUPABASE_SERVICE_ROLE_KEY\n})\n\nconst patientEnvSchema = baseEnvSchema.extend({\n  NEXT_PUBLIC_SUPABASE_URL: z.preprocess(\n    sanitizeEnvString,\n    z.string().url('NEXT_PUBLIC_SUPABASE_URL is required'),\n  ),\n  NEXT_PUBLIC_SUPABASE_ANON_KEY: z.preprocess(\n    sanitizeEnvString,\n    z.string().min(1, 'NEXT_PUBLIC_SUPABASE_ANON_KEY is required'),\n  ),\n  ENGINE_BASE_URL: z.preprocess(sanitizeEnvString, z.string().url('ENGINE_BASE_URL is required')),\n})\n\nconst studioEnvSchema = baseEnvSchema.extend({\n  NEXT_PUBLIC_SUPABASE_URL: z.preprocess(\n    sanitizeEnvString,\n    z.string().url('NEXT_PUBLIC_SUPABASE_URL is required'),\n  ),\n  NEXT_PUBLIC_SUPABASE_ANON_KEY: z.preprocess(\n    sanitizeEnvString,\n    z.string().min(1, 'NEXT_PUBLIC_SUPABASE_ANON_KEY is required'),\n  ),\n})\n\nconst engineEnvSchema = serverOnlyEnvSchema.extend({\n  NEXT_PUBLIC_SUPABASE_URL: z.preprocess(\n    sanitizeEnvString,\n    z.string().url('NEXT_PUBLIC_SUPABASE_URL is required'),\n  ),\n  NEXT_PUBLIC_SUPABASE_ANON_KEY: z.preprocess(\n    sanitizeEnvString,\n    z.string().min(1, 'NEXT_PUBLIC_SUPABASE_ANON_KEY is required'),\n  ),\n})\n\nexport type PatientEnv = z.infer<typeof patientEnvSchema>\nexport type StudioEnv = z.infer<typeof studioEnvSchema>\nexport type BaseEnv = Partial<Env>\nexport type EngineEnv = z.infer<typeof engineEnvSchema>\n\nfunction getRawClientEnv() {\n  return {\n    NEXT_PUBLIC_SUPABASE_URL: process.env.NEXT_PUBLIC_SUPABASE_URL,\n    NEXT_PUBLIC_SUPABASE_ANON_KEY: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n    REVIEW_SAMPLING_PERCENTAGE: process.env.REVIEW_SAMPLING_PERCENTAGE,\n    REVIEW_SAMPLING_SALT: process.env.REVIEW_SAMPLING_SALT,\n    NEXT_PUBLIC_FEATURE_AMY_ENABLED: process.env.NEXT_PUBLIC_FEATURE_AMY_ENABLED,\n    NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED:\n      process.env.NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED,\n    NEXT_PUBLIC_FEATURE_CHARTS_ENABLED: process.env.NEXT_PUBLIC_FEATURE_CHARTS_ENABLED,\n    NEXT_PUBLIC_PILOT_ENABLED: process.env.NEXT_PUBLIC_PILOT_ENABLED,\n    NEXT_PUBLIC_PILOT_ENV: process.env.NEXT_PUBLIC_PILOT_ENV,\n    NODE_ENV: process.env.NODE_ENV,\n    NEXT_PHASE: process.env.NEXT_PHASE,\n    VERCEL_ENV: process.env.VERCEL_ENV,\n    USAGE_TELEMETRY_ENABLED: process.env.USAGE_TELEMETRY_ENABLED,\n  }\n}\n\nfunction getRawServerEnv() {\n  return {\n    DEV_ENDPOINT_CATALOG: process.env.DEV_ENDPOINT_CATALOG,\n    STUDIO_BASE_URL: process.env.STUDIO_BASE_URL,\n    PATIENT_BASE_URL: process.env.PATIENT_BASE_URL,\n    ENGINE_BASE_URL: process.env.ENGINE_BASE_URL,\n    PILOT_ORG_ALLOWLIST: process.env.PILOT_ORG_ALLOWLIST,\n    PILOT_USER_ALLOWLIST: process.env.PILOT_USER_ALLOWLIST,\n    SUPABASE_SERVICE_ROLE_KEY: process.env.SUPABASE_SERVICE_ROLE_KEY,\n    ANTHROPIC_API_KEY: process.env.ANTHROPIC_API_KEY,\n    ANTHROPIC_API_TOKEN: process.env.ANTHROPIC_API_TOKEN,\n    ANTHROPIC_MODEL: process.env.ANTHROPIC_MODEL,\n    SUPABASE_URL: process.env.SUPABASE_URL,\n    SUPABASE_SERVICE_KEY: process.env.SUPABASE_SERVICE_KEY,\n  }\n}\n\n// ============================================================\n// Validated Environment Variables\n// ============================================================\n\n/**\n * Type of the validated environment object\n * Note: Required fields are guaranteed to be strings (never undefined)\n */\nexport type Env = {\n  NEXT_PUBLIC_SUPABASE_URL: string\n  NEXT_PUBLIC_SUPABASE_ANON_KEY: string\n  SUPABASE_SERVICE_ROLE_KEY: string\n  ANTHROPIC_API_KEY?: string\n  ANTHROPIC_API_TOKEN?: string\n  ANTHROPIC_MODEL?: string\n  REVIEW_SAMPLING_PERCENTAGE?: string\n  REVIEW_SAMPLING_SALT?: string\n  NEXT_PUBLIC_FEATURE_AMY_ENABLED?: string\n  NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED?: string\n  NEXT_PUBLIC_FEATURE_CHARTS_ENABLED?: string\n  NEXT_PUBLIC_PILOT_ENABLED?: string\n  NEXT_PUBLIC_PILOT_ENV?: string\n  PILOT_ORG_ALLOWLIST?: string\n  PILOT_USER_ALLOWLIST?: string\n  SUPABASE_URL?: string\n  SUPABASE_SERVICE_KEY?: string\n  NODE_ENV?: 'development' | 'production' | 'test'\n  NEXT_PHASE?: string\n  VERCEL_ENV?: string\n  USAGE_TELEMETRY_ENABLED?: string\n\n  // Dev/admin tooling\n  DEV_ENDPOINT_CATALOG?: string\n  STUDIO_BASE_URL?: string\n  PATIENT_BASE_URL?: string\n  ENGINE_BASE_URL?: string\n}\n\n/**\n * Get default environment values for development/build time\n */\nfunction getDefaultEnv(): Env {\n  return {\n    NEXT_PUBLIC_SUPABASE_URL: process.env.NEXT_PUBLIC_SUPABASE_URL || process.env.SUPABASE_URL || '',\n    NEXT_PUBLIC_SUPABASE_ANON_KEY: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '',\n    SUPABASE_SERVICE_ROLE_KEY:\n      process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_SERVICE_KEY || '',\n    ANTHROPIC_API_KEY: process.env.ANTHROPIC_API_KEY || process.env.ANTHROPIC_API_TOKEN,\n    ANTHROPIC_API_TOKEN: process.env.ANTHROPIC_API_TOKEN,\n    ANTHROPIC_MODEL: process.env.ANTHROPIC_MODEL,\n    REVIEW_SAMPLING_PERCENTAGE: process.env.REVIEW_SAMPLING_PERCENTAGE,\n    REVIEW_SAMPLING_SALT: process.env.REVIEW_SAMPLING_SALT,\n    NEXT_PUBLIC_FEATURE_AMY_ENABLED: process.env.NEXT_PUBLIC_FEATURE_AMY_ENABLED,\n    NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED: process.env.NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED,\n    NEXT_PUBLIC_FEATURE_CHARTS_ENABLED: process.env.NEXT_PUBLIC_FEATURE_CHARTS_ENABLED,\n    NEXT_PUBLIC_PILOT_ENABLED: process.env.NEXT_PUBLIC_PILOT_ENABLED,\n    NEXT_PUBLIC_PILOT_ENV: process.env.NEXT_PUBLIC_PILOT_ENV,\n    PILOT_ORG_ALLOWLIST: process.env.PILOT_ORG_ALLOWLIST,\n    PILOT_USER_ALLOWLIST: process.env.PILOT_USER_ALLOWLIST,\n    SUPABASE_URL: process.env.SUPABASE_URL,\n    SUPABASE_SERVICE_KEY: process.env.SUPABASE_SERVICE_KEY,\n    NODE_ENV: process.env.NODE_ENV as 'development' | 'production' | 'test' | undefined,\n    NEXT_PHASE: process.env.NEXT_PHASE,\n    VERCEL_ENV: process.env.VERCEL_ENV,\n    USAGE_TELEMETRY_ENABLED: process.env.USAGE_TELEMETRY_ENABLED,\n    DEV_ENDPOINT_CATALOG: process.env.DEV_ENDPOINT_CATALOG,\n    STUDIO_BASE_URL: process.env.STUDIO_BASE_URL,\n    PATIENT_BASE_URL: process.env.PATIENT_BASE_URL,\n    ENGINE_BASE_URL: process.env.ENGINE_BASE_URL,\n  }\n}\n\nfunction getMissingEnvKeys(issues: z.ZodIssue[]): string[] {\n  const keys = new Set<string>()\n  issues.forEach((issue) => {\n    const pathKey = issue.path[0]\n    if (typeof pathKey === 'string') {\n      keys.add(pathKey)\n    }\n  })\n  return Array.from(keys)\n}\n\ntype ParseOptions = {\n  strict?: boolean\n  scope?: string\n}\n\nfunction parseScopedEnv<T extends z.ZodTypeAny>(schema: T, options: ParseOptions = {}): z.infer<T> {\n  const rawEnv = isServerRuntime\n    ? { ...getRawClientEnv(), ...getRawServerEnv() }\n    : getRawClientEnv()\n\n  try {\n    const parsed = schema.parse(rawEnv) as Env\n    return {\n      NEXT_PUBLIC_SUPABASE_URL: parsed.NEXT_PUBLIC_SUPABASE_URL || parsed.SUPABASE_URL || '',\n      NEXT_PUBLIC_SUPABASE_ANON_KEY: parsed.NEXT_PUBLIC_SUPABASE_ANON_KEY || '',\n      SUPABASE_SERVICE_ROLE_KEY: parsed.SUPABASE_SERVICE_ROLE_KEY || parsed.SUPABASE_SERVICE_KEY || '',\n      ANTHROPIC_API_KEY: parsed.ANTHROPIC_API_KEY || parsed.ANTHROPIC_API_TOKEN,\n      ANTHROPIC_API_TOKEN: parsed.ANTHROPIC_API_TOKEN,\n      ANTHROPIC_MODEL: parsed.ANTHROPIC_MODEL,\n      REVIEW_SAMPLING_PERCENTAGE: parsed.REVIEW_SAMPLING_PERCENTAGE,\n      REVIEW_SAMPLING_SALT: parsed.REVIEW_SAMPLING_SALT,\n      NEXT_PUBLIC_FEATURE_AMY_ENABLED: parsed.NEXT_PUBLIC_FEATURE_AMY_ENABLED,\n      NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED:\n        parsed.NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED,\n      NEXT_PUBLIC_FEATURE_CHARTS_ENABLED: parsed.NEXT_PUBLIC_FEATURE_CHARTS_ENABLED,\n      NEXT_PUBLIC_PILOT_ENABLED: parsed.NEXT_PUBLIC_PILOT_ENABLED,\n      NEXT_PUBLIC_PILOT_ENV: parsed.NEXT_PUBLIC_PILOT_ENV,\n      PILOT_ORG_ALLOWLIST: parsed.PILOT_ORG_ALLOWLIST,\n      PILOT_USER_ALLOWLIST: parsed.PILOT_USER_ALLOWLIST,\n      SUPABASE_URL: parsed.SUPABASE_URL,\n      SUPABASE_SERVICE_KEY: parsed.SUPABASE_SERVICE_KEY,\n      NODE_ENV: parsed.NODE_ENV,\n      NEXT_PHASE: parsed.NEXT_PHASE,\n      VERCEL_ENV: parsed.VERCEL_ENV,\n      USAGE_TELEMETRY_ENABLED: parsed.USAGE_TELEMETRY_ENABLED,\n      DEV_ENDPOINT_CATALOG: parsed.DEV_ENDPOINT_CATALOG,\n      STUDIO_BASE_URL: parsed.STUDIO_BASE_URL,\n      PATIENT_BASE_URL: parsed.PATIENT_BASE_URL,\n      ENGINE_BASE_URL: parsed.ENGINE_BASE_URL,\n    } as z.infer<T>\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      const missingKeys = getMissingEnvKeys(error.issues)\n      const message = missingKeys.length\n        ? `Missing env: ${missingKeys.join(', ')}`\n        : 'Invalid environment variables'\n\n      console.error('❌ Environment variable validation failed:')\n      console.error(error.issues.map((e) => `  - ${e.path.join('.')}: ${e.message}`).join('\\n'))\n\n      // During build, allow with defaults\n      if (isBuildTime) {\n        console.warn('⚠️  Build time: Continuing with default values')\n        return getDefaultEnv() as z.infer<T>\n      }\n\n      if (options.strict && isServerRuntime) {\n        throw new Error(message)\n      }\n\n      // In development or non-strict mode, warn but allow build to continue with default values\n      console.warn(\n        `⚠️  Continuing with default values for ${options.scope ?? 'base'} environment`,\n      )\n      return getDefaultEnv() as z.infer<T>\n    }\n    throw error\n  }\n}\n\n/**\n * Parse and validate environment variables\n * This will not throw in base mode to avoid import-time crashes\n */\nfunction parseEnv(): BaseEnv {\n  const schema = isServerRuntime ? serverOnlyEnvSchema : baseEnvSchema\n  return parseScopedEnv(schema, { strict: false, scope: 'base' }) as BaseEnv\n}\n\n/**\n * Validated and type-safe environment variables\n * Access all environment variables through this object\n */\nlet cachedEnv: BaseEnv | null = null\n\nexport function getEnv(): BaseEnv {\n  if (!cachedEnv) {\n    cachedEnv = parseEnv()\n  }\n  return cachedEnv\n}\n\nexport function getPatientEnv(): PatientEnv {\n  return parseScopedEnv(patientEnvSchema, { strict: true, scope: 'patient' })\n}\n\nexport function getStudioEnv(): StudioEnv {\n  return parseScopedEnv(studioEnvSchema, { strict: true, scope: 'studio' })\n}\n\nexport function getEngineEnv(): EngineEnv {\n  return parseScopedEnv(engineEnvSchema, { strict: true, scope: 'engine' })\n}\n\nexport const env = new Proxy({} as BaseEnv, {\n  get(_target, prop) {\n    return getEnv()[prop as keyof Env]\n  },\n  set(_target, prop, value) {\n    const current = getEnv()\n    ;(current as Record<string, unknown>)[prop as string] = value\n    return true\n  },\n})\n\n/**\n * Server-runtime feature flags.\n *\n * Note: Jest runs API route unit tests in a jsdom environment (window defined),\n * but API routes are still server code. Do NOT rely on `env` for server-only\n * flags in those tests.\n */\nexport function isDevEndpointCatalogEnabled(): boolean {\n  return process.env.DEV_ENDPOINT_CATALOG === '1'\n}\n\n/**\n * Helper function to check if we're in production\n */\nexport function isProduction(): boolean {\n  return env.NODE_ENV === 'production'\n}\n\n/**\n * Helper function to check if we're in development\n */\nexport function isDevelopment(): boolean {\n  return env.NODE_ENV === 'development' || !env.NODE_ENV\n}\n\n/**\n * Helper function to check if we're in test mode\n */\nexport function isTest(): boolean {\n  return env.NODE_ENV === 'test'\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/rhythmologicum-connect/rhythmologicum-connect/lib/featureFlags.ts"],"sourcesContent":["/**\n * Feature Flags Configuration\n * \n * Centralized feature flag management for the application.\n * Flags can be controlled via environment variables (NEXT_PUBLIC_FEATURE_*).\n * \n * Environment variables:\n * - NEXT_PUBLIC_FEATURE_AMY_ENABLED: Enable/disable AMY AI assistant (default: true)\n * - NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED: Enable/disable clinician dashboard (default: true)\n * - NEXT_PUBLIC_FEATURE_CHARTS_ENABLED: Enable/disable charts in clinician views (default: true)\n */\n\nimport { env } from '@/lib/env'\n\nexport type FeatureFlags = {\n  AMY_ENABLED: boolean\n  CLINICIAN_DASHBOARD_ENABLED: boolean\n  CHARTS_ENABLED: boolean\n}\n\n/**\n * Parse environment variable to boolean\n * Supports: 'true', '1', 'yes' (case-insensitive) = true\n * Everything else or undefined = uses default value\n */\nexport function parseEnvBoolean(value: string | undefined, defaultValue: boolean): boolean {\n  if (value === undefined) {\n    return defaultValue\n  }\n  const normalized = value.toLowerCase().trim()\n  return normalized === 'true' || normalized === '1' || normalized === 'yes'\n}\n\n/**\n * Feature flags configuration\n * All flags default to true to maintain backward compatibility\n */\nexport const featureFlags: FeatureFlags = {\n  AMY_ENABLED: parseEnvBoolean(\n    env.NEXT_PUBLIC_FEATURE_AMY_ENABLED,\n    true\n  ),\n  CLINICIAN_DASHBOARD_ENABLED: parseEnvBoolean(\n    env.NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED,\n    true\n  ),\n  CHARTS_ENABLED: parseEnvBoolean(\n    env.NEXT_PUBLIC_FEATURE_CHARTS_ENABLED,\n    true\n  ),\n}\n\n/**\n * Check if a specific feature is enabled\n */\nexport function isFeatureEnabled(feature: keyof FeatureFlags): boolean {\n  return featureFlags[feature]\n}\n\n/**\n * Get all feature flags as an object (useful for debugging)\n */\nexport function getAllFeatureFlags(): FeatureFlags {\n  return { ...featureFlags }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;;;;;;CAUC,GAED;;AAaO,SAAS,gBAAgB,KAAyB,EAAE,YAAqB;IAC9E,IAAI,UAAU,WAAW;QACvB,OAAO;IACT;IACA,MAAM,aAAa,MAAM,WAAW,GAAG,IAAI;IAC3C,OAAO,eAAe,UAAU,eAAe,OAAO,eAAe;AACvE;AAMO,MAAM,eAA6B;IACxC,aAAa,gBACX,iHAAG,CAAC,+BAA+B,EACnC;IAEF,6BAA6B,gBAC3B,iHAAG,CAAC,+CAA+C,EACnD;IAEF,gBAAgB,gBACd,iHAAG,CAAC,kCAAkC,EACtC;AAEJ;AAKO,SAAS,iBAAiB,OAA2B;IAC1D,OAAO,YAAY,CAAC,QAAQ;AAC9B;AAKO,SAAS;IACd,OAAO;QAAE,GAAG,YAAY;IAAC;AAC3B"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/rhythmologicum-connect/rhythmologicum-connect/proxy.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\nimport { createServerClient } from '@supabase/ssr'\nimport { parseEnvBoolean } from '@/lib/featureFlags'\nimport { getEngineEnv } from '@/lib/env'\n\n// Check if clinician dashboard feature is enabled\nfunction isClinicianDashboardEnabled(): boolean {\n  return parseEnvBoolean(process.env.NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED, true)\n}\n\n// Log unauthorized access attempts\nasync function logUnauthorizedAccess(path: string, userId?: string, reason?: string) {\n  console.warn('[AUTH] Unauthorized access attempt:', {\n    path,\n    userId: userId || 'anonymous',\n    reason: reason || 'unknown',\n    timestamp: new Date().toISOString(),\n  })\n}\n\nexport async function proxy(request: NextRequest) {\n  const engineEnv = getEngineEnv()\n  const { pathname } = request.nextUrl\n\n  // Only protect /clinician and /admin routes\n  if (!pathname.startsWith('/clinician') && !pathname.startsWith('/admin')) {\n    return NextResponse.next()\n  }\n\n  // Check if clinician dashboard feature is enabled\n  if (!isClinicianDashboardEnabled()) {\n    console.log('[AUTH] Clinician dashboard feature is disabled')\n\n    const redirectUrl = new URL('/', request.url)\n    redirectUrl.searchParams.set('error', 'feature_disabled')\n    redirectUrl.searchParams.set('message', 'Das Kliniker-Dashboard ist derzeit nicht verfügbar.')\n    return NextResponse.redirect(redirectUrl)\n  }\n\n  let response = NextResponse.next({ request })\n\n  const supabase = createServerClient(\n    engineEnv.NEXT_PUBLIC_SUPABASE_URL,\n    engineEnv.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n    {\n      cookies: {\n        getAll() {\n          return request.cookies.getAll()\n        },\n        setAll(cookiesToSet) {\n          cookiesToSet.forEach(({ name, value }) => request.cookies.set(name, value))\n          response = NextResponse.next({ request })\n          cookiesToSet.forEach(({ name, value, options }) => response.cookies.set(name, value, options))\n        },\n      },\n    },\n  )\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  // User is not authenticated\n  if (!user) {\n    await logUnauthorizedAccess(pathname, undefined, 'not_authenticated')\n\n    const redirectUrl = new URL('/', request.url)\n    redirectUrl.searchParams.set('error', 'authentication_required')\n    redirectUrl.searchParams.set('message', 'Bitte melden Sie sich an, um fortzufahren.')\n    return NextResponse.redirect(redirectUrl)\n  }\n\n  const role = user.app_metadata?.role || user.user_metadata?.role\n\n  // Allow access for clinician and admin roles\n  // Currently, clinicians have admin access to /admin/* routes\n  const hasAccess = role === 'clinician' || role === 'admin'\n  \n  if (!hasAccess) {\n    await logUnauthorizedAccess(pathname, user.id, 'insufficient_permissions')\n\n    const redirectUrl = new URL('/', request.url)\n    redirectUrl.searchParams.set('error', 'access_denied')\n    redirectUrl.searchParams.set(\n      'message',\n      'Sie haben keine Berechtigung, auf diesen Bereich zuzugreifen.',\n    )\n    return NextResponse.redirect(redirectUrl)\n  }\n\n  return response\n}\n\nexport const config = {\n  matcher: ['/clinician/:path*', '/admin/:path*'],\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAEA;AAAA;AACA;AACA;;;;;AAEA,kDAAkD;AAClD,SAAS;IACP,OAAO,IAAA,sIAAe,EAAC,QAAQ,GAAG,CAAC,+CAA+C,EAAE;AACtF;AAEA,mCAAmC;AACnC,eAAe,sBAAsB,IAAY,EAAE,MAAe,EAAE,MAAe;IACjF,QAAQ,IAAI,CAAC,uCAAuC;QAClD;QACA,QAAQ,UAAU;QAClB,QAAQ,UAAU;QAClB,WAAW,IAAI,OAAO,WAAW;IACnC;AACF;AAEO,eAAe,MAAM,OAAoB;IAC9C,MAAM,YAAY,IAAA,0HAAY;IAC9B,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,4CAA4C;IAC5C,IAAI,CAAC,SAAS,UAAU,CAAC,iBAAiB,CAAC,SAAS,UAAU,CAAC,WAAW;QACxE,OAAO,8IAAY,CAAC,IAAI;IAC1B;IAEA,kDAAkD;IAClD,IAAI,CAAC,+BAA+B;QAClC,QAAQ,GAAG,CAAC;QAEZ,MAAM,cAAc,IAAI,IAAI,KAAK,QAAQ,GAAG;QAC5C,YAAY,YAAY,CAAC,GAAG,CAAC,SAAS;QACtC,YAAY,YAAY,CAAC,GAAG,CAAC,WAAW;QACxC,OAAO,8IAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,IAAI,WAAW,8IAAY,CAAC,IAAI,CAAC;QAAE;IAAQ;IAE3C,MAAM,WAAW,IAAA,+LAAkB,EACjC,UAAU,wBAAwB,EAClC,UAAU,6BAA6B,EACvC;QACE,SAAS;YACP;gBACE,OAAO,QAAQ,OAAO,CAAC,MAAM;YAC/B;YACA,QAAO,YAAY;gBACjB,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,GAAK,QAAQ,OAAO,CAAC,GAAG,CAAC,MAAM;gBACpE,WAAW,8IAAY,CAAC,IAAI,CAAC;oBAAE;gBAAQ;gBACvC,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,SAAS,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;YACvF;QACF;IACF;IAGF,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,4BAA4B;IAC5B,IAAI,CAAC,MAAM;QACT,MAAM,sBAAsB,UAAU,WAAW;QAEjD,MAAM,cAAc,IAAI,IAAI,KAAK,QAAQ,GAAG;QAC5C,YAAY,YAAY,CAAC,GAAG,CAAC,SAAS;QACtC,YAAY,YAAY,CAAC,GAAG,CAAC,WAAW;QACxC,OAAO,8IAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,MAAM,OAAO,KAAK,YAAY,EAAE,QAAQ,KAAK,aAAa,EAAE;IAE5D,6CAA6C;IAC7C,6DAA6D;IAC7D,MAAM,YAAY,SAAS,eAAe,SAAS;IAEnD,IAAI,CAAC,WAAW;QACd,MAAM,sBAAsB,UAAU,KAAK,EAAE,EAAE;QAE/C,MAAM,cAAc,IAAI,IAAI,KAAK,QAAQ,GAAG;QAC5C,YAAY,YAAY,CAAC,GAAG,CAAC,SAAS;QACtC,YAAY,YAAY,CAAC,GAAG,CAC1B,WACA;QAEF,OAAO,8IAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAqB;KAAgB;AACjD"}}]
}