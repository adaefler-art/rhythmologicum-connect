{"version":3,"sources":["../../../../../../apps/rhythm-studio-ui/app/clinician/shipments/page.tsx","../../../../../../lib/contracts/shipment.ts","../../../../../../apps/rhythm-studio-ui/app/clinician/shipments/ShipmentCreateDialog.tsx","../../../../../../apps/rhythm-studio-ui/app/clinician/shipments/ShipmentDetailDialog.tsx"],"sourcesContent":["'use client'\n\n/**\n * Shipments Management Page - V05-I08.3\n * \n * Clinician interface for managing device shipments\n * - View shipment list with status badges\n * - Create new shipments\n * - Update shipment status and tracking\n * - View shipment history and events\n * - Send manual reminders\n */\n\nimport { useEffect, useState, useCallback } from 'react'\nimport { Button, Card, Table, LoadingSpinner, ErrorState, Badge } from '@/lib/ui'\nimport type { TableColumn } from '@/lib/ui/Table'\nimport {\n  Package,\n  Plus,\n  Bell,\n  AlertCircle,\n  Filter,\n  RefreshCw,\n} from 'lucide-react'\nimport {\n  type DeviceShipment,\n  SHIPMENT_STATUS,\n  ShipmentStatus,\n  getShipmentStatusLabel,\n  getShipmentStatusColor,\n  isShipmentOverdue,\n} from '@/lib/contracts/shipment'\nimport ShipmentCreateDialog from './ShipmentCreateDialog'\nimport ShipmentDetailDialog from './ShipmentDetailDialog'\n\ntype ShipmentWithPatient = DeviceShipment & {\n  patient_profiles: {\n    id: string\n    full_name: string | null\n    user_id: string\n  } | null\n}\n\nexport default function ShipmentsPage() {\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [shipments, setShipments] = useState<ShipmentWithPatient[]>([])\n  const [showCreateDialog, setShowCreateDialog] = useState(false)\n  const [selectedShipment, setSelectedShipment] = useState<ShipmentWithPatient | null>(null)\n  const [statusFilter, setStatusFilter] = useState<ShipmentStatus | 'all'>('all')\n  const [overdueOnly, setOverdueOnly] = useState(false)\n\n  const loadShipments = useCallback(async () => {\n    try {\n      setLoading(true)\n      setError(null)\n\n      // Build query params\n      const params = new URLSearchParams()\n      if (statusFilter !== 'all') {\n        params.append('status', statusFilter)\n      }\n      if (overdueOnly) {\n        params.append('needs_reminder', 'true')\n      }\n\n      const response = await fetch(`/api/shipments?${params.toString()}`)\n      const result = await response.json()\n\n      if (!response.ok) {\n        throw new Error(result.error?.message || 'Fehler beim Laden der Sendungen')\n      }\n\n      setShipments(result.data ?? [])\n    } catch (e: unknown) {\n      console.error('Failed to load shipments:', e)\n      const errorMessage = e instanceof Error ? e.message : 'Fehler beim Laden der Sendungen.'\n      setError(errorMessage)\n    } finally {\n      setLoading(false)\n    }\n  }, [statusFilter, overdueOnly])\n\n  useEffect(() => {\n    loadShipments()\n  }, [loadShipments])\n\n  const handleShipmentCreated = useCallback(() => {\n    setShowCreateDialog(false)\n    loadShipments()\n  }, [loadShipments])\n\n  const handleShipmentUpdated = useCallback(() => {\n    setSelectedShipment(null)\n    loadShipments()\n  }, [loadShipments])\n\n  const columns: TableColumn<ShipmentWithPatient>[] = [\n    {\n      header: 'Patient:in',\n      accessor: (shipment) => (\n        <span className=\"font-medium\">\n          {shipment.patient_profiles?.full_name ||\n            shipment.patient_profiles?.user_id ||\n            'Unbekannt'}\n        </span>\n      ),\n    },\n    {\n      header: 'Gerät',\n      accessor: (shipment) => <span className=\"text-sm\">{shipment.device_type}</span>,\n    },\n    {\n      header: 'Status',\n      accessor: (shipment) => {\n        const isOverdue = isShipmentOverdue(shipment)\n        return (\n          <div className=\"flex items-center gap-2\">\n            <Badge className={getShipmentStatusColor(shipment.status)}>\n              {getShipmentStatusLabel(shipment.status)}\n            </Badge>\n            {isOverdue && (\n              <span title=\"Überfällig\" className=\"inline-flex\">\n                <AlertCircle className=\"w-4 h-4 text-orange-500\" />\n              </span>\n            )}\n          </div>\n        )\n      },\n    },\n    {\n      header: 'Tracking-Nr.',\n      accessor: (shipment) => (\n        <span className=\"text-sm font-mono\">\n          {shipment.tracking_number || <span className=\"text-slate-400\">—</span>}\n        </span>\n      ),\n    },\n    {\n      header: 'Erwartete Lieferung',\n      accessor: (shipment) => {\n        const date = shipment.expected_delivery_at\n        if (!date) return <span className=\"text-slate-400\">—</span>\n        const deliveryDate = new Date(date)\n        const isOverdue = deliveryDate < new Date()\n        return (\n          <span className={isOverdue ? 'text-orange-600 font-medium' : 'text-sm'}>\n            {deliveryDate.toLocaleDateString('de-DE')}\n          </span>\n        )\n      },\n    },\n    {\n      header: 'Erinnerungen',\n      accessor: (shipment) => (\n        <div className=\"flex items-center gap-1\">\n          <Bell className=\"w-4 h-4 text-slate-400\" />\n          <span className=\"text-sm\">{shipment.reminder_count || 0}</span>\n        </div>\n      ),\n    },\n    {\n      header: 'Erstellt am',\n      accessor: (shipment) => (\n        <span className=\"text-sm text-slate-600 dark:text-slate-400\">\n          {new Date(shipment.created_at).toLocaleDateString('de-DE')}\n        </span>\n      ),\n    },\n  ]\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\n            <Package className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-bold text-slate-900 dark:text-slate-50\">\n              Geräteversand\n            </h1>\n            <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n              Versandstatus verwalten und Erinnerungen senden\n            </p>\n          </div>\n        </div>\n        <Button onClick={() => setShowCreateDialog(true)} icon={<Plus className=\"w-4 h-4\" />}>\n          Neue Sendung\n        </Button>\n      </div>\n\n      {/* Filters */}\n      <Card className=\"mb-6 p-4\">\n        <div className=\"flex items-center gap-4 flex-wrap\">\n          <div className=\"flex items-center gap-2\">\n            <Filter className=\"w-4 h-4 text-slate-500\" />\n            <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\n              Status:\n            </label>\n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value as ShipmentStatus | 'all')}\n              className=\"px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-sm\"\n            >\n              <option value=\"all\">Alle</option>\n              <option value={SHIPMENT_STATUS.ORDERED}>Bestellt</option>\n              <option value={SHIPMENT_STATUS.SHIPPED}>Versendet</option>\n              <option value={SHIPMENT_STATUS.IN_TRANSIT}>Unterwegs</option>\n              <option value={SHIPMENT_STATUS.DELIVERED}>Zugestellt</option>\n              <option value={SHIPMENT_STATUS.RETURNED}>Zurückgesendet</option>\n              <option value={SHIPMENT_STATUS.CANCELLED}>Storniert</option>\n            </select>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <input\n              type=\"checkbox\"\n              id=\"overdueOnly\"\n              checked={overdueOnly}\n              onChange={(e) => setOverdueOnly(e.target.checked)}\n              className=\"rounded border-slate-300 text-blue-600 focus:ring-blue-500\"\n            />\n            <label\n              htmlFor=\"overdueOnly\"\n              className=\"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer\"\n            >\n              Nur überfällige Sendungen\n            </label>\n          </div>\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={loadShipments}\n            icon={<RefreshCw className=\"w-4 h-4\" />}\n          >\n            Aktualisieren\n          </Button>\n        </div>\n      </Card>\n\n      {/* Shipments Table */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <LoadingSpinner size=\"lg\" />\n        </div>\n      ) : error ? (\n        <ErrorState\n          title=\"Fehler beim Laden\"\n          message={error}\n          retryText=\"Erneut versuchen\"\n          onRetry={() => {\n            void loadShipments()\n          }}\n        />\n      ) : shipments.length === 0 ? (\n        <Card className=\"p-12 text-center\">\n          <Package className=\"w-12 h-12 text-slate-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-slate-900 dark:text-slate-50 mb-2\">\n            Keine Sendungen vorhanden\n          </h3>\n          <p className=\"text-slate-600 dark:text-slate-400 mb-6\">\n            {statusFilter !== 'all' || overdueOnly\n              ? 'Keine Sendungen entsprechen den Filterkriterien.'\n              : 'Erstellen Sie eine neue Sendung, um zu beginnen.'}\n          </p>\n          <Button onClick={() => setShowCreateDialog(true)} icon={<Plus className=\"w-4 h-4\" />}>\n            Neue Sendung erstellen\n          </Button>\n        </Card>\n      ) : (\n        <Card>\n          <Table\n            data={shipments}\n            columns={columns}\n            onRowClick={(shipment) => setSelectedShipment(shipment)}\n            className=\"cursor-pointer\"\n          />\n          <div className=\"px-6 py-4 border-t border-slate-200 dark:border-slate-700\">\n            <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n              {shipments.length} {shipments.length === 1 ? 'Sendung' : 'Sendungen'} angezeigt\n            </p>\n          </div>\n        </Card>\n      )}\n\n      {/* Dialogs */}\n      {showCreateDialog && (\n        <ShipmentCreateDialog\n          onClose={() => setShowCreateDialog(false)}\n          onShipmentCreated={handleShipmentCreated}\n        />\n      )}\n\n      {selectedShipment && (\n        <ShipmentDetailDialog\n          shipment={selectedShipment}\n          onClose={() => setSelectedShipment(null)}\n          onShipmentUpdated={handleShipmentUpdated}\n        />\n      )}\n    </div>\n  )\n}\n","/**\n * Shipment Contract - V05-I08.3\n * \n * Defines the schema for device shipment tracking with return and reminder management.\n * \n * Key guarantees:\n * - Complete lifecycle tracking: ordered → shipped → in_transit → delivered → returned\n * - Return tracking with separate tracking numbers\n * - Reminder management for overdue shipments\n * - Event log for full audit trail\n * \n * @module lib/contracts/shipment\n */\n\nimport { z } from 'zod'\n\n// ============================================================\n// Shipment Status\n// ============================================================\n\nexport const SHIPMENT_STATUS = {\n  ORDERED: 'ordered',\n  SHIPPED: 'shipped',\n  IN_TRANSIT: 'in_transit',\n  DELIVERED: 'delivered',\n  RETURNED: 'returned',\n  CANCELLED: 'cancelled',\n} as const\n\nexport type ShipmentStatus = typeof SHIPMENT_STATUS[keyof typeof SHIPMENT_STATUS]\n\nexport const ShipmentStatusSchema = z.enum([\n  SHIPMENT_STATUS.ORDERED,\n  SHIPMENT_STATUS.SHIPPED,\n  SHIPMENT_STATUS.IN_TRANSIT,\n  SHIPMENT_STATUS.DELIVERED,\n  SHIPMENT_STATUS.RETURNED,\n  SHIPMENT_STATUS.CANCELLED,\n])\n\n// ============================================================\n// Shipment Event Types\n// ============================================================\n\nexport const SHIPMENT_EVENT_TYPE = {\n  STATUS_CHANGED: 'status_changed',\n  TRACKING_UPDATED: 'tracking_updated',\n  REMINDER_SENT: 'reminder_sent',\n  NOTE_ADDED: 'note_added',\n  RETURN_REQUESTED: 'return_requested',\n  RETURN_SHIPPED: 'return_shipped',\n} as const\n\nexport type ShipmentEventType = typeof SHIPMENT_EVENT_TYPE[keyof typeof SHIPMENT_EVENT_TYPE]\n\nexport const ShipmentEventTypeSchema = z.enum([\n  SHIPMENT_EVENT_TYPE.STATUS_CHANGED,\n  SHIPMENT_EVENT_TYPE.TRACKING_UPDATED,\n  SHIPMENT_EVENT_TYPE.REMINDER_SENT,\n  SHIPMENT_EVENT_TYPE.NOTE_ADDED,\n  SHIPMENT_EVENT_TYPE.RETURN_REQUESTED,\n  SHIPMENT_EVENT_TYPE.RETURN_SHIPPED,\n])\n\n// ============================================================\n// Device Shipment Schema\n// ============================================================\n\nexport const DeviceShipmentSchema = z.object({\n  id: z.string().uuid(),\n  patient_id: z.string().uuid(),\n  task_id: z.string().uuid().nullable(),\n  organization_id: z.string().uuid(),\n  created_by_user_id: z.string().uuid().nullable(),\n  \n  // Shipment Details\n  device_type: z.string(),\n  device_serial_number: z.string().nullable(),\n  \n  // Tracking Information\n  tracking_number: z.string().nullable(),\n  carrier: z.string().nullable(),\n  shipping_address: z.string().nullable(),\n  \n  // Status\n  status: ShipmentStatusSchema,\n  \n  // Dates\n  ordered_at: z.string(), // ISO datetime\n  shipped_at: z.string().nullable(),\n  delivered_at: z.string().nullable(),\n  expected_delivery_at: z.string().nullable(),\n  return_requested_at: z.string().nullable(),\n  returned_at: z.string().nullable(),\n  \n  // Return Tracking\n  return_tracking_number: z.string().nullable(),\n  return_carrier: z.string().nullable(),\n  return_reason: z.string().nullable(),\n  \n  // Reminder Tracking\n  reminder_sent_at: z.string().nullable(),\n  last_reminder_at: z.string().nullable(),\n  reminder_count: z.number().int().min(0),\n  \n  // Notes\n  notes: z.string().nullable(),\n  \n  // Metadata\n  metadata: z.record(z.string(), z.any()),\n  \n  // Timestamps\n  created_at: z.string(),\n  updated_at: z.string(),\n})\n\nexport type DeviceShipment = z.infer<typeof DeviceShipmentSchema>\n\n// ============================================================\n// Shipment Event Schema\n// ============================================================\n\nexport const ShipmentEventSchema = z.object({\n  id: z.string().uuid(),\n  shipment_id: z.string().uuid(),\n  created_by_user_id: z.string().uuid().nullable(),\n  \n  // Event Details\n  event_type: z.string(),\n  event_status: ShipmentStatusSchema.nullable(),\n  event_description: z.string().nullable(),\n  \n  // Event Metadata\n  location: z.string().nullable(),\n  carrier: z.string().nullable(),\n  tracking_number: z.string().nullable(),\n  metadata: z.record(z.string(), z.any()),\n  \n  // Timestamps\n  event_at: z.string(),\n  created_at: z.string(),\n})\n\nexport type ShipmentEvent = z.infer<typeof ShipmentEventSchema>\n\n// ============================================================\n// Create Shipment Request\n// ============================================================\n\nexport const CreateShipmentRequestSchema = z.object({\n  patient_id: z.string().uuid(),\n  task_id: z.string().uuid().optional(),\n  device_type: z.string().min(1, 'Device type is required'),\n  device_serial_number: z.string().optional(),\n  tracking_number: z.string().optional(),\n  carrier: z.string().optional(),\n  shipping_address: z.string().optional(),\n  expected_delivery_at: z.string().optional(), // ISO datetime\n  notes: z.string().optional(),\n  metadata: z.record(z.string(), z.any()).optional(),\n})\n\nexport type CreateShipmentRequest = z.infer<typeof CreateShipmentRequestSchema>\n\n// ============================================================\n// Update Shipment Request\n// ============================================================\n\nexport const UpdateShipmentRequestSchema = z.object({\n  status: ShipmentStatusSchema.optional(),\n  tracking_number: z.string().optional(),\n  carrier: z.string().optional(),\n  shipping_address: z.string().optional(),\n  device_serial_number: z.string().optional(),\n  shipped_at: z.string().nullable().optional(),\n  delivered_at: z.string().nullable().optional(),\n  expected_delivery_at: z.string().nullable().optional(),\n  return_requested_at: z.string().nullable().optional(),\n  returned_at: z.string().nullable().optional(),\n  return_tracking_number: z.string().nullable().optional(),\n  return_carrier: z.string().nullable().optional(),\n  return_reason: z.string().nullable().optional(),\n  notes: z.string().nullable().optional(),\n  metadata: z.record(z.string(), z.any()).optional(),\n})\n\nexport type UpdateShipmentRequest = z.infer<typeof UpdateShipmentRequestSchema>\n\n// ============================================================\n// Create Event Request\n// ============================================================\n\nexport const CreateShipmentEventRequestSchema = z.object({\n  event_type: z.string(),\n  event_description: z.string().optional(),\n  location: z.string().optional(),\n  carrier: z.string().optional(),\n  tracking_number: z.string().optional(),\n  metadata: z.record(z.string(), z.any()).optional(),\n})\n\nexport type CreateShipmentEventRequest = z.infer<typeof CreateShipmentEventRequestSchema>\n\n// ============================================================\n// Shipment Query Filters\n// ============================================================\n\nexport const ShipmentFiltersSchema = z.object({\n  patient_id: z.string().uuid().optional(),\n  task_id: z.string().uuid().optional(),\n  status: ShipmentStatusSchema.optional(),\n  device_type: z.string().optional(),\n  needs_reminder: z.boolean().optional(),\n  limit: z.number().int().min(1).max(100).optional(),\n})\n\nexport type ShipmentFilters = z.infer<typeof ShipmentFiltersSchema>\n\n// ============================================================\n// Helper Functions\n// ============================================================\n\n/**\n * Get human-readable shipment status label (German)\n */\nexport function getShipmentStatusLabel(status: ShipmentStatus): string {\n  switch (status) {\n    case SHIPMENT_STATUS.ORDERED:\n      return 'Bestellt'\n    case SHIPMENT_STATUS.SHIPPED:\n      return 'Versendet'\n    case SHIPMENT_STATUS.IN_TRANSIT:\n      return 'Unterwegs'\n    case SHIPMENT_STATUS.DELIVERED:\n      return 'Zugestellt'\n    case SHIPMENT_STATUS.RETURNED:\n      return 'Zurückgesendet'\n    case SHIPMENT_STATUS.CANCELLED:\n      return 'Storniert'\n    default:\n      return status\n  }\n}\n\n/**\n * Get color class for status badge\n */\nexport function getShipmentStatusColor(status: ShipmentStatus): string {\n  switch (status) {\n    case SHIPMENT_STATUS.ORDERED:\n      return 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300'\n    case SHIPMENT_STATUS.SHIPPED:\n      return 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300'\n    case SHIPMENT_STATUS.IN_TRANSIT:\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300'\n    case SHIPMENT_STATUS.DELIVERED:\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300'\n    case SHIPMENT_STATUS.RETURNED:\n      return 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300'\n    case SHIPMENT_STATUS.CANCELLED:\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300'\n    default:\n      return 'bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300'\n  }\n}\n\n/**\n * Get human-readable event type label (German)\n */\nexport function getShipmentEventTypeLabel(eventType: string): string {\n  switch (eventType) {\n    case SHIPMENT_EVENT_TYPE.STATUS_CHANGED:\n      return 'Status geändert'\n    case SHIPMENT_EVENT_TYPE.TRACKING_UPDATED:\n      return 'Tracking aktualisiert'\n    case SHIPMENT_EVENT_TYPE.REMINDER_SENT:\n      return 'Erinnerung gesendet'\n    case SHIPMENT_EVENT_TYPE.NOTE_ADDED:\n      return 'Notiz hinzugefügt'\n    case SHIPMENT_EVENT_TYPE.RETURN_REQUESTED:\n      return 'Rücksendung angefordert'\n    case SHIPMENT_EVENT_TYPE.RETURN_SHIPPED:\n      return 'Rücksendung versendet'\n    default:\n      return eventType\n  }\n}\n\n/**\n * Check if shipment is overdue for delivery\n */\nexport function isShipmentOverdue(shipment: DeviceShipment): boolean {\n  if (!shipment.expected_delivery_at) return false\n  if (shipment.status === SHIPMENT_STATUS.DELIVERED) return false\n  if (shipment.status === SHIPMENT_STATUS.RETURNED) return false\n  if (shipment.status === SHIPMENT_STATUS.CANCELLED) return false\n  \n  const expectedDate = new Date(shipment.expected_delivery_at)\n  const now = new Date()\n  \n  return now > expectedDate\n}\n\n// Constants\nconst MILLISECONDS_PER_DAY = 1000 * 60 * 60 * 24\nconst REMINDER_COOLDOWN_DAYS = 7\n\n/**\n * Check if shipment needs a reminder\n * (Overdue and no reminder sent in last 7 days)\n */\nexport function shouldSendReminder(shipment: DeviceShipment): boolean {\n  if (!isShipmentOverdue(shipment)) return false\n  \n  if (!shipment.last_reminder_at) return true\n  \n  const lastReminder = new Date(shipment.last_reminder_at)\n  const now = new Date()\n  const daysSinceLastReminder = (now.getTime() - lastReminder.getTime()) / MILLISECONDS_PER_DAY\n  \n  // Send reminder if more than REMINDER_COOLDOWN_DAYS since last reminder\n  return daysSinceLastReminder >= REMINDER_COOLDOWN_DAYS\n}\n\n/**\n * Get next valid status transitions\n */\nexport function getValidStatusTransitions(currentStatus: ShipmentStatus): ShipmentStatus[] {\n  switch (currentStatus) {\n    case SHIPMENT_STATUS.ORDERED:\n      return [SHIPMENT_STATUS.SHIPPED, SHIPMENT_STATUS.CANCELLED]\n    case SHIPMENT_STATUS.SHIPPED:\n      return [SHIPMENT_STATUS.IN_TRANSIT, SHIPMENT_STATUS.DELIVERED, SHIPMENT_STATUS.CANCELLED]\n    case SHIPMENT_STATUS.IN_TRANSIT:\n      return [SHIPMENT_STATUS.DELIVERED, SHIPMENT_STATUS.CANCELLED]\n    case SHIPMENT_STATUS.DELIVERED:\n      return [SHIPMENT_STATUS.RETURNED]\n    case SHIPMENT_STATUS.RETURNED:\n      return [] // Terminal state\n    case SHIPMENT_STATUS.CANCELLED:\n      return [] // Terminal state\n    default:\n      return []\n  }\n}\n","'use client'\n\n/**\n * Shipment Create Dialog - V05-I08.3\n * \n * Dialog for creating new device shipments\n */\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Button, Card, Input, Select, Textarea, Label } from '@/lib/ui'\nimport { X, Package } from 'lucide-react'\nimport { CreateShipmentRequest } from '@/lib/contracts/shipment'\n\ntype ShipmentCreateDialogProps = {\n  onClose: () => void\n  onShipmentCreated: () => void\n  initialPatientId?: string\n  initialTaskId?: string\n}\n\ntype PatientOption = {\n  id: string\n  full_name: string | null\n  user_id: string\n}\n\nexport default function ShipmentCreateDialog({\n  onClose,\n  onShipmentCreated,\n  initialPatientId,\n  initialTaskId,\n}: ShipmentCreateDialogProps) {\n  const [loading, setLoading] = useState(false)\n  const [loadingPatients, setLoadingPatients] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [patients, setPatients] = useState<PatientOption[]>([])\n\n  const [patientId, setPatientId] = useState(initialPatientId || '')\n  const [deviceType, setDeviceType] = useState('')\n  const [serialNumber, setSerialNumber] = useState('')\n  const [trackingNumber, setTrackingNumber] = useState('')\n  const [carrier, setCarrier] = useState('')\n  const [shippingAddress, setShippingAddress] = useState('')\n  const [expectedDeliveryDate, setExpectedDeliveryDate] = useState('')\n  const [notes, setNotes] = useState('')\n\n  // Load patients\n  useEffect(() => {\n    const loadPatients = async () => {\n      try {\n        setLoadingPatients(true)\n        const response = await fetch('/api/patient-profiles')\n        if (!response.ok) {\n          throw new Error('Failed to load patients')\n        }\n        const result = await response.json()\n        setPatients(result.data ?? [])\n      } catch (e) {\n        console.error('Failed to load patients:', e)\n        setError('Fehler beim Laden der Patienten')\n      } finally {\n        setLoadingPatients(false)\n      }\n    }\n\n    loadPatients()\n  }, [])\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault()\n      setError(null)\n      setLoading(true)\n\n      try {\n        if (!patientId || !deviceType) {\n          throw new Error('Bitte Patient:in und Gerätetyp auswählen')\n        }\n\n        const shipmentData: CreateShipmentRequest = {\n          patient_id: patientId,\n          task_id: initialTaskId,\n          device_type: deviceType,\n          device_serial_number: serialNumber || undefined,\n          tracking_number: trackingNumber || undefined,\n          carrier: carrier || undefined,\n          shipping_address: shippingAddress || undefined,\n          expected_delivery_at: expectedDeliveryDate || undefined,\n          notes: notes || undefined,\n        }\n\n        const response = await fetch('/api/shipments', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(shipmentData),\n        })\n\n        const result = await response.json()\n\n        if (!response.ok) {\n          throw new Error(result.error?.message || 'Fehler beim Erstellen der Sendung')\n        }\n\n        onShipmentCreated()\n      } catch (e: unknown) {\n        console.error(e)\n        setError(e instanceof Error ? e.message : 'Fehler beim Erstellen der Sendung.')\n      } finally {\n        setLoading(false)\n      }\n    },\n    [\n      patientId,\n      deviceType,\n      serialNumber,\n      trackingNumber,\n      carrier,\n      shippingAddress,\n      expectedDeliveryDate,\n      notes,\n      initialTaskId,\n      onShipmentCreated,\n    ]\n  )\n\n  const patientOptions = patients.map((patient) => ({\n    value: patient.id,\n    label: patient.full_name || patient.user_id,\n  }))\n\n  const deviceTypeOptions = [\n    { value: 'EKG-Gerät', label: 'EKG-Gerät' },\n    { value: 'Blutdruckmessgerät', label: 'Blutdruckmessgerät' },\n    { value: 'Blutzuckermessgerät', label: 'Blutzuckermessgerät' },\n    { value: 'Fitness-Tracker', label: 'Fitness-Tracker' },\n    { value: 'Pulsoximeter', label: 'Pulsoximeter' },\n    { value: 'Andere', label: 'Andere' },\n  ]\n\n  const carrierOptions = [\n    { value: 'DHL', label: 'DHL' },\n    { value: 'DPD', label: 'DPD' },\n    { value: 'Hermes', label: 'Hermes' },\n    { value: 'UPS', label: 'UPS' },\n    { value: 'FedEx', label: 'FedEx' },\n    { value: 'GLS', label: 'GLS' },\n    { value: 'Deutsche Post', label: 'Deutsche Post' },\n    { value: 'Andere', label: 'Andere' },\n  ]\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <Card className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto mx-4\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6 p-6 border-b border-slate-200 dark:border-slate-700\">\n          <div className=\"flex items-center gap-3\">\n            <Package className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\n            <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-50\">\n              Neue Sendung erstellen\n            </h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-slate-600 dark:text-slate-400\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {error && (\n            <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n              <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n            </div>\n          )}\n\n          {/* Patient Selection */}\n          <div>\n            <Label htmlFor=\"patient\">Patient:in *</Label>\n            <Select\n              id=\"patient\"\n              value={patientId}\n              onChange={(e) => setPatientId(e.target.value)}\n              required\n              disabled={loadingPatients || !!initialPatientId}\n            >\n              <option value=\"\" disabled>\n                {loadingPatients ? 'Lade Patienten...' : 'Patient:in auswählen'}\n              </option>\n              {patientOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </Select>\n          </div>\n\n          {/* Device Type */}\n          <div>\n            <Label htmlFor=\"deviceType\">Gerätetyp *</Label>\n            <Select\n              id=\"deviceType\"\n              value={deviceType}\n              onChange={(e) => setDeviceType(e.target.value)}\n              required\n            >\n              <option value=\"\" disabled>\n                Gerätetyp auswählen\n              </option>\n              {deviceTypeOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </Select>\n          </div>\n\n          {/* Serial Number */}\n          <div>\n            <Label htmlFor=\"serialNumber\">Seriennummer (optional)</Label>\n            <Input\n              id=\"serialNumber\"\n              type=\"text\"\n              value={serialNumber}\n              onChange={(e) => setSerialNumber(e.target.value)}\n              placeholder=\"z.B. SN123456\"\n            />\n          </div>\n\n          {/* Carrier */}\n          <div>\n            <Label htmlFor=\"carrier\">Versanddienstleister (optional)</Label>\n            <Select\n              id=\"carrier\"\n              value={carrier}\n              onChange={(e) => setCarrier(e.target.value)}\n            >\n              <option value=\"\">Versanddienstleister auswählen</option>\n              {carrierOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </Select>\n          </div>\n\n          {/* Tracking Number */}\n          <div>\n            <Label htmlFor=\"trackingNumber\">Tracking-Nummer (optional)</Label>\n            <Input\n              id=\"trackingNumber\"\n              type=\"text\"\n              value={trackingNumber}\n              onChange={(e) => setTrackingNumber(e.target.value)}\n              placeholder=\"z.B. 1234567890\"\n            />\n          </div>\n\n          {/* Shipping Address */}\n          <div>\n            <Label htmlFor=\"shippingAddress\">Lieferadresse (optional)</Label>\n            <Textarea\n              id=\"shippingAddress\"\n              value={shippingAddress}\n              onChange={(e) => setShippingAddress(e.target.value)}\n              placeholder=\"Straße, PLZ, Ort\"\n              rows={3}\n            />\n          </div>\n\n          {/* Expected Delivery Date */}\n          <div>\n            <Label htmlFor=\"expectedDeliveryDate\">Erwartete Lieferung (optional)</Label>\n            <Input\n              id=\"expectedDeliveryDate\"\n              type=\"date\"\n              value={expectedDeliveryDate}\n              onChange={(e) => setExpectedDeliveryDate(e.target.value)}\n            />\n          </div>\n\n          {/* Notes */}\n          <div>\n            <Label htmlFor=\"notes\">Notizen (optional)</Label>\n            <Textarea\n              id=\"notes\"\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Zusätzliche Informationen zur Sendung\"\n              rows={3}\n            />\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex gap-3 pt-4\">\n            <Button type=\"submit\" disabled={loading || !patientId || !deviceType} className=\"flex-1\">\n              {loading ? 'Wird erstellt...' : 'Sendung erstellen'}\n            </Button>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} disabled={loading}>\n              Abbrechen\n            </Button>\n          </div>\n        </form>\n      </Card>\n    </div>\n  )\n}\n","'use client'\n\n/**\n * Shipment Detail Dialog - V05-I08.3\n * \n * Dialog for viewing and updating shipment details\n * - View shipment information\n * - Update status\n * - Add tracking information\n * - View event history\n * - Send manual reminders\n */\n\nimport { useState, useCallback } from 'react'\nimport { Button, Card, Input, Select, Textarea, Label, Badge } from '@/lib/ui'\nimport { X, Package, Bell, AlertCircle } from 'lucide-react'\nimport {\n  type DeviceShipment,\n  type ShipmentStatus,\n  SHIPMENT_STATUS,\n  getShipmentStatusLabel,\n  getShipmentStatusColor,\n  getValidStatusTransitions,\n  isShipmentOverdue,\n} from '@/lib/contracts/shipment'\n\ntype ShipmentDetailDialogProps = {\n  shipment: DeviceShipment\n  onClose: () => void\n  onShipmentUpdated: () => void\n}\n\nexport default function ShipmentDetailDialog({\n  shipment,\n  onClose,\n  onShipmentUpdated,\n}: ShipmentDetailDialogProps) {\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [success, setSuccess] = useState<string | null>(null)\n\n  const [status, setStatus] = useState<ShipmentStatus>(shipment.status as ShipmentStatus)\n  const [trackingNumber, setTrackingNumber] = useState(shipment.tracking_number || '')\n  const [carrier, setCarrier] = useState(shipment.carrier || '')\n  const [returnTrackingNumber, setReturnTrackingNumber] = useState(\n    shipment.return_tracking_number || ''\n  )\n  const [returnReason, setReturnReason] = useState(shipment.return_reason || '')\n  const [notes, setNotes] = useState(shipment.notes || '')\n\n  const isOverdue = isShipmentOverdue(shipment)\n  const validTransitions = getValidStatusTransitions(shipment.status as ShipmentStatus)\n\n  const handleUpdate = useCallback(async () => {\n    setError(null)\n    setSuccess(null)\n    setLoading(true)\n\n    try {\n      const updateData: Record<string, unknown> = {}\n\n      if (status !== shipment.status) {\n        updateData.status = status\n      }\n      if (trackingNumber !== shipment.tracking_number) {\n        updateData.tracking_number = trackingNumber || null\n      }\n      if (carrier !== shipment.carrier) {\n        updateData.carrier = carrier || null\n      }\n      if (returnTrackingNumber !== shipment.return_tracking_number) {\n        updateData.return_tracking_number = returnTrackingNumber || null\n      }\n      if (returnReason !== shipment.return_reason) {\n        updateData.return_reason = returnReason || null\n      }\n      if (notes !== shipment.notes) {\n        updateData.notes = notes || null\n      }\n\n      if (Object.keys(updateData).length === 0) {\n        setError('Keine Änderungen vorgenommen')\n        setLoading(false)\n        return\n      }\n\n      const response = await fetch(`/api/shipments/${shipment.id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(updateData),\n      })\n\n      const result = await response.json()\n\n      if (!response.ok) {\n        throw new Error(result.error?.message || 'Fehler beim Aktualisieren der Sendung')\n      }\n\n      setSuccess('Sendung erfolgreich aktualisiert')\n      setTimeout(() => {\n        onShipmentUpdated()\n      }, 1500)\n    } catch (e: unknown) {\n      console.error(e)\n      setError(e instanceof Error ? e.message : 'Fehler beim Aktualisieren der Sendung.')\n    } finally {\n      setLoading(false)\n    }\n  }, [\n    status,\n    trackingNumber,\n    carrier,\n    returnTrackingNumber,\n    returnReason,\n    notes,\n    shipment,\n    onShipmentUpdated,\n  ])\n\n  const carrierOptions = [\n    { value: '', label: 'Kein Versanddienstleister' },\n    { value: 'DHL', label: 'DHL' },\n    { value: 'DPD', label: 'DPD' },\n    { value: 'Hermes', label: 'Hermes' },\n    { value: 'UPS', label: 'UPS' },\n    { value: 'FedEx', label: 'FedEx' },\n    { value: 'GLS', label: 'GLS' },\n    { value: 'Deutsche Post', label: 'Deutsche Post' },\n    { value: 'Andere', label: 'Andere' },\n  ]\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <Card className=\"w-full max-w-3xl max-h-[90vh] overflow-y-auto mx-4\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6 p-6 border-b border-slate-200 dark:border-slate-700\">\n          <div className=\"flex items-center gap-3\">\n            <Package className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\n            <div>\n              <h2 className=\"text-2xl font-bold text-slate-900 dark:text-slate-50\">\n                {shipment.device_type}\n              </h2>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <Badge className={getShipmentStatusColor(shipment.status as ShipmentStatus)}>\n                  {getShipmentStatusLabel(shipment.status as ShipmentStatus)}\n                </Badge>\n                {isOverdue && (\n                  <span className=\"text-sm text-orange-600 font-medium flex items-center gap-1\">\n                    <AlertCircle className=\"w-4 h-4\" />\n                    Überfällig\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-slate-600 dark:text-slate-400\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-6\">\n          {error && (\n            <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n              <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n            </div>\n          )}\n\n          {success && (\n            <div className=\"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg\">\n              <p className=\"text-sm text-green-800 dark:text-green-200\">{success}</p>\n            </div>\n          )}\n\n          {/* Status Update */}\n          <div>\n            <Label htmlFor=\"status\">Status aktualisieren</Label>\n            <Select\n              id=\"status\"\n              value={status}\n              onChange={(e) => setStatus(e.target.value as ShipmentStatus)}\n            >\n              {Array.from(\n                new Set<ShipmentStatus>([\n                  shipment.status as ShipmentStatus,\n                  ...validTransitions,\n                ])\n              ).map((s) => (\n                <option key={s} value={s}>\n                  {getShipmentStatusLabel(s)}\n                </option>\n              ))}\n            </Select>\n          </div>\n\n          {/* Tracking Information */}\n          <div className=\"space-y-4\">\n            <h3 className=\"font-semibold text-slate-900 dark:text-slate-50\">\n              Tracking-Informationen\n            </h3>\n\n            <div>\n              <Label htmlFor=\"carrier\">Versanddienstleister</Label>\n              <Select\n                id=\"carrier\"\n                value={carrier}\n                onChange={(e) => setCarrier(e.target.value)}\n              >\n                {carrierOptions.map((option) => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </Select>\n            </div>\n\n            <div>\n              <Label htmlFor=\"trackingNumber\">Tracking-Nummer</Label>\n              <Input\n                id=\"trackingNumber\"\n                type=\"text\"\n                value={trackingNumber}\n                onChange={(e) => setTrackingNumber(e.target.value)}\n                placeholder=\"z.B. 1234567890\"\n              />\n            </div>\n          </div>\n\n          {/* Return Information (if status is returned) */}\n          {(status === SHIPMENT_STATUS.RETURNED || shipment.status === SHIPMENT_STATUS.RETURNED) && (\n            <div className=\"space-y-4\">\n              <h3 className=\"font-semibold text-slate-900 dark:text-slate-50\">\n                Rücksendeinformationen\n              </h3>\n\n              <div>\n                <Label htmlFor=\"returnTrackingNumber\">Rücksende-Tracking-Nummer</Label>\n                <Input\n                  id=\"returnTrackingNumber\"\n                  type=\"text\"\n                  value={returnTrackingNumber}\n                  onChange={(e) => setReturnTrackingNumber(e.target.value)}\n                  placeholder=\"z.B. 1234567890\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"returnReason\">Grund für Rücksendung</Label>\n                <Textarea\n                  id=\"returnReason\"\n                  value={returnReason}\n                  onChange={(e) => setReturnReason(e.target.value)}\n                  placeholder=\"z.B. defekt, ungenutzt, etc.\"\n                  rows={3}\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Notes */}\n          <div>\n            <Label htmlFor=\"notes\">Notizen</Label>\n            <Textarea\n              id=\"notes\"\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Zusätzliche Informationen zur Sendung\"\n              rows={3}\n            />\n          </div>\n\n          {/* Shipment Info */}\n          <div className=\"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4 space-y-2\">\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-slate-600 dark:text-slate-400\">Erstellt am:</span>\n              <span className=\"font-medium\">\n                {new Date(shipment.created_at).toLocaleString('de-DE')}\n              </span>\n            </div>\n            {shipment.expected_delivery_at && (\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-slate-600 dark:text-slate-400\">Erwartete Lieferung:</span>\n                <span className={`font-medium ${isOverdue ? 'text-orange-600' : ''}`}>\n                  {new Date(shipment.expected_delivery_at).toLocaleDateString('de-DE')}\n                </span>\n              </div>\n            )}\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-slate-600 dark:text-slate-400\">Erinnerungen gesendet:</span>\n              <span className=\"font-medium flex items-center gap-1\">\n                <Bell className=\"w-4 h-4\" />\n                {shipment.reminder_count}\n              </span>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex gap-3 pt-4\">\n            <Button onClick={handleUpdate} disabled={loading} className=\"flex-1\">\n              {loading ? 'Wird gespeichert...' : 'Änderungen speichern'}\n            </Button>\n            <Button variant=\"outline\" onClick={onClose} disabled={loading}>\n              Schließen\n            </Button>\n          </div>\n        </div>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"wDAaA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MAEA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OCFA,EAAA,EAAA,CAAA,CAAA,OAMO,MAAM,AACF,YACA,MAFoB,MAGjB,eACD,cACD,aACC,YAKA,EAAuB,EAAA,CAAC,CAAC,IAAI,CAAC,aAO1C,EA2LM,SAAS,EAAuB,CAAsB,EAC3D,OAAQ,GACN,KAAK,EACH,MAAO,QADY,EAErB,KAF4B,AAEvB,GACH,MAAO,OADY,IAErB,GAF4B,EAEvB,GACH,MAAO,OADY,IAErB,KAAK,CAF0B,EAG7B,MAAO,OADY,KAErB,IAF8B,CAEzB,GACH,MAAO,OADY,QAAQ,CAE7B,KAAK,GACH,MAAO,OADY,IAErB,KAF8B,IAG5B,OAAO,CACX,CACF,CAKO,SAAS,EAAuB,CAAsB,EAC3D,OAAQ,GACN,KAAK,EACH,MAAO,QADY,OAAO,mDAE5B,KAAK,GACH,MAAO,OADY,OAAO,4DAE5B,KAAK,GACH,MAAO,OADY,UAAU,yDAE/B,KAAK,GACH,MAAO,OADY,SAAS,sDAE9B,KAAK,GACH,MAAO,OADY,QAAQ,2DAE7B,KAAK,GACH,MAAO,OADY,SAAS,kDAE9B,SACE,MAAO,sEACX,CACF,CA2BO,SAAS,EAAkB,CAAwB,EACxD,GAAI,CAAC,EAAS,oBAAoB,EAC9B,EAAS,MAAM,KAAK,CACpB,EAAS,MAAM,KAAK,CACpB,CAFoC,CAE3B,MAAM,EAF8B,EAAE,CADf,AAGZ,EADgB,IADkB,CADf,EAK3C,CAHgD,EAAE,CAG5C,EAAe,CAFmB,GAEf,AAHgC,KAG3B,CAFmB,CAEV,CAFY,OAAO,YAEC,EAG3D,OAFY,AAEL,IAFS,KAEH,CACf,CAtPuC,EAAA,CAAC,CAAC,IAAI,CAAC,CAV5B,iBACE,mBACH,gBACH,aACM,mBACF,iBAYjB,EAMmC,EAAA,CAAC,CAAC,MAAM,CAAC,CAC3C,GAAI,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GACnB,WAAY,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAC3B,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAAG,QAAQ,GACnC,gBAAiB,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAChC,mBAAoB,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAAG,QAAQ,GAG9C,YAAa,EAAA,CAAC,CAAC,MAAM,GACrB,qBAAsB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAGzC,gBAAiB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACpC,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC5B,iBAAkB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAGrC,OAAQ,EAGR,WAAY,EAAA,CAAC,CAAC,MAAM,GACpB,WAAY,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC/B,aAAc,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACjC,qBAAsB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACzC,oBAAqB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACxC,YAAa,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAGhC,uBAAwB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC3C,eAAgB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACnC,cAAe,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAGlC,iBAAkB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACrC,iBAAkB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACrC,eAAgB,EAAA,CAAC,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,GAGrC,MAAO,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAG1B,SAAU,EAAA,CAAC,CAAC,MAAM,CAAC,EAAA,CAAC,CAAC,MAAM,GAAI,EAAA,CAAC,CAAC,GAAG,IAGpC,WAAY,EAAA,CAAC,CAAC,MAAM,GACpB,WAAY,EAAA,CAAC,CAAC,MAAM,EACtB,GAQmC,EAAA,CAAC,CAAC,MAAM,CAAC,CAC1C,GAAI,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GACnB,YAAa,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAC5B,mBAAoB,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAAG,QAAQ,GAG9C,WAAY,EAAA,CAAC,CAAC,MAAM,GACpB,aAAc,EAAqB,QAAQ,GAC3C,kBAAmB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAGtC,SAAU,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC7B,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC5B,gBAAiB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACpC,SAAU,EAAA,CAAC,CAAC,MAAM,CAAC,EAAA,CAAC,CAAC,MAAM,GAAI,EAAA,CAAC,CAAC,GAAG,IAGpC,SAAU,EAAA,CAAC,CAAC,MAAM,GAClB,WAAY,EAAA,CAAC,CAAC,MAAM,EACtB,GAQ2C,EAAA,CAAC,CAAC,MAAM,CAAC,CAClD,WAAY,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAC3B,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAAG,QAAQ,GACnC,YAAa,EAAA,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,EAAG,2BAC/B,qBAAsB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACzC,gBAAiB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACpC,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC5B,iBAAkB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACrC,qBAAsB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACzC,MAAO,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC1B,SAAU,EAAA,CAAC,CAAC,MAAM,CAAC,EAAA,CAAC,CAAC,MAAM,GAAI,EAAA,CAAC,CAAC,GAAG,IAAI,QAAQ,EAClD,GAQ2C,EAAA,CAAC,CAAC,MAAM,CAAC,CAClD,OAAQ,EAAqB,QAAQ,GACrC,gBAAiB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACpC,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC5B,iBAAkB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACrC,qBAAsB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACzC,WAAY,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GAC1C,aAAc,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GAC5C,qBAAsB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GACpD,oBAAqB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GACnD,YAAa,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GAC3C,uBAAwB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GACtD,eAAgB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GAC9C,cAAe,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GAC7C,MAAO,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GACrC,SAAU,EAAA,CAAC,CAAC,MAAM,CAAC,EAAA,CAAC,CAAC,MAAM,GAAI,EAAA,CAAC,CAAC,GAAG,IAAI,QAAQ,EAClD,GAQgD,EAAA,CAAC,CAAC,MAAM,CAAC,CACvD,WAAY,EAAA,CAAC,CAAC,MAAM,GACpB,kBAAmB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACtC,SAAU,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC7B,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAC5B,gBAAiB,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GACpC,SAAU,EAAA,CAAC,CAAC,MAAM,CAAC,EAAA,CAAC,CAAC,MAAM,GAAI,EAAA,CAAC,CAAC,GAAG,IAAI,QAAQ,EAClD,GAQqC,EAAA,CAAC,CAAC,MAAM,CAAC,CAC5C,WAAY,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAAG,QAAQ,GACtC,QAAS,EAAA,CAAC,CAAC,MAAM,GAAG,IAAI,GAAG,QAAQ,GACnC,OAAQ,EAAqB,QAAQ,GACrC,YAAa,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,GAChC,eAAgB,EAAA,CAAC,CAAC,OAAO,GAAG,QAAQ,GACpC,MAAO,EAAA,CAAC,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,KAAK,QAAQ,EAClD,GC7MA,IAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAgBe,SAAS,EAAqB,SAC3C,CAAO,mBACP,CAAiB,kBACjB,CAAgB,eAChB,CAAa,CACa,EAC1B,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACjC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAC5C,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkB,EAAE,EAEtD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GAAoB,IACzD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACvC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3C,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACjC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjD,CAAC,EAAsB,EAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3D,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAGnC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAkBR,CAjBqB,UACnB,GAAI,CACF,EAAmB,IACnB,IAAM,EAAW,MAAM,MAAM,yBAC7B,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,2BAElB,IAAM,EAAS,MAAM,EAAS,IAAI,GAClC,EAAY,EAAO,IAAI,EAAI,EAAE,CAC/B,CAAE,MAAO,EAAG,CACV,QAAQ,KAAK,CAAC,2BAA4B,GAC1C,EAAS,kCACX,QAAU,CACR,GAAmB,EACrB,EACF,GAGF,EAAG,EAAE,EAEL,IAAM,EAAe,CAAA,EAAA,EAAA,WAAA,AAAW,EAC9B,MAAO,IACL,EAAE,cAAc,GAChB,EAAS,MACT,GAAW,GAEX,GAAI,CACF,GAAI,CAAC,GAAa,CAAC,EACjB,MAAM,AAAI,IADmB,EACb,4CAelB,IAAM,EAAW,MAAM,MAAM,iBAAkB,CAC7C,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAjBsB,AAiBrB,CAhBrB,WAAY,EACZ,QAAS,EACT,YAAa,EACb,qBAAsB,QAAgB,EACtC,gBAAiB,QAAkB,EACnC,QAAS,GAAW,OACpB,iBAAkB,QAAmB,EACrC,qBAAsB,QAAwB,EAC9C,MAAO,QAAS,CAClB,EAQA,GAEM,EAAS,MAAM,EAAS,IAAI,GAElC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAO,KAAK,EAAE,SAAW,qCAG3C,GACF,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,GACd,EAAS,aAAa,MAAQ,EAAE,OAAO,CAAG,qCAC5C,QAAU,CACR,GAAW,EACb,CACF,EACA,CACE,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACD,EAGG,EAAiB,EAAS,GAAG,CAAC,AAAC,IAAa,CAChD,KAD+C,CACxC,EAAQ,EAAE,CACjB,MAAO,EAAQ,SAAS,EAAI,EAAQ,OAAO,CAC7C,CAAC,EAsBD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,+DAEd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,6CACnB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gEAAuD,8BAIvE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,uFAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,oDAKjB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAc,UAAU,0BACrC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kDAA0C,MAK3D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,mBAAU,iBACzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,GAAG,UACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,QAAQ,CAAA,CAAA,EACR,SAAU,GAAmB,CAAC,CAAC,YAE/B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,GAAG,QAAQ,CAAA,CAAA,WACtB,EAAkB,oBAAsB,yBAE1C,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAO,KAAK,UAC3C,EAAO,KAAK,EADF,EAAO,KAAK,SAQ/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,sBAAa,gBAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,GAAG,aACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAc,EAAE,MAAM,CAAC,KAAK,EAC7C,QAAQ,CAAA,CAAA,YAER,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,GAAG,QAAQ,CAAA,CAAA,WAAC,wBAGzB,AAhFa,CACxB,CAAE,MAAO,YAAa,MAAO,WAAY,EACzC,CAAE,MAAO,qBAAsB,MAAO,oBAAqB,EAC3D,CAAE,MAAO,sBAAuB,MAAO,qBAAsB,EAC7D,CAAE,MAAO,kBAAmB,MAAO,iBAAkB,EACrD,CAAE,MAAO,eAAgB,MAAO,cAAe,EAC/C,CAAE,MAAO,SAAU,MAAO,QAAS,EACpC,CAyE8B,GAAG,CAAC,AAAC,GACtB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAO,KAAK,UAC3C,EAAO,KAAK,EADF,EAAO,KAAK,SAQ/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,wBAAe,4BAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,eACH,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,YAAY,qBAKhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,mBAAU,oCACzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,GAAG,UACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAW,EAAE,MAAM,CAAC,KAAK,YAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,mCAnGN,AAoGV,CAnGX,CAAE,MAAO,MAAO,MAAO,KAAM,EAC7B,CAAE,MAAO,MAAO,MAAO,KAAM,EAC7B,CAAE,MAAO,SAAU,MAAO,QAAS,EACnC,CAAE,MAAO,MAAO,MAAO,KAAM,EAC7B,CAAE,MAAO,QAAS,MAAO,OAAQ,EACjC,CAAE,MAAO,MAAO,MAAO,KAAM,EAC7B,CAAE,MAAO,gBAAiB,MAAO,eAAgB,EACjD,CAAE,MAAO,SAAU,MAAO,QAAS,EACpC,CA2F2B,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAO,KAAK,UAC3C,EAAO,KAAK,EADF,EAAO,KAAK,SAQ/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,0BAAiB,+BAChC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,iBACH,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAkB,EAAE,MAAM,CAAC,KAAK,EACjD,YAAY,uBAKhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,2BAAkB,6BACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,kBACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAmB,EAAE,MAAM,CAAC,KAAK,EAClD,YAAY,mBACZ,KAAM,OAKV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,gCAAuB,mCACtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,uBACH,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAwB,EAAE,MAAM,CAAC,KAAK,OAK3D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,iBAAQ,uBACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,QACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,YAAY,wCACZ,KAAM,OAKV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,SAAU,GAAW,CAAC,GAAa,CAAC,EAAY,UAAU,kBAC7E,EAAU,mBAAqB,sBAElC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,QAAS,EAAS,SAAU,WAAS,wBAQzF,CCrRe,SAAS,EAAqB,CAC3C,UAAQ,SACR,CAAO,mBACP,CAAiB,CACS,EAC1B,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAEhD,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,EAAS,MAAM,EAC9D,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,EAAS,eAAe,EAAI,IAC3E,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAS,OAAO,EAAI,IACrD,CAAC,EAAsB,EAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAC9D,EAAS,sBAAsB,EAAI,IAE/B,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAS,aAAa,EAAI,IACrE,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAS,KAAK,EAAI,IAE/C,EAAY,EAAkB,GAC9B,EAAmB,AFoRpB,SAAS,AAA0B,CAA6B,EACrE,OAAQ,GACN,KAAK,EACH,MAAO,KAAoD,AAC7D,GAFqB,EAEhB,GACH,EAH0B,IAGnB,OADY,AACsE,AAC3F,KAAK,EAFuB,CAG1B,MAAO,KACT,AAD+D,EAD1C,GAEhB,GACH,IAH6B,EAGtB,GAA0B,AACnC,IAFqB,CAEhB,IACH,IAH4B,EAGrB,EAAE,AAKb,CACF,AANgB,EE/RqC,CF8R5B,CE9RqC,MAAM,CF8RnC,CE5RzB,EAAe,CAAA,EAAA,AF6RU,EE7RV,WAAA,AAAW,EAAC,UAC/B,EAAS,MACT,EAAW,MACX,GAAW,GAEX,GAAI,CACF,IAAM,EAAsC,CAAC,EAqB7C,GAnBI,IAAW,EAAS,MAAM,EAAE,CAC9B,EAAW,MAAM,CAAG,CAAA,EAElB,IAAmB,EAAS,eAAe,EAAE,CAC/C,EAAW,eAAe,CAAG,GAAkB,IAAA,EAE7C,IAAY,EAAS,OAAO,EAAE,CAChC,EAAW,OAAO,CAAG,GAAW,IAAA,EAE9B,IAAyB,EAAS,sBAAsB,EAAE,CAC5D,EAAW,sBAAsB,CAAG,GAAwB,IAAA,EAE1D,IAAiB,EAAS,aAAa,EAAE,CAC3C,EAAW,aAAa,CAAG,GAAgB,IAAA,EAEzC,IAAU,EAAS,KAAK,EAAE,CAC5B,EAAW,KAAK,CAAG,GAAS,IAAA,EAGS,IAAnC,OAAO,IAAI,CAAC,GAAY,MAAM,CAAQ,CACxC,EAAS,gCACT,GAAW,GACX,MACF,CAEA,IAAM,EAAW,MAAM,MAAM,CAAC,eAAe,EAAE,EAAS,EAAE,CAAA,CAAE,CAAE,CAC5D,OAAQ,QACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,GAEM,EAAS,MAAM,EAAS,IAAI,GAElC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAO,KAAK,EAAE,SAAW,yCAG3C,EAAW,oCACX,WAAW,KACT,GACF,EAAG,KACL,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,GACd,EAAS,aAAa,MAAQ,EAAE,OAAO,CAAG,yCAC5C,QAAU,CACR,EAAW,GACb,CACF,EAAG,CACD,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACD,EAcD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,+DAEd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,6CACnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gEACX,EAAS,WAAW,GAEvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,EAAuB,EAAS,MAAM,WACrD,EAAuB,EAAS,MAAM,IAExC,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,wEACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,YAAY,yBAO7C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,uFAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,oDAKjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kDAA0C,MAI1D,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yGACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDAA8C,MAK/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,kBAAS,yBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,GAAG,SACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAU,EAAE,MAAM,CAAC,KAAK,WAExC,MAAM,IAAI,CACT,IAAI,IAAoB,CACtB,EAAS,MAAM,IACZ,EACJ,GACD,GAAG,CAAC,AAAC,GACL,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAe,MAAO,WACpB,EAAuB,IADb,SAQnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2DAAkD,2BAIhE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,mBAAU,yBACzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,GAAG,UACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAW,EAAE,MAAM,CAAC,KAAK,WAEzC,AA5FQ,CACrB,CAAE,MAAO,GAAI,MAAO,2BAA4B,EAChD,CAAE,MAAO,MAAO,MAAO,KAAM,EAC7B,CAAE,MAAO,MAAO,MAAO,KAAM,EAC7B,CAAE,MAAO,SAAU,MAAO,QAAS,EACnC,CAAE,MAAO,MAAO,MAAO,KAAM,EAC7B,CAAE,MAAO,QAAS,MAAO,OAAQ,EACjC,CAAE,MAAO,MAAO,MAAO,KAAM,EAC7B,CAAE,MAAO,gBAAiB,MAAO,eAAgB,EACjD,CAAE,MAAO,SAAU,MAAO,QAAS,EACpC,CAkF6B,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAO,KAAK,UAC3C,EAAO,KAAK,EADF,EAAO,KAAK,QAO/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,0BAAiB,oBAChC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,iBACH,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAkB,EAAE,MAAM,CAAC,KAAK,EACjD,YAAY,0BAMjB,AAAC,QAAuC,EAAS,CAArC,KAA2C,IAAqB,CAAhB,AAAwB,EACnF,CAAA,EAAA,CAD2B,CAC3B,IAAA,EAAC,CADkC,EAAwC,GAC1E,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2DAAkD,2BAIhE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,gCAAuB,8BACtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,uBACH,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAwB,EAAE,MAAM,CAAC,KAAK,EACvD,YAAY,uBAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,wBAAe,0BAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,eACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,YAAY,+BACZ,KAAM,UAOd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,iBAAQ,YACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,QACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,YAAY,wCACZ,KAAM,OAKV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8CAAqC,iBACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBACb,IAAI,KAAK,EAAS,UAAU,EAAE,cAAc,CAAC,cAGjD,EAAS,oBAAoB,EAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8CAAqC,yBACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,YAAY,EAAE,EAAY,kBAAoB,GAAA,CAAI,UACjE,IAAI,KAAK,EAAS,oBAAoB,EAAE,kBAAkB,CAAC,cAIlE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8CAAqC,2BACrD,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,gDACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YACf,EAAS,cAAc,UAM9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,EAAc,SAAU,EAAS,UAAU,kBACzD,EAAU,sBAAwB,yBAErC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,EAAS,SAAU,WAAS,wBAQ3E,CH/Qe,SAAS,IACtB,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAwB,EAAE,EAC9D,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnD,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAqC,MAC/E,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyB,OACnE,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEzC,EAAgB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAChC,GAAI,CACF,EAAW,IACX,EAAS,MAGT,IAAM,EAAS,IAAI,gBACE,OAAO,CAAxB,GACF,EAAO,MAAM,CAAC,SAAU,GAEtB,GACF,EAAO,MAAM,CAAC,CADC,gBACiB,QAGlC,IAAM,EAAW,MAAM,MAAM,CAAC,eAAe,EAAE,EAAO,QAAQ,GAAA,CAAI,EAC5D,EAAS,MAAM,EAAS,IAAI,GAElC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAO,KAAK,EAAE,SAAW,mCAG3C,EAAa,EAAO,IAAI,EAAI,EAAE,CAChC,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,4BAA6B,GAE3C,EADqB,OACZ,MADyB,MAAQ,EAAE,OAAO,CAAG,mCAExD,QAAU,CACR,GAAW,EACb,CACF,EAAG,CAAC,EAAc,EAAY,EAE9B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,CAAC,EAAc,EAElB,IAAM,EAAwB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KACxC,GAAoB,GACpB,GACF,EAAG,CAAC,EAAc,EAEZ,EAAwB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KACxC,EAAoB,MACpB,GACF,EAAG,CAAC,EAAc,EAEZ,EAA8C,CAClD,CACE,OAAQ,aACR,SAAU,AAAC,GACT,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBACb,EAAS,gBAAgB,EAAE,WAC1B,EAAS,gBAAgB,EAAE,SAC3B,aAGR,EACA,CACE,OAAQ,QACR,SAAU,AAAC,GAAa,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAW,EAAS,WAAW,EACzE,EACA,CACE,OAAQ,SACR,SAAU,AAAC,IACT,IAAM,EAAY,EAAkB,GACpC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,EAAuB,EAAS,MAAM,WACrD,EAAuB,EAAS,MAAM,IAExC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAM,aAAa,UAAU,uBACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gCAKjC,CACF,EACA,CACE,OAAQ,eACR,SAAU,AAAC,GACT,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6BACb,EAAS,eAAe,EAAI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,OAGpE,EACA,CACE,OAAQ,sBACR,SAAU,AAAC,IACT,IAAM,EAAO,EAAS,oBAAoB,CAC1C,GAAI,CAAC,EAAM,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,MACnD,IAAM,EAAe,IAAI,KAAK,GACxB,EAAY,EAAe,IAAI,KACrC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAY,8BAAgC,mBAC1D,EAAa,kBAAkB,CAAC,UAGvC,CACF,EACA,CACE,OAAQ,eACR,SAAU,AAAC,GACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,2BAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAW,EAAS,cAAc,EAAI,MAG5D,EACA,CACE,OAAQ,cACR,SAAU,AAAC,GACT,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sDACb,IAAI,KAAK,EAAS,UAAU,EAAE,kBAAkB,CAAC,UAGxD,EACD,CAED,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,+CAErB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gEAAuD,kBAGrE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mDAA0C,0DAK3D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,GAAoB,GAAO,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,qBAAc,oBAMxF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,oBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,2BAClB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,kEAAyD,YAG1E,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,UAAU,oHAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,eAAM,SACpB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAA,EAAO,UAAyB,MAAT,OAC/B,AADsC,CACtC,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAA,EAAO,UAAyB,MAAT,OAAO,CACtC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAA,EAAO,UAA4B,MAAZ,QAC/B,CAAA,CADyC,CACzC,EAAA,GAAA,EAAC,SAAA,CAAO,KAAA,EAAO,UAA2B,MAAX,SAAS,AACxC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAA,EAAO,UAA0B,MAAV,QAAQ,KACvC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAA,EAAO,UAA2B,MAAX,SAAS,KAI5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,GAAG,cACH,QAAS,EACT,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,OAAO,EAChD,UAAU,+DAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,QAAQ,cACR,UAAU,iFACX,iCAKH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,KAAK,KACL,QAAS,EACT,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qBAC5B,uBAOJ,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,KAAK,SAErB,EACF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACT,MAAM,oBACN,QAAS,EACT,UAAU,mBACV,QAAS,KACF,GACP,IAEqB,IAArB,EAAU,MAAM,CAClB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,6BACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,0CACnB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wEAA+D,8BAG7E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mDACV,AAAiB,WAAS,EACvB,mDACA,qDAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,GAAoB,GAAO,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,qBAAc,8BAKxF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAM,EACN,QAAS,EACT,WAAY,AAAC,GAAa,EAAoB,GAC9C,UAAU,mBAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qEACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,uDACV,EAAU,MAAM,CAAC,IAAuB,IAArB,EAAU,MAAM,CAAS,UAAY,YAAY,qBAO5E,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,QAAS,IAAM,EAAoB,IACnC,kBAAmB,IAItB,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,SAAU,EACV,QAAS,IAAM,EAAoB,MACnC,kBAAmB,MAK7B"}