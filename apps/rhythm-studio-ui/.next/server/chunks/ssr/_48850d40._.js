module.exports=[3539,a=>{"use strict";var b=a.i(35958);function c(a,b){if(void 0===a)return b;let c=a.toLowerCase().trim();return"true"===c||"1"===c||"yes"===c}let d={AMY_ENABLED:c(b.env.NEXT_PUBLIC_FEATURE_AMY_ENABLED,!0),CLINICIAN_DASHBOARD_ENABLED:c(b.env.NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED,!0),CHARTS_ENABLED:c(b.env.NEXT_PUBLIC_FEATURE_CHARTS_ENABLED,!0)};a.s(["featureFlags",0,d])},81055,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(53547);var e=a.i(28914),f=a.i(3539);function g(){let a=(0,d.useParams)(),g=(0,d.useRouter)(),h=a.id,[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)([]);if((0,c.useEffect)(()=>{let a=async()=>{try{j(!0),l(null);let{data:a,error:b}=await e.supabase.from("reports").select("*").eq("id",h).single();if(b)throw b;n(a);let{data:c,error:d}=await e.supabase.from("assessments").select("*").eq("id",a.assessment_id).single();if(d)throw d;let{data:f,error:g}=await e.supabase.from("patient_profiles").select("*").eq("id",c.patient_id).single();if(g)throw g;p(f);let{data:i,error:k}=await e.supabase.from("assessment_answers").select("question_id, answer_value").eq("assessment_id",c.id);if(k)throw k;r(i??[])}catch(b){let a=b instanceof Error?b.message:"Unbekannter Fehler";console.error("Fehler beim Laden der Report-Details:",b),l(a)}finally{j(!1)}};h&&a()},[h]),i)return(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Report wird geladen…"})});if(k||!m)return(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"max-w-md text-center",children:[(0,b.jsx)("p",{className:"text-red-500 dark:text-red-400 mb-4",children:k??"Report nicht gefunden."}),(0,b.jsx)("button",{onClick:()=>g.push("/clinician"),className:"px-6 py-3 min-h-11 rounded bg-sky-600 dark:bg-sky-500 text-white text-sm md:text-base hover:bg-sky-700 dark:hover:bg-sky-600 transition touch-manipulation",children:"Zurück"})]})});let s="high"===m.risk_level?"Hohes Stressniveau":"moderate"===m.risk_level?"Mittleres Stressniveau":"Niedriges Stressniveau";return(0,b.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,b.jsx)("button",{onClick:()=>g.push("/clinician"),className:"mb-4 px-4 py-2.5 min-h-11 text-sm md:text-base text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 hover:underline transition touch-manipulation inline-flex items-center gap-2",children:"← Zur Übersicht"}),(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-50 mb-4 md:mb-6",children:"Report – Stress & Resilienz"}),(0,b.jsxs)("div",{className:"mb-6 space-y-3 md:space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Datum"}),(0,b.jsx)("p",{className:"font-medium text-sm md:text-base text-slate-900 dark:text-slate-100",children:new Date(m.created_at).toLocaleString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Patient"}),(0,b.jsx)("p",{className:"font-medium text-sm md:text-base text-slate-900 dark:text-slate-100",children:o?.full_name??o?.id??"Unbekannt"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Stress-Score"}),(0,b.jsx)("p",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-slate-50",children:m.score_numeric??"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Schlaf-Score"}),(0,b.jsx)("p",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-slate-50",children:m.sleep_score??"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Stress-Level"}),(0,b.jsx)("p",{className:"font-medium text-sm md:text-base text-slate-900 dark:text-slate-100",children:s})]})]}),f.featureFlags.AMY_ENABLED&&(0,b.jsxs)("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl p-4 md:p-6 mb-6 bg-white dark:bg-slate-800 transition-colors",children:[(0,b.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-slate-900 dark:text-slate-50 mb-3 md:mb-4",children:"Kurzbericht (AMY)"}),(0,b.jsx)("p",{className:"whitespace-pre-line text-gray-800 dark:text-slate-200 text-sm md:text-base",children:m.report_text_short})]}),(0,b.jsxs)("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl p-4 md:p-6 bg-white dark:bg-slate-800 transition-colors",children:[(0,b.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-slate-900 dark:text-slate-50 mb-3 md:mb-4",children:"Antworten (Rohdaten)"}),0===q.length?(0,b.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Keine Antworten gefunden."}):(0,b.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm md:text-base text-slate-700 dark:text-slate-300",children:q.map(a=>(0,b.jsxs)("li",{children:[(0,b.jsxs)("strong",{children:[a.question_id,":"]})," ",a.answer_value]},a.question_id))})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=_48850d40._.js.map