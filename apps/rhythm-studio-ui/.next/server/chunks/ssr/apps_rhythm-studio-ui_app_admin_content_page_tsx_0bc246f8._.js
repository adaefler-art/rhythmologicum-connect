module.exports=[48264,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(59620);var e=a.i(8184),f=a.i(3706),g=a.i(98595),h=a.i(14300);function i(){let a=(0,d.useRouter)(),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)("all"),[s,t]=(0,c.useState)("all"),[u,v]=(0,c.useState)("all"),[w,x]=(0,c.useState)(1),[y,z]=(0,c.useState)("updated_at"),[A,B]=(0,c.useState)("desc");(0,c.useEffect)(()=>{(async()=>{try{j(!0),l(null);let a=await fetch("/api/admin/content-pages");if(!a.ok)throw Error("Fehler beim Laden der Content-Pages");let b=await a.json();n(b.contentPages||[])}catch(a){console.error(a),l(a instanceof Error?a.message:"Fehler beim Laden der Content-Pages.")}finally{j(!1)}})()},[]);let C=(0,c.useMemo)(()=>Array.from(new Map(m.map(a=>a.funnels).filter(a=>null!==a).map(a=>[a.id,a])).values()),[m]),D=(0,c.useMemo)(()=>Array.from(new Set(m.map(a=>a.layout).filter(Boolean))),[m]),E=(0,c.useMemo)(()=>Array.from(new Set(m.map(a=>a.status).filter(Boolean))),[m]),F=(0,c.useMemo)(()=>{let a=[...m];if(o){let b=o.toLowerCase();a=a.filter(a=>a.title.toLowerCase().includes(b)||a.slug.toLowerCase().includes(b))}return"all"!==q&&(a=a.filter(a=>a.funnel_id===q)),"all"!==s&&(a=a.filter(a=>a.layout===s)),"all"!==u&&(a=a.filter(a=>a.status===u)),a.sort((a,b)=>{let c=0;switch(y){case"title":c=a.title.localeCompare(b.title);break;case"slug":c=a.slug.localeCompare(b.slug);break;case"funnel":c=(a.funnels?.title||"").localeCompare(b.funnels?.title||"");break;case"layout":c=(a.layout||"").localeCompare(b.layout||"");break;case"status":c=a.status.localeCompare(b.status);break;case"updated_at":c=new Date(a.updated_at).getTime()-new Date(b.updated_at).getTime()}return"asc"===A?c:-c}),a},[m,o,q,s,u,y,A]),G=Math.ceil(F.length/10),H=(0,c.useMemo)(()=>{let a=(w-1)*10;return F.slice(a,a+10)},[F,w]);(0,c.useEffect)(()=>{x(1)},[o,q,s,u]);let I=a=>{y===a?B("asc"===A?"desc":"asc"):(z(a),B("asc"))},J=a=>{switch(a){case"published":return"VerÃ¶ffentlicht";case"draft":return"Entwurf";case"archived":return"Archiviert";default:return a}},K=({field:a})=>y!==a?(0,b.jsx)("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):"asc"===A?(0,b.jsx)("svg",{className:"w-4 h-4 text-sky-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):(0,b.jsx)("svg",{className:"w-4 h-4 text-sky-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});return i?(0,b.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-slate-600",children:"Content-Pages werden geladenâ€¦"})}):k?(0,b.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"max-w-md text-center",children:[(0,b.jsx)("p",{className:"text-red-500 mb-4",children:k}),(0,b.jsx)(e.Button,{variant:"primary",onClick:()=>window.location.reload(),children:"Neu laden"})]})}):(0,b.jsxs)("main",{className:"min-h-screen p-4 sm:p-6 max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 mb-2",children:"Content Dashboard"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-slate-600",children:"Verwaltung aller Content-Pages mit Filter- und Suchfunktionen"})]}),(0,b.jsx)(e.Button,{onClick:()=>{a.push("/admin/content/new")},variant:"primary",icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"Neue Seite anlegen"})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg border border-slate-200 p-4 mb-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-slate-700 mb-2",children:"Suche"}),(0,b.jsx)(g.Input,{id:"search",type:"text",placeholder:"Titel oder Slug suchen...",value:o,onChange:a=>p(a.target.value),inputSize:"sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"funnel",className:"block text-sm font-medium text-slate-700 mb-2",children:"Funnel"}),(0,b.jsxs)(h.Select,{id:"funnel",value:q,onChange:a=>r(a.target.value),selectSize:"sm",children:[(0,b.jsx)("option",{value:"all",children:"Alle Funnels"}),C.map(a=>(0,b.jsx)("option",{value:a.id,children:a.title},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"layout",className:"block text-sm font-medium text-slate-700 mb-2",children:"Kategorie"}),(0,b.jsxs)(h.Select,{id:"layout",value:s,onChange:a=>t(a.target.value),selectSize:"sm",children:[(0,b.jsx)("option",{value:"all",children:"Alle Kategorien"}),D.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),(0,b.jsxs)(h.Select,{id:"status",value:u,onChange:a=>v(a.target.value),selectSize:"sm",children:[(0,b.jsx)("option",{value:"all",children:"Alle Status"}),E.map(a=>(0,b.jsx)("option",{value:a,children:J(a)},a))]})]})]})})]}),(0,b.jsx)("div",{className:"mb-4 text-sm text-slate-600",children:F.length===m.length?(0,b.jsxs)("span",{children:[F.length," ",1===F.length?"Seite":"Seiten"," gesamt"]}):(0,b.jsxs)("span",{children:[F.length," von ",m.length," ",1===m.length?"Seite":"Seiten"," (gefiltert)"]})}),0===F.length?(0,b.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white px-6 py-12 text-center",children:(0,b.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,b.jsx)("p",{className:"text-4xl mb-4","aria-label":"Kein Inhalt Symbol",children:"ðŸ“„"}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:0===m.length?"Noch keine Seiten vorhanden":"Keine Ergebnisse"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-slate-600 leading-relaxed",children:0===m.length?"Erstellen Sie Ihre erste Content-Page.":"Keine Seiten entsprechen Ihren Filterkriterien."})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"overflow-x-auto border rounded-xl bg-white shadow-sm mb-4",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>I("title"),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:"Titel"}),(0,b.jsx)(K,{field:"title"})]})}),(0,b.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>I("slug"),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:"Slug"}),(0,b.jsx)(K,{field:"slug"})]})}),(0,b.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>I("funnel"),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:"Funnel"}),(0,b.jsx)(K,{field:"funnel"})]})}),(0,b.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>I("layout"),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:"Kategorie"}),(0,b.jsx)(K,{field:"layout"})]})}),(0,b.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>I("status"),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:"Status"}),(0,b.jsx)(K,{field:"status"})]})}),(0,b.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>I("updated_at"),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:"Aktualisiert"}),(0,b.jsx)(K,{field:"updated_at"})]})})]})}),(0,b.jsx)("tbody",{children:H.map((c,d)=>(0,b.jsxs)("tr",{className:`hover:bg-slate-50 transition cursor-pointer touch-manipulation ${d!==H.length-1?"border-b border-slate-100":""}`,onClick:()=>{var b;return b=c.id,void a.push(`/admin/content/${b}`)},children:[(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("span",{className:"font-medium text-slate-900",children:c.title})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("span",{className:"text-slate-600 font-mono text-xs",children:c.slug})}),(0,b.jsx)("td",{className:"px-4 py-4",children:c.funnels?(0,b.jsx)("span",{className:"text-slate-700",children:c.funnels.title}):(0,b.jsx)("span",{className:"text-slate-400",children:"â€”"})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("span",{className:"text-slate-700",children:c.layout||"â€”"})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)(f.Badge,{variant:(a=>{switch(a){case"published":return"success";case"draft":return"secondary";case"archived":return"warning";default:return"default"}})(c.status),size:"sm",children:J(c.status)})}),(0,b.jsx)("td",{className:"px-4 py-4 text-slate-700 whitespace-nowrap",children:(a=>{try{return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a))}catch{return"Datum unbekannt"}})(c.updated_at)})]},c.id))})]})}),G>1&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>x(a=>Math.max(1,a-1)),disabled:1===w,variant:"secondary",size:"sm",children:"ZurÃ¼ck"}),(0,b.jsxs)("span",{className:"text-sm text-slate-600",children:["Seite ",w," von ",G]}),(0,b.jsx)(e.Button,{onClick:()=>x(a=>Math.min(G,a+1)),disabled:w===G,variant:"secondary",size:"sm",children:"Weiter"})]})]})]})}a.s(["default",()=>i,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=apps_rhythm-studio-ui_app_admin_content_page_tsx_0bc246f8._.js.map