(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67488,e=>{"use strict";var t=e.i(18050),s=e.i(71645);e.i(180);var r=e.i(53012);let a=(0,s.forwardRef)(({variant:e="primary",size:s="md",fullWidth:a=!1,icon:l,loading:i=!1,disabled:n=!1,className:d="",children:o,type:c="button",onClick:u,onMouseDown:x,onMouseUp:m,onTouchStart:b,onTouchEnd:g,onKeyDown:h,onKeyUp:p,onFocus:y,onBlur:f,...j},v)=>{let k={sm:{padding:"0.5rem 1rem",fontSize:"0.875rem",minHeight:"36px"},md:{padding:"0.625rem 1.5rem",fontSize:"1rem",minHeight:r.componentTokens.navigationButton.minHeight},lg:{padding:"0.875rem 2rem",fontSize:"1.125rem",minHeight:"56px"}},N={primary:`
        bg-sky-600 dark:bg-sky-500 text-white 
        hover:bg-sky-700 dark:hover:bg-sky-600
        active:bg-sky-800 dark:active:bg-sky-700
        disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:text-slate-500 dark:disabled:text-slate-400
        shadow-md hover:shadow-lg
      `,secondary:`
        bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100
        hover:bg-slate-200 dark:hover:bg-slate-600
        active:bg-slate-300 dark:active:bg-slate-500
        disabled:bg-slate-50 dark:disabled:bg-slate-800 disabled:text-slate-400 dark:disabled:text-slate-600
        border-2 border-slate-200 dark:border-slate-600
      `,outline:`
        bg-transparent text-sky-600 dark:text-sky-400
        border-2 border-sky-600 dark:border-sky-500
        hover:bg-sky-50 dark:hover:bg-sky-900/30
        active:bg-sky-100 dark:active:bg-sky-900/50
        disabled:border-slate-300 dark:disabled:border-slate-600 disabled:text-slate-400 dark:disabled:text-slate-500
      `,ghost:`
        bg-transparent text-slate-700 dark:text-slate-300
        hover:bg-slate-100 dark:hover:bg-slate-700
        active:bg-slate-200 dark:active:bg-slate-600
        disabled:text-slate-400 dark:disabled:text-slate-500
      `,destructive:`
        bg-red-600 dark:bg-red-500 text-white
        hover:bg-red-700 dark:hover:bg-red-600
        active:bg-red-800 dark:active:bg-red-700
        disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:text-slate-500 dark:disabled:text-slate-400
        shadow-md hover:shadow-lg
      `,danger:`
        bg-red-600 dark:bg-red-500 text-white
        hover:bg-red-700 dark:hover:bg-red-600
        active:bg-red-800 dark:active:bg-red-700
        disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:text-slate-500 dark:disabled:text-slate-400
        shadow-md hover:shadow-lg
      `},w=k[s],S=N[e],E=`
      inline-flex items-center justify-center gap-2
      font-semibold rounded-xl
      transition-all duration-200
      focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2
      disabled:cursor-not-allowed disabled:opacity-60
      active:scale-[0.98]
      touch-manipulation
      ${a?"w-full":""}
      ${S}
      ${d}
    `;return(0,t.jsxs)("button",{ref:v,type:c,disabled:n||i,className:E,style:{padding:w.padding,fontSize:w.fontSize,minHeight:w.minHeight},onClick:u,onMouseDown:x,onMouseUp:m,onTouchStart:b,onTouchEnd:g,onKeyDown:h,onKeyUp:p,onFocus:y,onBlur:f,"aria-busy":i,...j,children:[i&&(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!i&&l&&(0,t.jsx)("span",{className:"flex-shrink-0",children:l}),(0,t.jsx)("span",{children:o})]})});a.displayName="Button",e.s(["Button",0,a])},12911,e=>{"use strict";var t=e.i(18050);e.i(180);var s=e.i(53012);function r({header:e,footer:r,children:a,padding:l="lg",radius:i="xl",shadow:n="sm",interactive:d=!1,border:o=!0,onClick:c,className:u="",...x}){let m={none:"0",sm:s.spacing.md,md:s.spacing.lg,lg:s.spacing.xl},b={none:s.shadows.none,sm:s.shadows.sm,md:s.shadows.md,lg:s.shadows.lg},g={md:s.radii.md,lg:s.radii.lg,xl:s.radii.xl,"2xl":s.radii["2xl"]},h=m[l],p=b[n],y=g[i],f=`bg-white dark:bg-slate-800 ${o?"border border-slate-200 dark:border-slate-700":""} transition-colors duration-150`,j=d?"cursor-pointer hover:border-sky-400 dark:hover:border-sky-500 hover:shadow-lg active:scale-[0.99] transition-all duration-200":"";return c?(0,t.jsxs)("button",{type:"button",className:`${f} ${j} ${u}`,style:{borderRadius:y,boxShadow:p},onClick:c,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c())},children:[e&&(0,t.jsx)("div",{className:"border-b border-slate-200 dark:border-slate-700",style:{padding:h},children:e}),(0,t.jsx)("div",{style:{padding:h},children:a}),r&&(0,t.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-700",style:{padding:h},children:r})]}):(0,t.jsxs)("div",{className:`${f} ${j} ${u}`,style:{borderRadius:y,boxShadow:p},...x,children:[e&&(0,t.jsx)("div",{className:"border-b border-slate-200 dark:border-slate-700",style:{padding:h},children:e}),(0,t.jsx)("div",{style:{padding:h},children:a}),r&&(0,t.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-700",style:{padding:h},children:r})]})}e.s(["Card",()=>r])},84584,52220,e=>{"use strict";var t=e.i(18050);function s({size:e="md",text:s,centered:r=!1,className:a="",...l}){let i={sm:{spinner:"h-4 w-4",text:"text-xs"},md:{spinner:"h-8 w-8",text:"text-sm"},lg:{spinner:"h-12 w-12",text:"text-base"},xl:{spinner:"h-16 w-16",text:"text-lg"}}[e],n=`
    ${r?"flex flex-col items-center justify-center min-h-[200px]":"inline-flex flex-col items-center"}
    ${a}
  `;return(0,t.jsxs)("div",{className:n,role:"status","aria-live":"polite",...l,children:[(0,t.jsxs)("svg",{className:`animate-spin text-sky-600 ${i.spinner}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s&&(0,t.jsx)("p",{className:`mt-3 text-slate-600 font-medium ${i.text}`,children:s}),(0,t.jsx)("span",{className:"sr-only",children:s||"Laden..."})]})}e.s(["LoadingSpinner",()=>s],84584);var r=e.i(67488);function a({title:e="Ein Fehler ist aufgetreten",message:s="Bitte versuchen Sie es später erneut.",onRetry:a,retryText:l="Erneut versuchen",centered:i=!1,icon:n,className:d="",...o}){let c=`
    ${i?"flex flex-col items-center justify-center min-h-[300px] text-center":"flex flex-col items-center text-center"}
    ${d}
  `,u=(0,t.jsx)("svg",{className:"h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});return(0,t.jsxs)("div",{className:c,role:"alert","aria-live":"assertive",...o,children:[(0,t.jsx)("div",{className:"mb-4",children:n||u}),(0,t.jsx)("h2",{className:"text-xl md:text-2xl font-semibold text-slate-900 mb-2",children:e}),"string"==typeof s?(0,t.jsx)("p",{className:"text-sm md:text-base text-slate-600 mb-6 max-w-md",children:s}):(0,t.jsx)("div",{className:"text-sm md:text-base text-slate-600 mb-6 max-w-md",children:s}),a&&(0,t.jsx)(r.Button,{variant:"primary",onClick:a,icon:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),children:l})]})}e.s(["ErrorState",()=>a],52220)},32796,76107,e=>{"use strict";var t=e.i(18050);function s({variant:e="default",size:s="md",children:r,className:a=""}){return(0,t.jsx)("span",{className:`
        inline-flex items-center justify-center
        rounded-full border font-medium
        whitespace-nowrap
        ${{default:"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-600",success:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-400 border-emerald-200 dark:border-emerald-700",warning:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-400 border-amber-200 dark:border-amber-700",danger:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 border-red-200 dark:border-red-700",info:"bg-sky-100 dark:bg-sky-900/30 text-sky-800 dark:text-sky-400 border-sky-200 dark:border-sky-700",secondary:"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700"}[e]}
        ${{sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm"}[s]}
        ${a}
      `,children:r})}e.s(["Badge",()=>s],32796),e.i(180);var r=e.i(53012);function a({title:e,description:s,actions:a,className:l=""}){return(0,t.jsxs)("div",{className:`flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 ${l}`,style:{marginBottom:r.spacing.xl},children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-50 mb-2",children:e}),s&&(0,t.jsx)("p",{className:"text-base text-slate-600 dark:text-slate-300",children:s})]}),a&&(0,t.jsx)("div",{className:"flex flex-wrap gap-3 items-start shrink-0",children:a})]})}e.s(["PageHeader",()=>a],76107)},87130,e=>{"use strict";let t=(0,e.i(68569).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],87130)},70419,e=>{"use strict";var t=e.i(18050),s=e.i(71645);e.i(47446);var r=e.i(67488),a=e.i(12911),l=e.i(32796),i=e.i(84584),n=e.i(52220),d=e.i(63209),o=e.i(87130),c=e.i(81307);let u={OPEN:"open",IN_PROGRESS:"in_progress",ESCALATED:"escalated",RESOLVED:"resolved",CLOSED:"closed"},x=c.z.enum([u.OPEN,u.IN_PROGRESS,u.ESCALATED,u.RESOLVED,u.CLOSED]),m={LOW:"low",MEDIUM:"medium",HIGH:"high",URGENT:"urgent"},b=c.z.enum([m.LOW,m.MEDIUM,m.HIGH,m.URGENT]),g="technical",h="medical",p="administrative",y="billing",f="general",j="other",v=c.z.enum([g,h,p,y,f,j]);function k(e){switch(e){case u.OPEN:return"Offen";case u.IN_PROGRESS:return"In Bearbeitung";case u.ESCALATED:return"Eskaliert";case u.RESOLVED:return"Gelöst";case u.CLOSED:return"Geschlossen";default:return e}}function N(e){switch(e){case m.LOW:return"Niedrig";case m.MEDIUM:return"Mittel";case m.HIGH:return"Hoch";case m.URGENT:return"Dringend";default:return e}}c.z.object({id:c.z.string().uuid(),patient_id:c.z.string().uuid(),organization_id:c.z.string().uuid().nullable(),created_by_user_id:c.z.string().uuid().nullable(),assigned_to_user_id:c.z.string().uuid().nullable(),escalated_task_id:c.z.string().uuid().nullable(),category:v,priority:b,status:x,subject:c.z.string(),description:c.z.string().nullable(),notes:c.z.string().nullable(),resolution_notes:c.z.string().nullable(),metadata:c.z.record(c.z.string(),c.z.any()).nullable(),escalated_at:c.z.string().nullable(),escalated_by_user_id:c.z.string().uuid().nullable(),created_at:c.z.string(),updated_at:c.z.string().nullable(),resolved_at:c.z.string().nullable(),closed_at:c.z.string().nullable()}),c.z.object({patient_id:c.z.string().uuid(),category:v.optional(),priority:b.optional(),subject:c.z.string().min(1,"Subject is required").max(200,"Subject too long"),description:c.z.string().optional(),metadata:c.z.record(c.z.string(),c.z.any()).optional()}),c.z.object({status:x.optional(),priority:b.optional(),assigned_to_user_id:c.z.string().uuid().nullable().optional(),description:c.z.string().nullable().optional(),notes:c.z.string().nullable().optional(),resolution_notes:c.z.string().nullable().optional(),metadata:c.z.record(c.z.string(),c.z.any()).optional()}),c.z.object({assigned_to_role:c.z.enum(["clinician","admin"]),assigned_to_user_id:c.z.string().uuid().optional(),escalation_notes:c.z.string().optional(),task_due_at:c.z.string().optional()}),c.z.object({patient_id:c.z.string().uuid().optional(),organization_id:c.z.string().uuid().optional(),assigned_to_user_id:c.z.string().uuid().optional(),category:v.optional(),priority:b.optional(),status:x.optional(),is_escalated:c.z.boolean().optional()});var w=e.i(37727),S=e.i(78894);function E({supportCase:e,onClose:a,onEscalate:l}){let[i,n]=(0,s.useState)("clinician"),[d,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),[x,m]=(0,s.useState)(null);async function b(e){e.preventDefault();try{u(!0),m(null),await l({assigned_to_role:i,escalation_notes:d.trim()||void 0})}catch(e){console.error("Error escalating:",e),m(e instanceof Error?e.message:"Fehler beim Eskalieren"),u(!1)}}return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[(0,t.jsxs)("div",{className:"border-b border-gray-200 p-6 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(S.AlertTriangle,{size:24,className:"text-orange-600"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Support-Fall eskalieren"})]}),(0,t.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:c,children:(0,t.jsx)(w.X,{size:24})})]}),(0,t.jsxs)("form",{onSubmit:b,className:"p-6 space-y-6",children:[x&&(0,t.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded text-red-800 text-sm",children:x}),(0,t.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded",children:[(0,t.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,t.jsx)("strong",{children:"Betreff:"})," ",e.subject]}),e.description&&(0,t.jsxs)("p",{className:"text-sm text-blue-800 mt-2",children:[(0,t.jsx)("strong",{children:"Beschreibung:"})," ",e.description]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"assigned_to_role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rolle zuweisen"}),(0,t.jsxs)("select",{id:"assigned_to_role",value:i,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c,children:[(0,t.jsx)("option",{value:"clinician",children:"Arzt/Ärztin"}),(0,t.jsx)("option",{value:"admin",children:"Administrator"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"escalation_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Eskalationsnotizen"}),(0,t.jsx)("textarea",{id:"escalation_notes",value:d,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]",placeholder:"Grund für die Eskalation, wichtige Hinweise...",disabled:c})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,t.jsx)(r.Button,{type:"button",onClick:a,disabled:c,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Abbrechen"}),(0,t.jsx)(r.Button,{type:"submit",disabled:c,className:"bg-orange-600 hover:bg-orange-700",children:c?"Wird eskaliert...":"Eskalieren"})]})]})]})})}let z=(0,e.i(68569).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function _({supportCase:e,onClose:a,onUpdate:l}){let[i,n]=(0,s.useState)(e.status),[d,o]=(0,s.useState)(e.priority),[c,x]=(0,s.useState)(e.notes||""),[b,g]=(0,s.useState)(e.resolution_notes||""),[h,p]=(0,s.useState)(!1),[y,f]=(0,s.useState)(null),j=function(e){switch(e){case u.OPEN:return[u.IN_PROGRESS,u.ESCALATED,u.RESOLVED,u.CLOSED];case u.IN_PROGRESS:return[u.ESCALATED,u.RESOLVED,u.CLOSED];case u.ESCALATED:return[u.IN_PROGRESS,u.RESOLVED,u.CLOSED];case u.RESOLVED:return[u.CLOSED,u.OPEN];case u.CLOSED:return[u.OPEN];default:return[]}}(e.status);async function v(t){t.preventDefault();try{p(!0),f(null);let t={};i!==e.status&&(t.status=i),d!==e.priority&&(t.priority=d),c!==(e.notes||"")&&(t.notes=c.trim()||null),b!==(e.resolution_notes||"")&&(t.resolution_notes=b.trim()||null),await l(t)}catch(e){console.error("Error updating:",e),f(e instanceof Error?e.message:"Fehler beim Aktualisieren"),p(!1)}}return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(z,{size:24,className:"text-blue-600"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Support-Fall bearbeiten"})]}),(0,t.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:h,children:(0,t.jsx)(w.X,{size:24})})]}),(0,t.jsxs)("form",{onSubmit:v,className:"p-6 space-y-6",children:[y&&(0,t.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded text-red-800 text-sm",children:y}),(0,t.jsx)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded",children:(0,t.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,t.jsx)("strong",{children:"Betreff:"})," ",e.subject]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,t.jsxs)("select",{id:"status",value:i,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:h,children:[(0,t.jsxs)("option",{value:e.status,children:[k(e.status)," (Aktuell)"]}),j.filter(t=>t!==e.status).map(e=>(0,t.jsx)("option",{value:e,children:k(e)},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Priorität"}),(0,t.jsx)("select",{id:"priority",value:d,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:h,children:Object.values(m).map(e=>(0,t.jsx)("option",{value:e,children:N(e)},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Interne Notizen"}),(0,t.jsx)("textarea",{id:"notes",value:c,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]",placeholder:"Interne Notizen (nicht für Patient sichtbar)...",disabled:h})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"resolution_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Lösungsnotizen"}),(0,t.jsx)("textarea",{id:"resolution_notes",value:b,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]",placeholder:"Wie wurde der Fall gelöst? (für Patient sichtbar)...",disabled:h})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,t.jsx)(r.Button,{type:"button",onClick:a,disabled:h,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Abbrechen"}),(0,t.jsx)(r.Button,{type:"submit",disabled:h,children:h?"Wird gespeichert...":"Speichern"})]})]})]})})}function C(){let[e,c]=(0,s.useState)(!0),[x,b]=(0,s.useState)(null),[v,w]=(0,s.useState)([]),[S,z]=(0,s.useState)("all"),[C,L]=(0,s.useState)("all"),[O,D]=(0,s.useState)(null),[A,R]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1);async function P(){try{c(!0),b(null);let e=new URLSearchParams;"all"!==S&&e.append("status",S),"all"!==C&&e.append("priority",C);let t=await fetch(`/api/support-cases?${e.toString()}`),s=await t.json();if(!s.success)throw Error(s.error?.message||"Failed to load support cases");w(s.data||[])}catch(e){console.error("Error loading support cases:",e),b(e instanceof Error?e.message:"Failed to load support cases")}finally{c(!1)}}async function T(e,t){try{let s=await fetch(`/api/support-cases/${e}/escalate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await s.json();if(!r.success)throw Error(r.error?.message||"Failed to escalate support case");await P(),R(!1),D(null)}catch(e){throw console.error("Error escalating support case:",e),e}}async function H(e,t){try{let s=await fetch(`/api/support-cases/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await s.json();if(!r.success)throw Error(r.error?.message||"Failed to update support case");await P(),F(!1),D(null)}catch(e){throw console.error("Error updating support case:",e),e}}return((0,s.useEffect)(()=>{P()},[S,C]),e)?(0,t.jsx)(i.LoadingSpinner,{text:"Lade Support-Fälle..."}):x?(0,t.jsx)(n.ErrorState,{message:x,onRetry:P}):(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Support-Fälle"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Übersicht und Verwaltung aller Support-Anfragen"})]})}),(0,t.jsx)(a.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(o.Filter,{size:20,className:"text-gray-500"}),(0,t.jsxs)("div",{className:"flex gap-4 flex-1",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"status-filter",className:"text-sm font-medium text-gray-700 mr-2",children:"Status:"}),(0,t.jsxs)("select",{id:"status-filter",value:S,onChange:e=>z(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,t.jsx)("option",{value:"all",children:"Alle"}),Object.values(u).map(e=>(0,t.jsx)("option",{value:e,children:k(e)},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"priority-filter",className:"text-sm font-medium text-gray-700 mr-2",children:"Priorität:"}),(0,t.jsxs)("select",{id:"priority-filter",value:C,onChange:e=>L(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,t.jsx)("option",{value:"all",children:"Alle"}),Object.values(m).map(e=>(0,t.jsx)("option",{value:e,children:N(e)},e))]})]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[v.length," ",1===v.length?"Fall":"Fälle"]})]})}),(0,t.jsx)("div",{className:"space-y-4",children:0===v.length?(0,t.jsxs)(a.Card,{className:"p-8 text-center",children:[(0,t.jsx)(d.AlertCircle,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Keine Support-Fälle gefunden."})]}):v.map(e=>(0,t.jsx)(a.Card,{className:"p-6 hover:shadow-md transition-shadow",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.subject}),(0,t.jsx)(l.Badge,{className:function(e){switch(e){case u.OPEN:return"bg-blue-100 text-blue-800";case u.IN_PROGRESS:return"bg-yellow-100 text-yellow-800";case u.ESCALATED:return"bg-red-100 text-red-800";case u.RESOLVED:return"bg-green-100 text-green-800";case u.CLOSED:default:return"bg-gray-100 text-gray-800"}}(e.status),children:k(e.status)}),(0,t.jsx)(l.Badge,{className:function(e){switch(e){case m.LOW:return"bg-gray-100 text-gray-800";case m.MEDIUM:return"bg-blue-100 text-blue-800";case m.HIGH:return"bg-orange-100 text-orange-800";case m.URGENT:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}(e.priority),children:N(e.priority)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[(0,t.jsx)("span",{children:function(e){switch(e){case g:return"Technisch";case h:return"Medizinisch";case p:return"Administrativ";case y:return"Abrechnung";case f:return"Allgemein";case j:return"Sonstiges";default:return e}}(e.category)}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:["Patient: ",e.patient_profiles?.full_name||"Unbekannt"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:new Date(e.created_at).toLocaleDateString("de-DE")}),e.escalated_at&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{className:"text-orange-600",children:["Eskaliert am"," ",new Date(e.escalated_at).toLocaleDateString("de-DE")]})]})]}),e.description&&(0,t.jsx)("p",{className:"text-gray-700 text-sm mb-3",children:e.description}),e.notes&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Interne Notizen:"}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:e.notes})]}),e.resolution_notes&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-800 mb-1",children:"Lösung:"}),(0,t.jsx)("p",{className:"text-sm text-green-700",children:e.resolution_notes})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 ml-4",children:[e.status!==u.ESCALATED&&e.status!==u.CLOSED&&!e.escalated_task_id&&(0,t.jsx)(r.Button,{onClick:()=>{D(e),R(!0)},className:"bg-orange-600 hover:bg-orange-700 text-white text-sm px-3 py-1",children:"Eskalieren"}),(0,t.jsx)(r.Button,{onClick:()=>{D(e),F(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white text-sm px-3 py-1",children:"Bearbeiten"})]})]})},e.id))}),A&&O&&(0,t.jsx)(E,{supportCase:O,onClose:()=>{R(!1),D(null)},onEscalate:e=>T(O.id,e)}),B&&O&&(0,t.jsx)(_,{supportCase:O,onClose:()=>{F(!1),D(null)},onUpdate:e=>H(O.id,e)})]})}e.s(["default",()=>C],70419)}]);

//# sourceMappingURL=8aef046fcdea813c.js.map