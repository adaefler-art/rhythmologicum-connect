(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78745,e=>{"use strict";var t=e.i(84976);function s(e,t){if(void 0===e)return t;let s=e.toLowerCase().trim();return"true"===s||"1"===s||"yes"===s}let a={AMY_ENABLED:s(t.env.NEXT_PUBLIC_FEATURE_AMY_ENABLED,!0),CLINICIAN_DASHBOARD_ENABLED:s(t.env.NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED,!0),CHARTS_ENABLED:s(t.env.NEXT_PUBLIC_FEATURE_CHARTS_ENABLED,!0)};e.s(["featureFlags",0,a])},46821,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(18566);e.i(17152);var r=e.i(66763),l=e.i(78745);function i(){let e=(0,a.useParams)(),i=(0,a.useRouter)(),d=e.id,[n,x]=(0,s.useState)(!0),[c,m]=(0,s.useState)(null),[o,h]=(0,s.useState)(null),[u,b]=(0,s.useState)(null),[p,N]=(0,s.useState)([]);if((0,s.useEffect)(()=>{let e=async()=>{try{x(!0),m(null);let{data:e,error:t}=await r.supabase.from("reports").select("*").eq("id",d).single();if(t)throw t;h(e);let{data:s,error:a}=await r.supabase.from("assessments").select("*").eq("id",e.assessment_id).single();if(a)throw a;let{data:l,error:i}=await r.supabase.from("patient_profiles").select("*").eq("id",s.patient_id).single();if(i)throw i;b(l);let{data:n,error:c}=await r.supabase.from("assessment_answers").select("question_id, answer_value").eq("assessment_id",s.id);if(c)throw c;N(n??[])}catch(t){let e=t instanceof Error?t.message:"Unbekannter Fehler";console.error("Fehler beim Laden der Report-Details:",t),m(e)}finally{x(!1)}};d&&e()},[d]),n)return(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Report wird geladen…"})});if(c||!o)return(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"max-w-md text-center",children:[(0,t.jsx)("p",{className:"text-red-500 dark:text-red-400 mb-4",children:c??"Report nicht gefunden."}),(0,t.jsx)("button",{onClick:()=>i.push("/clinician"),className:"px-6 py-3 min-h-11 rounded bg-sky-600 dark:bg-sky-500 text-white text-sm md:text-base hover:bg-sky-700 dark:hover:bg-sky-600 transition touch-manipulation",children:"Zurück"})]})});let k="high"===o.risk_level?"Hohes Stressniveau":"moderate"===o.risk_level?"Mittleres Stressniveau":"Niedriges Stressniveau";return(0,t.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,t.jsx)("button",{onClick:()=>i.push("/clinician"),className:"mb-4 px-4 py-2.5 min-h-11 text-sm md:text-base text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 hover:underline transition touch-manipulation inline-flex items-center gap-2",children:"← Zur Übersicht"}),(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-50 mb-4 md:mb-6",children:"Report – Stress & Resilienz"}),(0,t.jsxs)("div",{className:"mb-6 space-y-3 md:space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Datum"}),(0,t.jsx)("p",{className:"font-medium text-sm md:text-base text-slate-900 dark:text-slate-100",children:new Date(o.created_at).toLocaleString()})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Patient"}),(0,t.jsx)("p",{className:"font-medium text-sm md:text-base text-slate-900 dark:text-slate-100",children:u?.full_name??u?.id??"Unbekannt"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Stress-Score"}),(0,t.jsx)("p",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-slate-50",children:o.score_numeric??"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Schlaf-Score"}),(0,t.jsx)("p",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-slate-50",children:o.sleep_score??"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Stress-Level"}),(0,t.jsx)("p",{className:"font-medium text-sm md:text-base text-slate-900 dark:text-slate-100",children:k})]})]}),l.featureFlags.AMY_ENABLED&&(0,t.jsxs)("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl p-4 md:p-6 mb-6 bg-white dark:bg-slate-800 transition-colors",children:[(0,t.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-slate-900 dark:text-slate-50 mb-3 md:mb-4",children:"Kurzbericht (AMY)"}),(0,t.jsx)("p",{className:"whitespace-pre-line text-gray-800 dark:text-slate-200 text-sm md:text-base",children:o.report_text_short})]}),(0,t.jsxs)("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl p-4 md:p-6 bg-white dark:bg-slate-800 transition-colors",children:[(0,t.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-slate-900 dark:text-slate-50 mb-3 md:mb-4",children:"Antworten (Rohdaten)"}),0===p.length?(0,t.jsx)("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400",children:"Keine Antworten gefunden."}):(0,t.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm md:text-base text-slate-700 dark:text-slate-300",children:p.map(e=>(0,t.jsxs)("li",{children:[(0,t.jsxs)("strong",{children:[e.question_id,":"]})," ",e.answer_value]},e.question_id))})]})]})}e.s(["default",()=>i])}]);

//# sourceMappingURL=c555183ddf5def7f.js.map