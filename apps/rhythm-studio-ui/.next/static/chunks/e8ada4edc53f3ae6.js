(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77847,e=>{"use strict";var a=e.i(18050),s=e.i(71645),t=e.i(18566);e.i(47446);var i=e.i(67488),l=e.i(12911),r=e.i(39483),n=e.i(34683),d=e.i(56561),c=e.i(84584),o=e.i(32796);let g=[{id:"suicidal_ideation",label:"Suizidgedanken oder akute Selbstgefährdung"},{id:"psychosis",label:"Psychotische Symptome"},{id:"substance_abuse",label:"Schwere Substanzmissbrauchsproblematik"},{id:"severe_depression",label:"Schwere depressive Episode"},{id:"cognitive_impairment",label:"Kognitive Beeinträchtigung"},{id:"language_barrier",label:"Sprachbarriere"},{id:"no_device",label:"Kein Zugang zu digitalen Geräten"},{id:"medical_emergency",label:"Akuter medizinischer Notfall"},{id:"other",label:"Sonstiges"}],m={tier_1:"Tier 1 - Basisversorgung",tier_2:"Tier 2 - Standardversorgung",tier_3:"Tier 3 - Intensivversorgung"},h={tier_1:"Selbstgesteuerte digitale Intervention mit minimalem Support",tier_2:"Regelmäßige Begleitung durch Pflegekräfte und digitale Tools",tier_3:"Intensive ärztliche Betreuung mit engmaschigem Monitoring"};e.i(17152);var x=e.i(66763),u=e.i(69638),p=e.i(78894),b=e.i(78583),j=e.i(84614);function f(){let e=(0,t.useRouter)(),[f,v]=(0,s.useState)(!1),[N,k]=(0,s.useState)(null),[S,w]=(0,s.useState)(!1),[y,_]=(0,s.useState)([]),[C,F]=(0,s.useState)(!0),[T,z]=(0,s.useState)(""),[E,P]=(0,s.useState)(null),[B,R]=(0,s.useState)(""),[A,I]=(0,s.useState)(g.map(e=>({...e,checked:!1}))),[K,O]=(0,s.useState)(""),[q,U]=(0,s.useState)(""),[Z,D]=(0,s.useState)(""),[G,J]=(0,s.useState)(""),L=(0,s.useCallback)(()=>{z(""),P(null),R(""),I(g.map(e=>({...e,checked:!1}))),O(""),U(""),D(""),J(""),w(!1)},[]);(0,s.useEffect)(()=>{(async()=>{try{let{data:e,error:a}=await x.supabase.from("patient_profiles").select("id, full_name, user_id").order("full_name",{ascending:!0}).limit(100);if(a)throw a;_(e||[])}catch(e){console.error("Failed to load patients:",e)}finally{F(!1)}})()},[]);let M=(0,s.useCallback)(e=>{I(a=>a.map(a=>a.id===e?{...a,checked:!a.checked}:a))},[]),W=async e=>{if(e.preventDefault(),!T)return void k("Bitte wählen Sie einen Patienten aus");if(null===E)return void k("Bitte bewerten Sie die Eignung des Patienten");v(!0),k(null),w(!1);try{let e={patient_id:T,is_suitable:E,suitability_notes:B||void 0,red_flags:A.filter(e=>e.checked),red_flags_notes:K||void 0,recommended_tier:q||void 0,tier_notes:Z||void 0,general_notes:G||void 0},a=await fetch("/api/pre-screening-calls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await a.json();if(!a.ok)throw Error(s.error?.message||"Fehler beim Speichern");w(!0),setTimeout(()=>{L()},2e3)}catch(e){console.error("Failed to save pre-screening call:",e),k(e instanceof Error?e.message:"Ein unerwarteter Fehler ist aufgetreten")}finally{v(!1)}},H=A.filter(e=>e.checked);return(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50 mb-2",children:"Pre-Screening Call Script"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Strukturierter Erstkontakt zur Eignung, Red Flags und Tier-Empfehlung"})]}),S&&(0,a.jsx)(l.Card,{padding:"lg",shadow:"md",radius:"lg",className:"mb-6 bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u.CheckCircle,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),(0,a.jsx)("span",{className:"text-green-900 dark:text-green-100 font-medium",children:"Pre-Screening erfolgreich gespeichert"})]})}),N&&(0,a.jsx)(l.Card,{padding:"lg",shadow:"md",radius:"lg",className:"mb-6 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(p.AlertTriangle,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),(0,a.jsx)("span",{className:"text-red-900 dark:text-red-100",children:N})]})}),(0,a.jsxs)("form",{onSubmit:W,children:[(0,a.jsxs)(l.Card,{padding:"lg",shadow:"md",radius:"lg",className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(j.User,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-50",children:"Patient:in"})]}),(0,a.jsx)(r.FormField,{label:"Patient:in auswählen",required:!0,children:C?(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(c.LoadingSpinner,{size:"sm",text:"Patienten werden geladen..."})}):(0,a.jsxs)(d.Select,{value:T,onChange:e=>z(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"-- Bitte wählen --"}),y.map(e=>(0,a.jsx)("option",{value:e.id,children:e.full_name||e.user_id},e.id))]})})]}),(0,a.jsxs)(l.Card,{padding:"lg",shadow:"md",radius:"lg",className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(b.FileText,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-50",children:"Eignung"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(r.FormField,{label:"Ist der/die Patient:in für das Programm geeignet?",required:!0,children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"suitability",checked:!0===E,onChange:()=>P(!0),className:"w-4 h-4 text-green-600 focus:ring-green-500"}),(0,a.jsx)("span",{className:"text-slate-700 dark:text-slate-300",children:"Ja, geeignet"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"suitability",checked:!1===E,onChange:()=>P(!1),className:"w-4 h-4 text-red-600 focus:ring-red-500"}),(0,a.jsx)("span",{className:"text-slate-700 dark:text-slate-300",children:"Nein, nicht geeignet"})]})]})}),(0,a.jsx)(r.FormField,{label:"Notizen zur Eignung",children:(0,a.jsx)(n.Textarea,{value:B,onChange:e=>R(e.target.value),placeholder:"Zusätzliche Informationen zur Eignung...",rows:3})})]})]}),(0,a.jsxs)(l.Card,{padding:"lg",shadow:"md",radius:"lg",className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(p.AlertTriangle,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-50",children:"Red Flags"}),H.length>0&&(0,a.jsxs)(o.Badge,{variant:"danger",size:"sm",children:[H.length," markiert"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-2",children:A.map(e=>(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.checked,onChange:()=>M(e.id),className:"mt-0.5 w-4 h-4 text-red-600 focus:ring-red-500 rounded"}),(0,a.jsx)("span",{className:"text-slate-700 dark:text-slate-300 flex-1",children:e.label})]},e.id))}),(0,a.jsx)(r.FormField,{label:"Zusätzliche Notizen zu Red Flags",children:(0,a.jsx)(n.Textarea,{value:K,onChange:e=>O(e.target.value),placeholder:"Details zu identifizierten Red Flags...",rows:3})})]})]}),(0,a.jsxs)(l.Card,{padding:"lg",shadow:"md",radius:"lg",className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(b.FileText,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-50",children:"Tier-Empfehlung"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(r.FormField,{label:"Empfohlenes Programm-Tier",children:[(0,a.jsxs)(d.Select,{value:q,onChange:e=>U(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"-- Keine Empfehlung --"}),Object.entries(m).map(([e,s])=>(0,a.jsx)("option",{value:e,children:s},e))]}),q&&(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:h[q]})]}),(0,a.jsx)(r.FormField,{label:"Notizen zur Tier-Empfehlung",children:(0,a.jsx)(n.Textarea,{value:Z,onChange:e=>D(e.target.value),placeholder:"Begründung für die Tier-Empfehlung...",rows:3})})]})]}),(0,a.jsx)(l.Card,{padding:"lg",shadow:"md",radius:"lg",className:"mb-6",children:(0,a.jsx)(r.FormField,{label:"Allgemeine Notizen",children:(0,a.jsx)(n.Textarea,{value:G,onChange:e=>J(e.target.value),placeholder:"Weitere wichtige Informationen aus dem Gespräch...",rows:4})})}),(0,a.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,a.jsx)(i.Button,{type:"button",variant:"secondary",onClick:()=>e.back(),disabled:f,children:"Abbrechen"}),(0,a.jsx)(i.Button,{type:"submit",variant:"primary",disabled:f,children:f?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.LoadingSpinner,{size:"sm"}),"Speichern..."]}):"Pre-Screening speichern"})]})]})]})}e.s(["default",()=>f],77847)}]);

//# sourceMappingURL=cc203b1738d0da1b.js.map