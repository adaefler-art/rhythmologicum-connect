(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94850,e=>{"use strict";var t=e.i(18050),s=e.i(71645),l=e.i(18566);e.i(47446);var a=e.i(67488),n=e.i(32796),i=e.i(64389),r=e.i(56561);function c(){let e=(0,l.useRouter)(),[c,o]=(0,s.useState)(!0),[d,m]=(0,s.useState)(null),[u,x]=(0,s.useState)([]),[h,p]=(0,s.useState)(""),[j,f]=(0,s.useState)("all"),[g,b]=(0,s.useState)("all"),[v,N]=(0,s.useState)("all"),[y,k]=(0,s.useState)(1),[w,S]=(0,s.useState)("updated_at"),[C,L]=(0,s.useState)("desc");(0,s.useEffect)(()=>{(async()=>{try{o(!0),m(null);let e=await fetch("/api/admin/content-pages");if(!e.ok)throw Error("Fehler beim Laden der Content-Pages");let t=await e.json();x(t.contentPages||[])}catch(e){console.error(e),m(e instanceof Error?e.message:"Fehler beim Laden der Content-Pages.")}finally{o(!1)}})()},[]);let B=(0,s.useMemo)(()=>Array.from(new Map(u.map(e=>e.funnels).filter(e=>null!==e).map(e=>[e.id,e])).values()),[u]),F=(0,s.useMemo)(()=>Array.from(new Set(u.map(e=>e.layout).filter(Boolean))),[u]),M=(0,s.useMemo)(()=>Array.from(new Set(u.map(e=>e.status).filter(Boolean))),[u]),A=(0,s.useMemo)(()=>{let e=[...u];if(h){let t=h.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.slug.toLowerCase().includes(t))}return"all"!==j&&(e=e.filter(e=>e.funnel_id===j)),"all"!==g&&(e=e.filter(e=>e.layout===g)),"all"!==v&&(e=e.filter(e=>e.status===v)),e.sort((e,t)=>{let s=0;switch(w){case"title":s=e.title.localeCompare(t.title);break;case"slug":s=e.slug.localeCompare(t.slug);break;case"funnel":s=(e.funnels?.title||"").localeCompare(t.funnels?.title||"");break;case"layout":s=(e.layout||"").localeCompare(t.layout||"");break;case"status":s=e.status.localeCompare(t.status);break;case"updated_at":s=new Date(e.updated_at).getTime()-new Date(t.updated_at).getTime()}return"asc"===C?s:-s}),e},[u,h,j,g,v,w,C]),T=Math.ceil(A.length/10),E=(0,s.useMemo)(()=>{let e=(y-1)*10;return A.slice(e,e+10)},[A,y]);(0,s.useEffect)(()=>{k(1)},[h,j,g,v]);let K=e=>{w===e?L("asc"===C?"desc":"asc"):(S(e),L("asc"))},P=e=>{switch(e){case"published":return"VerÃ¶ffentlicht";case"draft":return"Entwurf";case"archived":return"Archiviert";default:return e}},_=({field:e})=>w!==e?(0,t.jsx)("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):"asc"===C?(0,t.jsx)("svg",{className:"w-4 h-4 text-sky-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):(0,t.jsx)("svg",{className:"w-4 h-4 text-sky-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});return c?(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-slate-600",children:"Content-Pages werden geladenâ€¦"})}):d?(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"max-w-md text-center",children:[(0,t.jsx)("p",{className:"text-red-500 mb-4",children:d}),(0,t.jsx)(a.Button,{variant:"primary",onClick:()=>window.location.reload(),children:"Neu laden"})]})}):(0,t.jsxs)("main",{className:"min-h-screen p-4 sm:p-6 max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 mb-2",children:"Content Dashboard"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-slate-600",children:"Verwaltung aller Content-Pages mit Filter- und Suchfunktionen"})]}),(0,t.jsx)(a.Button,{onClick:()=>{e.push("/admin/content/new")},variant:"primary",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"Neue Seite anlegen"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg border border-slate-200 p-4 mb-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-slate-700 mb-2",children:"Suche"}),(0,t.jsx)(i.Input,{id:"search",type:"text",placeholder:"Titel oder Slug suchen...",value:h,onChange:e=>p(e.target.value),inputSize:"sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"funnel",className:"block text-sm font-medium text-slate-700 mb-2",children:"Funnel"}),(0,t.jsxs)(r.Select,{id:"funnel",value:j,onChange:e=>f(e.target.value),selectSize:"sm",children:[(0,t.jsx)("option",{value:"all",children:"Alle Funnels"}),B.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"layout",className:"block text-sm font-medium text-slate-700 mb-2",children:"Kategorie"}),(0,t.jsxs)(r.Select,{id:"layout",value:g,onChange:e=>b(e.target.value),selectSize:"sm",children:[(0,t.jsx)("option",{value:"all",children:"Alle Kategorien"}),F.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),(0,t.jsxs)(r.Select,{id:"status",value:v,onChange:e=>N(e.target.value),selectSize:"sm",children:[(0,t.jsx)("option",{value:"all",children:"Alle Status"}),M.map(e=>(0,t.jsx)("option",{value:e,children:P(e)},e))]})]})]})})]}),(0,t.jsx)("div",{className:"mb-4 text-sm text-slate-600",children:A.length===u.length?(0,t.jsxs)("span",{children:[A.length," ",1===A.length?"Seite":"Seiten"," gesamt"]}):(0,t.jsxs)("span",{children:[A.length," von ",u.length," ",1===u.length?"Seite":"Seiten"," (gefiltert)"]})}),0===A.length?(0,t.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white px-6 py-12 text-center",children:(0,t.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,t.jsx)("p",{className:"text-4xl mb-4","aria-label":"Kein Inhalt Symbol",children:"ðŸ“„"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:0===u.length?"Noch keine Seiten vorhanden":"Keine Ergebnisse"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-slate-600 leading-relaxed",children:0===u.length?"Erstellen Sie Ihre erste Content-Page.":"Keine Seiten entsprechen Ihren Filterkriterien."})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-x-auto border rounded-xl bg-white shadow-sm mb-4",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>K("title"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Titel"}),(0,t.jsx)(_,{field:"title"})]})}),(0,t.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>K("slug"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Slug"}),(0,t.jsx)(_,{field:"slug"})]})}),(0,t.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>K("funnel"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Funnel"}),(0,t.jsx)(_,{field:"funnel"})]})}),(0,t.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>K("layout"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Kategorie"}),(0,t.jsx)(_,{field:"layout"})]})}),(0,t.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>K("status"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Status"}),(0,t.jsx)(_,{field:"status"})]})}),(0,t.jsx)("th",{className:"text-left px-4 py-4 font-semibold text-slate-700 cursor-pointer hover:bg-slate-100 transition touch-manipulation",onClick:()=>K("updated_at"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Aktualisiert"}),(0,t.jsx)(_,{field:"updated_at"})]})})]})}),(0,t.jsx)("tbody",{children:E.map((s,l)=>(0,t.jsxs)("tr",{className:`hover:bg-slate-50 transition cursor-pointer touch-manipulation ${l!==E.length-1?"border-b border-slate-100":""}`,onClick:()=>{var t;return t=s.id,void e.push(`/admin/content/${t}`)},children:[(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("span",{className:"font-medium text-slate-900",children:s.title})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("span",{className:"text-slate-600 font-mono text-xs",children:s.slug})}),(0,t.jsx)("td",{className:"px-4 py-4",children:s.funnels?(0,t.jsx)("span",{className:"text-slate-700",children:s.funnels.title}):(0,t.jsx)("span",{className:"text-slate-400",children:"â€”"})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("span",{className:"text-slate-700",children:s.layout||"â€”"})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)(n.Badge,{variant:(e=>{switch(e){case"published":return"success";case"draft":return"secondary";case"archived":return"warning";default:return"default"}})(s.status),size:"sm",children:P(s.status)})}),(0,t.jsx)("td",{className:"px-4 py-4 text-slate-700 whitespace-nowrap",children:(e=>{try{return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}catch{return"Datum unbekannt"}})(s.updated_at)})]},s.id))})]})}),T>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(a.Button,{onClick:()=>k(e=>Math.max(1,e-1)),disabled:1===y,variant:"secondary",size:"sm",children:"ZurÃ¼ck"}),(0,t.jsxs)("span",{className:"text-sm text-slate-600",children:["Seite ",y," von ",T]}),(0,t.jsx)(a.Button,{onClick:()=>k(e=>Math.min(T,e+1)),disabled:y===T,variant:"secondary",size:"sm",children:"Weiter"})]})]})]})}e.s(["default",()=>c,"dynamic",0,"force-dynamic"])}]);

//# sourceMappingURL=7098f398c0f113bc.js.map