(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69678,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(18566);e.i(17152);var r=e.i(66763),l=e.i(78745);e.i(47446);var d=e.i(32796),i=e.i(12911),n=e.i(67488),c=e.i(89634);e.i(180);var x=e.i(53012),m=e.i(84614),o=e.i(68569);let h=(0,o.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),g=(0,o.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var b=e.i(3308);function u({fullName:e,birthYear:s,sex:a,patientId:r,latestRiskLevel:l,hrvStatus:i,hasPendingAssessment:n}){let c=new Date().getFullYear(),x=s?c-s:null,o=(e=>{switch(e){case"high":return{variant:"danger",label:"High Risk"};case"moderate":return{variant:"warning",label:"Moderate Risk"};case"low":return{variant:"success",label:"Low Risk"};case"pending":return{variant:"secondary",label:"Pending"};default:return null}})(l),u=(e=>{switch(e){case"low":return{variant:"warning",label:"HRV Low"};case"normal":return{variant:"success",label:"HRV Normal"};case"high":return{variant:"info",label:"HRV High"};default:return null}})(i);return(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm mb-6 transition-colors duration-150",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50 mb-4",children:e||"Patient:in"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4 text-slate-600 dark:text-slate-300",children:[x&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),(0,t.jsxs)("span",{className:"text-sm",children:[x," Jahre (Jahrgang ",s,")"]})]}),a&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.User,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),(0,t.jsx)("span",{className:"text-sm",children:a===b.PATIENT_SEX.MALE?"MÃ¤nnlich":a===b.PATIENT_SEX.FEMALE?"Weiblich":a===b.PATIENT_SEX.OTHER?"Divers":a===b.PATIENT_SEX.PREFER_NOT_TO_SAY?"Keine Angabe":a})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),(0,t.jsxs)("span",{className:"text-sm text-slate-400 dark:text-slate-500",children:["ID: ",r.slice(0,8),"..."]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[o&&(0,t.jsx)(d.Badge,{variant:o.variant,children:o.label}),u&&(0,t.jsx)(d.Badge,{variant:u.variant,children:u.label}),n&&(0,t.jsx)(d.Badge,{variant:"secondary",children:"Pending Assessment"})]})]})}var p=e.i(78583);function j({assessments:e,onViewDetails:s}){return 0===e.length?(0,t.jsx)(i.Card,{padding:"lg",shadow:"md",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-6xl mb-4","aria-label":"Beruhigendes Symbol",children:"ğŸŒ¿"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50 mb-2",children:"Noch keine Assessments vorhanden"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"FÃ¼r diese:n Patient:in wurden noch keine Assessments durchgefÃ¼hrt."})]})}):(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsx)(i.Card,{padding:"lg",shadow:"md",interactive:!!s,onClick:s?()=>s(e.id):void 0,children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)(h,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),(0,t.jsx)("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:function(e){try{return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}catch{return"Datum unbekannt"}}(e.created_at)}),(0,t.jsx)(d.Badge,{variant:function(e){switch(e){case"high":return"danger";case"moderate":return"warning";case"low":return"success";default:return"secondary"}}(e.risk_level),size:"sm",children:function(e){switch(e){case"high":return"Hoch";case"moderate":return"Mittel";case"low":return"Niedrig";case"pending":return"Ausstehend";default:return"Unbekannt"}}(e.risk_level)})]}),(0,t.jsxs)("div",{className:"flex gap-4 mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g,{className:"w-4 h-4 text-sky-500 dark:text-sky-400"}),(0,t.jsxs)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Stress: ",null!==e.stress_score?e.stress_score:"â€”"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g,{className:"w-4 h-4 text-purple-500 dark:text-purple-400"}),(0,t.jsxs)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Schlaf: ",null!==e.sleep_score?e.sleep_score:"â€”"]})]})]}),e.reports?.report_text_short&&(0,t.jsxs)("div",{className:"flex items-start gap-2 mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[(0,t.jsx)(p.FileText,{className:"w-4 h-4 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300 line-clamp-2",children:e.reports.report_text_short})]})]}),s&&(0,t.jsx)("div",{className:"flex items-center text-sky-600 text-sm font-medium",children:"Details â†’"})]})},e.id))})}let N=(0,o.default)("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]);var k=e.i(25652);function f({labValues:e,loading:s,errorEvidenceCode:a}){return s?(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(N,{className:"w-5 h-5 text-sky-600 dark:text-sky-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Key Labs"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Labordaten werden geladenâ€¦"})]}):a?(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(N,{className:"w-5 h-5 text-sky-600 dark:text-sky-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Key Labs"})]}),(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(N,{className:"w-8 h-8 text-amber-300 dark:text-amber-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Datenquelle aktuell nicht verfÃ¼gbar"}),(0,t.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["EVIDENCE: ",a]})]})]}):0===e.length?(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(N,{className:"w-5 h-5 text-sky-600 dark:text-sky-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Key Labs"})]}),(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(N,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Keine Labordaten verfÃ¼gbar"})]})]}):(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(N,{className:"w-5 h-5 text-sky-600 dark:text-sky-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Key Labs"})]}),(0,t.jsx)("div",{className:"space-y-3",children:e.map((e,s)=>{var a;return(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(k.TrendingUp,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:e.test_name})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2 pl-6",children:[(0,t.jsx)("span",{className:"text-lg font-semibold text-sky-600 dark:text-sky-400",children:"number"==typeof(a=e.value)?a.toFixed(2):String(a)}),e.unit&&(0,t.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.unit})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-start sm:items-end gap-1 sm:pl-4",children:[e.reference_range&&(0,t.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Ref: ",e.reference_range]}),e.date&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-slate-400 dark:text-slate-500",children:[(0,t.jsx)(h,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.date})]})]})]},s)})})]})}let v=(0,o.default)("pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);function w({medications:e,loading:s,errorEvidenceCode:a}){return s?(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(v,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Medikamente"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Medikamentendaten werden geladenâ€¦"})]}):a?(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(v,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Medikamente"})]}),(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(v,{className:"w-8 h-8 text-amber-300 dark:text-amber-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Datenquelle aktuell nicht verfÃ¼gbar"}),(0,t.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["EVIDENCE: ",a]})]})]}):0===e.length?(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(v,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Medikamente"})]}),(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(v,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Keine Medikamentendaten verfÃ¼gbar"})]})]}):(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(v,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Medikamente"})]}),(0,t.jsx)("div",{className:"space-y-3",children:e.map((e,s)=>(0,t.jsxs)("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:e.name}),e.dosage&&(0,t.jsx)(d.Badge,{variant:"secondary",size:"sm",children:e.dosage})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-slate-600 dark:text-slate-300",children:[e.frequency&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"HÃ¤ufigkeit:"}),(0,t.jsx)("span",{children:e.frequency})]}),e.route&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"Route:"}),(0,t.jsx)("span",{children:e.route})]})]})]},s))})]})}var y=e.i(78894);let _=(0,o.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var S=e.i(98919);function C(e){return e>=80?{variant:"success",label:"Gut"}:e>=60?{variant:"warning",label:"Mittel"}:{variant:"danger",label:"Niedrig"}}function E({safetyScore:e,safetyFindings:s,calculatedScores:a,riskModels:r,loading:l,errorEvidenceCode:n}){let c;if(l)return(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(S.Shield,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Findings & Scores"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Daten werden geladenâ€¦"})]});if(n)return(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(S.Shield,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Findings & Scores"})]}),(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(S.Shield,{className:"w-8 h-8 text-amber-300 dark:text-amber-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Datenquelle aktuell nicht verfÃ¼gbar"}),(0,t.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["EVIDENCE: ",n]})]})]});if(!(null!=e||a||r||s))return(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(S.Shield,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Findings & Scores"})]}),(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(S.Shield,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Keine Findings oder Scores verfÃ¼gbar"})]})]});let x=s?(c={total:0,critical:0,high:0,medium:0,low:0},"object"==typeof s&&null!==s&&("findings_count"in s&&"number"==typeof s.findings_count&&(c.total=s.findings_count),"critical_findings_count"in s&&"number"==typeof s.critical_findings_count&&(c.critical=s.critical_findings_count),"high_findings_count"in s&&"number"==typeof s.high_findings_count&&(c.high=s.high_findings_count),"medium_findings_count"in s&&"number"==typeof s.medium_findings_count&&(c.medium=s.medium_findings_count),"low_findings_count"in s&&"number"==typeof s.low_findings_count&&(c.low=s.low_findings_count)),c):null;return(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(S.Shield,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Findings & Scores"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[null!=e&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Safety Score"}),(0,t.jsx)(d.Badge,{variant:C(e).variant,children:C(e).label})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:e}),(0,t.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"/ 100"})]})]}),x&&x.total>0&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(y.AlertTriangle,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Findings Ãœbersicht"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[x.critical>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-red-50 dark:bg-red-900/20 rounded border border-red-200 dark:border-red-800",children:[(0,t.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Kritisch"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-red-700 dark:text-red-300",children:x.critical})]}),x.high>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-orange-50 dark:bg-orange-900/20 rounded border border-orange-200 dark:border-orange-800",children:[(0,t.jsx)("div",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Hoch"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-orange-700 dark:text-orange-300",children:x.high})]}),x.medium>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800",children:[(0,t.jsx)("div",{className:"text-xs text-amber-600 dark:text-amber-400",children:"Mittel"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-amber-700 dark:text-amber-300",children:x.medium})]}),x.low>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[(0,t.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Niedrig"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300",children:x.low})]})]})]}),a&&Object.keys(a).length>0&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(k.TrendingUp,{className:"w-4 h-4 text-sky-600 dark:text-sky-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Berechnete Scores"})]}),(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(a).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400 capitalize",children:e.replace(/_/g," ")}),(0,t.jsx)("span",{className:"font-medium text-slate-900 dark:text-slate-50",children:"number"==typeof s?s:JSON.stringify(s)})]},e))})]}),r&&Object.keys(r).length>0&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(_,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Risk Models"})]}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[Object.keys(r).length," Modell(e) verfÃ¼gbar"]})]})]})]})}var A=e.i(20278);let T=(0,o.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function R({interventions:e,loading:s,errorEvidenceCode:a}){return s?(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(A.Target,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Empfohlene Interventionen"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Interventionen werden geladenâ€¦"})]}):a?(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(A.Target,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Empfohlene Interventionen"})]}),(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(A.Target,{className:"w-8 h-8 text-amber-300 dark:text-amber-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Datenquelle aktuell nicht verfÃ¼gbar"}),(0,t.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["EVIDENCE: ",a]})]})]}):0===e.length?(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(A.Target,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Empfohlene Interventionen"})]}),(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(A.Target,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Keine Interventionen verfÃ¼gbar"})]})]}):(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(A.Target,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Empfohlene Interventionen"})]}),(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>{var s;let a=(s=e.priorityScore)>=80?{variant:"danger",label:"Sehr hoch"}:s>=60?{variant:"warning",label:"Hoch"}:s>=40?{variant:"info",label:"Mittel"}:{variant:"success",label:"Niedrig"};return(0,t.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700 hover:border-sky-200 dark:hover:border-sky-800 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-sky-100 dark:bg-sky-900/30 text-sky-700 dark:text-sky-300 text-xs font-bold",children:e.rank}),(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:e.topicLabel})]}),(0,t.jsx)(d.Badge,{variant:a.variant,size:"sm",children:a.label})]}),e.pillar&&(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["SÃ¤ule: ",e.pillar]})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[(0,t.jsxs)("div",{className:"text-center p-2 bg-white dark:bg-slate-900/50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,t.jsx)(T,{className:"w-3 h-3 text-amber-600 dark:text-amber-400"}),(0,t.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"PrioritÃ¤t"})]}),(0,t.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:e.priorityScore})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-white dark:bg-slate-900/50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,t.jsx)(k.TrendingUp,{className:"w-3 h-3 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Impact"})]}),(0,t.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:e.impactScore})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-white dark:bg-slate-900/50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,t.jsx)(A.Target,{className:"w-3 h-3 text-sky-600 dark:text-sky-400"}),(0,t.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Umsetzbar"})]}),(0,t.jsx)("span",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50",children:e.feasibilityScore})]})]}),e.signals&&e.signals.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.signals.slice(0,3).map((e,s)=>(0,t.jsx)("span",{className:"inline-block px-2 py-0.5 text-xs bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded",children:e},s)),e.signals.length>3&&(0,t.jsxs)("span",{className:"inline-block px-2 py-0.5 text-xs text-slate-500 dark:text-slate-400",children:["+",e.signals.length-3," mehr"]})]})]},e.rank)})})]})}var I=e.i(73884),D=e.i(3116),P=e.i(26912),M=e.i(90835);function O(e){switch(e){case"pass":return{variant:"success",label:"Bestanden"};case"flag":return{variant:"warning",label:"Markiert"};case"fail":return{variant:"danger",label:"Fehlgeschlagen"};default:return{variant:"warning",label:"Unbekannt"}}}function F(e){switch(e){case"PASS":return{variant:"success",label:"Sicher"};case"FLAG":return{variant:"warning",label:"PrÃ¼fung"};case"BLOCK":return{variant:"danger",label:"Blockiert"};case"UNKNOWN":return{variant:"secondary",label:"Unbekannt"};default:return{variant:"secondary",label:e}}}function B(e){return e>=80?{variant:"success",label:"Gut"}:e>=60?{variant:"warning",label:"Mittel"}:{variant:"danger",label:"Niedrig"}}function L({reviewId:e,onDecisionMade:a}){let[r,l]=(0,s.useState)(!0),[c,x]=(0,s.useState)(null),[m,o]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),[b,u]=(0,s.useState)(null),[p,j]=(0,s.useState)(null),[N,k]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1),[w,C]=(0,s.useState)(null),[E,A]=(0,s.useState)(""),[T,R]=(0,s.useState)(!1);async function L(){if(!w)return void alert("Bitte wÃ¤hlen Sie einen Grund aus");try{R(!0);let t=await fetch(`/api/review/${e}/decide`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:M.REVIEW_STATUS.APPROVED,reasonCode:w,notes:E||void 0})}),s=await t.json();if(!s.success)return void alert(s.error?.message||"Fehler beim Genehmigen");k(!1),C(null),A(""),a&&a(),window.location.reload()}catch(e){console.error("Error approving review:",e),alert("Fehler beim Genehmigen")}finally{R(!1)}}async function V(){if(!w)return void alert("Bitte wÃ¤hlen Sie einen Grund aus");try{R(!0);let t=await fetch(`/api/review/${e}/decide`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:M.REVIEW_STATUS.REJECTED,reasonCode:w,notes:E||void 0})}),s=await t.json();if(!s.success)return void alert(s.error?.message||"Fehler beim Ablehnen");v(!1),C(null),A(""),a&&a(),window.location.reload()}catch(e){console.error("Error rejecting review:",e),alert("Fehler beim Ablehnen")}finally{R(!1)}}if((0,s.useEffect)(()=>{!async function(){try{l(!0),x(null);let t=await fetch(`/api/review/${e}/details`),s=await t.json();if(!s.success)return void x(s.error?.message||"Fehler beim Laden der Review-Daten");o(s.data.review),g(s.data.validation),u(s.data.safety),j(s.data.decision)}catch(e){console.error("Error loading review details:",e),x("Fehler beim Laden der Review-Daten")}finally{l(!1)}}()},[e]),r)return(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(S.Shield,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"QA Review Panel"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Daten werden geladenâ€¦"})]});if(c)return(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(S.Shield,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"QA Review Panel"})]}),(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(y.AlertTriangle,{className:"w-8 h-8 text-amber-500 dark:text-amber-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:c})]})]});if(!m)return null;let z=m.status===M.REVIEW_STATUS.PENDING;return(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(S.Shield,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"QA Review Panel"})]}),(0,t.jsx)(d.Badge,{variant:m.status===M.REVIEW_STATUS.APPROVED?"success":m.status===M.REVIEW_STATUS.REJECTED?"danger":"secondary",children:(0,M.getStatusLabel)(m.status)})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(P.FileCheck,{className:"w-4 h-4 text-sky-600 dark:text-sky-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Review Information"})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Queue Reasons:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 justify-end",children:m.queueReasons.map(e=>(0,t.jsx)(d.Badge,{variant:"secondary",size:"sm",children:(0,M.getQueueReasonLabel)(e)},e))})]}),m.isSampled&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Sampled:"}),(0,t.jsx)(d.Badge,{variant:"info",size:"sm",children:"Quality Sample"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Iteration:"}),(0,t.jsx)("span",{className:"font-medium text-slate-900 dark:text-slate-50",children:m.reviewIteration})]})]})]}),h&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.AlertTriangle,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Layer 1: Medical Validation"})]}),(0,t.jsx)(d.Badge,{variant:O(h.overallStatus).variant,children:O(h.overallStatus).label})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Rules Evaluated:"}),(0,t.jsx)("span",{className:"font-medium text-slate-900 dark:text-slate-50",children:h.rulesEvaluatedCount})]}),h.flagsRaisedCount>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:"Flags Raised:"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[h.criticalFlagsCount>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-red-50 dark:bg-red-900/20 rounded border border-red-200 dark:border-red-800",children:[(0,t.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Kritisch"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-red-700 dark:text-red-300",children:h.criticalFlagsCount})]}),h.warningFlagsCount>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800",children:[(0,t.jsx)("div",{className:"text-xs text-amber-600 dark:text-amber-400",children:"Warnung"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-amber-700 dark:text-amber-300",children:h.warningFlagsCount})]}),h.infoFlagsCount>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[(0,t.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Info"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300",children:h.infoFlagsCount})]})]})]})]})]}),b&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(S.Shield,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Layer 2: Safety Check"})]}),(0,t.jsx)(d.Badge,{variant:F(b.overallAction).variant,children:F(b.overallAction).label})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-white dark:bg-slate-900/50 rounded border border-slate-200 dark:border-slate-600",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Safety Score"}),(0,t.jsx)(d.Badge,{variant:B(b.safetyScore).variant,children:B(b.safetyScore).label})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("span",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400",children:b.safetyScore}),(0,t.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"/ 100"})]})]}),b.findingsCount>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:"Safety Findings:"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[b.criticalFindingsCount>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-red-50 dark:bg-red-900/20 rounded border border-red-200 dark:border-red-800",children:[(0,t.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Kritisch"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-red-700 dark:text-red-300",children:b.criticalFindingsCount})]}),b.highFindingsCount>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-orange-50 dark:bg-orange-900/20 rounded border border-orange-200 dark:border-orange-800",children:[(0,t.jsx)("div",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Hoch"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-orange-700 dark:text-orange-300",children:b.highFindingsCount})]}),b.mediumFindingsCount>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800",children:[(0,t.jsx)("div",{className:"text-xs text-amber-600 dark:text-amber-400",children:"Mittel"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-amber-700 dark:text-amber-300",children:b.mediumFindingsCount})]}),b.lowFindingsCount>0&&(0,t.jsxs)("div",{className:"text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[(0,t.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Niedrig"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300",children:b.lowFindingsCount})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Severity:"}),(0,t.jsx)("span",{className:"font-medium text-slate-900 dark:text-slate-50",children:b.overallSeverity})]})]})]}),p&&p.decidedAt&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(D.Clock,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Decision History"})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Decided By:"}),(0,t.jsx)("span",{className:"font-medium text-slate-900 dark:text-slate-50",children:p.reviewerRole})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Reason:"}),(0,t.jsx)("span",{className:"font-medium text-slate-900 dark:text-slate-50",children:p.reasonCode})]}),p.notes&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Notes:"}),(0,t.jsx)("p",{className:"mt-1 text-slate-900 dark:text-slate-50",children:p.notes})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Decided At:"}),(0,t.jsx)("span",{className:"font-medium text-slate-900 dark:text-slate-50",children:new Date(p.decidedAt).toLocaleString("de-DE")})]})]})]}),z&&(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(n.Button,{variant:"primary",onClick:()=>k(!0),className:"flex-1",children:[(0,t.jsx)(_,{className:"w-4 h-4 mr-2"}),"Approve"]}),(0,t.jsxs)(n.Button,{variant:"danger",onClick:()=>v(!0),className:"flex-1",children:[(0,t.jsx)(I.XCircle,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),N&&(0,t.jsxs)("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-emerald-900 dark:text-emerald-100 mb-3",children:"Approve Review"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Grund auswÃ¤hlen:"}),(0,t.jsxs)("select",{className:"w-full p-2 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-50",value:w||"",onChange:e=>C(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"-- Bitte wÃ¤hlen --"}),(0,t.jsx)("option",{value:M.DECISION_REASON.APPROVED_SAFE,children:"Sicher"}),(0,t.jsx)("option",{value:M.DECISION_REASON.APPROVED_FALSE_POSITIVE,children:"Falsch-Positiv"}),(0,t.jsx)("option",{value:M.DECISION_REASON.APPROVED_ACCEPTABLE_RISK,children:"Akzeptables Risiko"}),(0,t.jsx)("option",{value:M.DECISION_REASON.APPROVED_SAMPLED_OK,children:"Sample OK"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notizen (optional):"}),(0,t.jsx)("textarea",{className:"w-full p-2 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-50",rows:3,maxLength:500,value:E,onChange:e=>A(e.target.value),placeholder:"Optional notes..."})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Button,{variant:"primary",onClick:L,disabled:T||!w,className:"flex-1",children:T?"Submitting...":"Confirm Approve"}),(0,t.jsx)(n.Button,{variant:"ghost",onClick:()=>{k(!1),C(null),A("")},disabled:T,children:"Cancel"})]})]})]}),f&&(0,t.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-3",children:"Reject Review"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Grund auswÃ¤hlen:"}),(0,t.jsxs)("select",{className:"w-full p-2 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-50",value:w||"",onChange:e=>C(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"-- Bitte wÃ¤hlen --"}),(0,t.jsx)("option",{value:M.DECISION_REASON.REJECTED_UNSAFE,children:"Unsicher"}),(0,t.jsx)("option",{value:M.DECISION_REASON.REJECTED_CONTRAINDICATION,children:"Kontraindikation"}),(0,t.jsx)("option",{value:M.DECISION_REASON.REJECTED_PLAUSIBILITY,children:"PlausibilitÃ¤tsproblem"}),(0,t.jsx)("option",{value:M.DECISION_REASON.REJECTED_QUALITY,children:"QualitÃ¤tsproblem"}),(0,t.jsx)("option",{value:M.DECISION_REASON.REJECTED_POLICY,children:"RichtlinienverstoÃŸ"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notizen (optional):"}),(0,t.jsx)("textarea",{className:"w-full p-2 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-50",rows:3,maxLength:500,value:E,onChange:e=>A(e.target.value),placeholder:"Optional notes..."})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Button,{variant:"danger",onClick:V,disabled:T||!w,className:"flex-1",children:T?"Submitting...":"Confirm Reject"}),(0,t.jsx)(n.Button,{variant:"ghost",onClick:()=>{v(!1),C(null),A("")},disabled:T,children:"Cancel"})]})]})]})]})]})}function V({workupStatus:e,missingDataFields:s=[],assessmentId:a}){if(!e)return(0,t.jsx)(i.Card,{padding:"lg",shadow:"md",children:(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Workup-Status noch nicht festgelegt"})})});let r="needs_more_data"===e,l=r?{icon:"ğŸ“‹",title:"Weitere Daten erforderlich",description:"Patient muss zusÃ¤tzliche Informationen bereitstellen.",badgeText:"Daten ergÃ¤nzen",badgeColor:"bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-400",borderColor:"border-amber-200 dark:border-amber-800"}:{icon:"âœ…",title:"Bereit zur Auswertung",description:"Alle erforderlichen Daten liegen vor.",badgeText:"VollstÃ¤ndig",badgeColor:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-400",borderColor:"border-emerald-200 dark:border-emerald-800"};return(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",border:!0,className:`${l.borderColor}`,children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,t.jsx)("span",{className:"text-3xl flex-shrink-0",children:l.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:l.title}),(0,t.jsx)("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${l.badgeColor}`,children:l.badgeText})]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:l.description})]})]}),r&&s.length>0&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-50 mb-2",children:"Fehlende Datenfelder:"}),(0,t.jsx)("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-amber-600 dark:text-amber-400",children:"â€¢"}),(0,t.jsx)("code",{className:"text-xs bg-slate-100 dark:bg-slate-800 px-1 py-0.5 rounded",children:e})]},s))})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:(0,t.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Assessment ID: ",(0,t.jsx)("code",{className:"text-xs",children:a})]})})]})}var z=e.i(7233);let K=(0,o.default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),U=(0,o.default)("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);function H(e,t){return e?"42P01"===e.code||"42703"===e.code||e.code?.startsWith("42")?`E_SCHEMA_${t}`:"PGRST301"===e.code||e.code?.startsWith("PGRST3")?`E_RLS_${t}`:`E_QUERY_${t}`:`E_UNKNOWN_${t}`}function W(){let e=(0,a.useParams)(),x=(0,a.useRouter)(),m=e.id,[o,h]=(0,s.useState)(!0),[g,b]=(0,s.useState)(null),[p,N]=(0,s.useState)(null),[k,v]=(0,s.useState)([]),[y,_]=(0,s.useState)(null),[S,C]=(0,s.useState)([]),[A,T]=(0,s.useState)(null),[I,D]=(0,s.useState)({state:"empty"}),[P,M]=(0,s.useState)({state:"empty"}),[O,F]=(0,s.useState)({state:"empty"}),[B,W]=(0,s.useState)({state:"empty"}),[Y,J]=(0,s.useState)({state:"empty"}),[$,Q]=(0,s.useState)([]),[X,Z]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{let e=async()=>{try{h(!0),b(null);let[e,t]=await Promise.all([r.supabase.from("patient_profiles").select("*").eq("id",m).single(),r.supabase.from("patient_measures").select(`
            id,
            patient_id,
            stress_score,
            sleep_score,
            risk_level,
            created_at,
            report_id,
            reports!fk_patient_measures_report (
              id,
              report_text_short,
              created_at
            )
          `).eq("patient_id",m).order("created_at",{ascending:!1})]);if(e.error)throw e.error;if(t.error)throw t.error;N(e.data),v(t.data??[]);let{data:s,error:a}=await r.supabase.from("assessments").select("id, status, workup_status, missing_data_fields").eq("patient_id",m).order("created_at",{ascending:!1});if(a)console.warn("[I07.2]","E_QUERY_ASSESSMENTS","assessments"),D({state:"empty"}),M({state:"empty"}),F({state:"empty"}),W({state:"empty"}),J({state:"empty"});else if(s&&s.length>0){let e=s.map(e=>e.id),t=s.find(e=>"completed"===e.status);t&&(T(t.id),_(t.workup_status??null),C(Array.isArray(t.missing_data_fields)?t.missing_data_fields:[]));let{data:a,error:l}=await r.supabase.from("documents").select("id, extracted_json, doc_type, created_at").in("assessment_id",e).not("extracted_json","is",null).order("created_at",{ascending:!1}).limit(10);if(l){let e=H(l,"DOCS");console.warn("[I07.2]",e,"documents"),D({state:"error",evidenceCode:e}),M({state:"error",evidenceCode:e})}else if(a&&a.length>0){let e=a.flatMap(e=>e.extracted_json?.lab_values??[]),t=a.flatMap(e=>e.extracted_json?.medications??[]);D(e.length>0?{state:"ok",items:e.slice(0,5)}:{state:"empty"}),M(t.length>0?{state:"ok",items:t}:{state:"empty"})}else D({state:"empty"}),M({state:"empty"});let{data:d,error:i}=await r.supabase.from("reports").select("id, assessment_id, safety_score, safety_findings, created_at").in("assessment_id",e).order("created_at",{ascending:!1}).limit(1).single();if(i&&"PGRST116"!==i.code){let e=H(i,"SAFETY");console.warn("[I07.2]",e,"reports"),F({state:"error",evidenceCode:e})}else d?F({state:"ok",items:[d]}):F({state:"empty"});let{data:n,error:c}=await r.supabase.from("calculated_results").select("id, assessment_id, scores, risk_models, created_at").in("assessment_id",e).order("created_at",{ascending:!1}).limit(1).single();if(c&&"PGRST116"!==c.code){let e=H(c,"SCORES");console.warn("[I07.2]",e,"calculated_results"),W({state:"error",evidenceCode:e})}else n?W({state:"ok",items:[n]}):W({state:"empty"});let{data:x,error:m}=await r.supabase.from("processing_jobs").select("id").in("assessment_id",e).order("created_at",{ascending:!1}).limit(10);if(m){let e=H(m,"JOBS");console.warn("[I07.2]",e,"processing_jobs"),J({state:"error",evidenceCode:e})}else if(x&&x.length>0){let e=x.map(e=>e.id),{data:t,error:s}=await r.supabase.from("priority_rankings").select("id, ranking_data").in("job_id",e).order("created_at",{ascending:!1}).limit(1).single();if(s&&"PGRST116"!==s.code){let e=H(s,"INTERVENTIONS");console.warn("[I07.2]",e,"priority_rankings"),J({state:"error",evidenceCode:e})}else if(t){let e=t.ranking_data?.topInterventions??t.ranking_data?.rankedInterventions?.slice(0,5)??[];J(e.length>0?{state:"ok",items:e}:{state:"empty"})}else J({state:"empty"});let{data:a,error:l}=await r.supabase.from("review_records").select("id").in("job_id",e).order("created_at",{ascending:!1});!l&&a&&a.length>0?Q(a.map(e=>e.id)):Q([])}else J({state:"empty"})}else D({state:"empty"}),M({state:"empty"}),F({state:"empty"}),W({state:"empty"}),J({state:"empty"})}catch(e){console.error("Error loading patient details:",e),b(e instanceof Error?e.message:"Fehler beim Laden der Patientendaten.")}finally{h(!1)}};m&&e()},[m]),o)return(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Patientendaten werden geladenâ€¦"})});if(g||!p)return(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"max-w-md text-center",children:[(0,t.jsx)("p",{className:"text-red-500 mb-4",children:g??"Patient nicht gefunden."}),(0,t.jsx)(n.Button,{variant:"primary",onClick:()=>x.push("/clinician"),children:"ZurÃ¼ck zur Ãœbersicht"})]})});let ee=k.length>0?k[0]:null;return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("button",{onClick:()=>x.push("/clinician"),className:"mb-4 px-4 py-2.5 min-h-[44px] text-sm md:text-base text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 hover:underline transition touch-manipulation inline-flex items-center gap-2",children:"â† ZurÃ¼ck zur Ãœbersicht"}),(0,t.jsx)(u,{fullName:p.full_name,birthYear:p.birth_year,sex:p.sex,patientId:m,latestRiskLevel:ee?.risk_level,hasPendingAssessment:ee?.risk_level==="pending"}),(0,t.jsxs)(c.Tabs,{defaultTab:"overview",children:[(0,t.jsxs)(c.TabsList,{children:[(0,t.jsx)(c.TabTrigger,{value:"overview",children:"Overview"}),(0,t.jsx)(c.TabTrigger,{value:"assessments",children:"Assessments"}),(0,t.jsx)(c.TabTrigger,{value:"insights",children:"AMY Insights"}),(0,t.jsx)(c.TabTrigger,{value:"actions",children:"Actions"})]}),(0,t.jsx)(c.TabContent,{value:"overview",children:0===k.length?(0,t.jsx)(i.Card,{padding:"lg",shadow:"md",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-6xl mb-4","aria-label":"Beruhigendes Symbol",children:"ğŸŒ¿"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50 mb-2",children:"Noch keine Messungen vorhanden"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed",children:"FÃ¼r diese:n Patient:in liegen noch keine Stress- oder Schlafmessungen vor. Sobald das erste Assessment durchgefÃ¼hrt wurde, werden die Ergebnisse hier angezeigt."})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(i.Card,{padding:"lg",shadow:"md",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Total Assessments"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50",children:k.length})]})}),(0,t.jsx)(i.Card,{padding:"lg",shadow:"md",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Latest Stress Score"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50",children:ee?.stress_score??"â€”"})]})}),(0,t.jsx)(i.Card,{padding:"lg",shadow:"md",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Latest Sleep Score"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50",children:ee?.sleep_score??"â€”"})]})})]}),l.featureFlags.CHARTS_ENABLED&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(U,{className:"w-5 h-5 text-sky-600 dark:text-sky-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Stress-Verlauf"})]}),(0,t.jsx)(q,{measures:k})]}),(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(U,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Schlaf-Verlauf"})]}),(0,t.jsx)(G,{measures:k})]})]}),A&&(0,t.jsx)(V,{workupStatus:y,missingDataFields:S,assessmentId:A}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(f,{labValues:"ok"===I.state?I.items:[],loading:!1,errorEvidenceCode:"error"===I.state?I.evidenceCode:void 0}),(0,t.jsx)(w,{medications:"ok"===P.state?P.items:[],loading:!1,errorEvidenceCode:"error"===P.state?P.evidenceCode:void 0})]}),(0,t.jsx)(E,{safetyScore:"ok"===O.state?O.items[0]?.safety_score:void 0,safetyFindings:"ok"===O.state?O.items[0]?.safety_findings:void 0,calculatedScores:"ok"===B.state?B.items[0]?.scores:void 0,riskModels:"ok"===B.state?B.items[0]?.risk_models:void 0,loading:!1,errorEvidenceCode:"error"===O.state?O.evidenceCode:"error"===B.state?B.evidenceCode:void 0}),(0,t.jsx)(R,{interventions:"ok"===Y.state?Y.items:[],loading:!1,errorEvidenceCode:"error"===Y.state?Y.evidenceCode:void 0}),$.length>0&&$.map(e=>(0,t.jsx)(L,{reviewId:e,onDecisionMade:()=>{}},e)),(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-slate-50",children:"Rohdaten (JSON)"}),(0,t.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>Z(!X),children:X?"Verbergen":"Anzeigen"})]}),X&&(0,t.jsx)("pre",{className:"bg-slate-50 dark:bg-slate-900/50 rounded p-4 overflow-x-auto text-xs md:text-sm text-slate-800 dark:text-slate-200",children:JSON.stringify({patient:p,measures:k},null,2)})]})]})}),(0,t.jsx)(c.TabContent,{value:"assessments",children:(0,t.jsx)(j,{assessments:k,onViewDetails:e=>{let t=k.find(t=>t.id===e);t?.report_id&&x.push(`/clinician/report/${t.report_id}`)}})}),(0,t.jsx)(c.TabContent,{value:"insights",children:l.featureFlags.AMY_ENABLED&&k.some(e=>e.reports?.report_text_short)?(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(K,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50",children:"AMY-Berichte (Chronologisch)"})]}),(0,t.jsx)("div",{className:"space-y-4",children:k.filter(e=>e.reports?.report_text_short).map(e=>(0,t.jsxs)("div",{className:`border-l-4 pl-4 py-3 ${"high"===e.risk_level?"border-red-400":"moderate"===e.risk_level?"border-amber-400":"border-emerald-400"}`,children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs md:text-sm text-slate-500 dark:text-slate-400",children:(e=>{try{return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}catch{return"Datum unbekannt"}})(e.created_at)}),(0,t.jsx)(d.Badge,{variant:(e=>{switch(e){case"high":return"danger";case"moderate":return"warning";case"low":return"success";default:return"secondary"}})(e.risk_level),size:"sm",children:(e=>{switch(e){case"high":return"Hoch";case"moderate":return"Mittel";case"low":return"Niedrig";case"pending":return"Ausstehend";default:return"Unbekannt"}})(e.risk_level)})]}),(0,t.jsxs)("div",{className:"text-xs md:text-sm text-slate-500 dark:text-slate-400",children:["Stress: ",e.stress_score??"â€”"," | Schlaf:"," ",e.sleep_score??"â€”"]})]}),(0,t.jsx)("p",{className:"text-sm md:text-base text-slate-700 dark:text-slate-300 whitespace-pre-line",children:e.reports.report_text_short})]},e.id))})]})}):(0,t.jsx)(i.Card,{padding:"lg",shadow:"md",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(K,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50 mb-2",children:"Keine AMY Insights verfÃ¼gbar"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:l.featureFlags.AMY_ENABLED?"FÃ¼r diese:n Patient:in liegen noch keine AMY-generierten Berichte vor.":"AMY-Integration ist derzeit deaktiviert."})]})})}),(0,t.jsx)(c.TabContent,{value:"actions",children:(0,t.jsxs)(i.Card,{padding:"lg",shadow:"md",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"VerfÃ¼gbare Aktionen"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(n.Button,{variant:"primary",fullWidth:!0,icon:(0,t.jsx)(z.Plus,{className:"w-4 h-4"}),onClick:()=>{alert("Assessment-Erstellung wird in v0.5 implementiert")},children:"Neues Assessment starten"}),(0,t.jsx)(n.Button,{variant:"outline",fullWidth:!0,onClick:()=>x.push("/clinician"),children:"ZurÃ¼ck zur PatientenÃ¼bersicht"})]})]})})]})]})}function Y({dataPoints:e,color:s,emptyMessage:a}){if(0===e.length)return(0,t.jsx)("div",{className:"flex items-center justify-center h-48 text-sm text-slate-400",children:a});let r=e=>160-(e-0)/100*160,l=t=>t/Math.max(e.length-1,1)*100,d=e.map((e,t)=>{let s=l(t),a=r(e.value);return`${s},${a}`}).join(" ");return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("svg",{viewBox:"0 0 100 160",className:"w-full h-48",preserveAspectRatio:"none",children:[[0,25,50,75,100].map(e=>{let s=r(e);return(0,t.jsx)("line",{x1:"0",y1:s,x2:100,y2:s,stroke:x.colors.neutral[200],strokeWidth:"0.5"},e)}),(0,t.jsx)("polyline",{points:d,fill:"none",stroke:s,strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),e.map((e,a)=>{let d=l(a),i=r(e.value);return(0,t.jsx)("circle",{cx:d,cy:i,r:"2",fill:s},a)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 mt-2",children:[(0,t.jsx)("span",{children:"0"}),(0,t.jsx)("span",{children:"100"})]})]})}function q({measures:e}){let s=e.filter(e=>null!==e.stress_score).reverse().map(e=>({value:e.stress_score,date:new Date(e.created_at)}));return(0,t.jsx)(Y,{dataPoints:s,color:x.colors.primary[500],emptyMessage:"Keine Stress-Daten vorhanden"})}function G({measures:e}){let s=e.filter(e=>null!==e.sleep_score).reverse().map(e=>({value:e.sleep_score,date:new Date(e.created_at)}));return(0,t.jsx)(Y,{dataPoints:s,color:x.colors.semantic.info,emptyMessage:"Keine Schlaf-Daten vorhanden"})}e.s(["default",()=>W],69678)}]);

//# sourceMappingURL=562d5666954e6ec5.js.map