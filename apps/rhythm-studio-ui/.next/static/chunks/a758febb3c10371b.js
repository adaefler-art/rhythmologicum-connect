(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88844,e=>{"use strict";let t=(0,e.i(68569).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],88844)},61911,e=>{"use strict";let t=(0,e.i(68569).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],61911)},86536,77705,e=>{"use strict";var t=e.i(68569);let a=(0,t.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],86536);let i=(0,t.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>i],77705)},47780,e=>{"use strict";let t=(0,e.i(68569).default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);e.s(["Palette",()=>t],47780)},67240,e=>{"use strict";let t=(0,e.i(68569).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],67240)},69761,e=>{"use strict";var t=e.i(18050),a=e.i(71645);e.i(47446);var i=e.i(67488),l=e.i(12911),s=e.i(32796),r=e.i(84584),n=e.i(52220),d=e.i(60289),c=e.i(61911),o=e.i(68569);let x=(0,o.default)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);var h=e.i(88844),m=e.i(40524),u=e.i(78583),f=e.i(47780);let g=(0,o.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),k=(0,o.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var v=e.i(86536),y=e.i(77705);let p=(0,o.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var b=e.i(67240);let j=[{value:"patient",label:"Patient"},{value:"clinician",label:"Clinician"},{value:"admin",label:"Administrator"},{value:"nurse",label:"Nurse"}],N={LayoutDashboard:(0,t.jsx)(d.LayoutDashboard,{className:"w-5 h-5"}),Users:(0,t.jsx)(c.Users,{className:"w-5 h-5"}),ClipboardCheck:(0,t.jsx)(x,{className:"w-5 h-5"}),Package:(0,t.jsx)(h.Package,{className:"w-5 h-5"}),Workflow:(0,t.jsx)(m.Workflow,{className:"w-5 h-5"}),FileText:(0,t.jsx)(u.FileText,{className:"w-5 h-5"}),Palette:(0,t.jsx)(f.Palette,{className:"w-5 h-5"}),History:(0,t.jsx)(g,{className:"w-5 h-5"})};function w(){let[e,d]=(0,a.useState)(!0),[c,o]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[m,u]=(0,a.useState)([]),[f,g]=(0,a.useState)([]),[w,_]=(0,a.useState)("clinician"),[C,M]=(0,a.useState)(!1);(0,a.useEffect)(()=>{S()},[]);let S=async()=>{try{d(!0),h(null);let e=await fetch("/api/admin/navigation");if(!e.ok)throw Error("Fehler beim Laden der Navigation-Konfiguration");let t=await e.json();u(t.data.items||[]),g(t.data.configs||[]),M(!1)}catch(e){console.error("Error loading navigation config:",e),h(e instanceof Error?e.message:"Fehler beim Laden")}finally{d(!1)}},E=()=>m.map(e=>{let t=f.find(t=>t.role===w&&t.navigation_item_id===e.id);return{item:e,config:t??null}}).filter(e=>null!==e.config).sort((e,t)=>(e.config?.order_index??0)-(t.config?.order_index??0)),z=e=>{g(t=>{if(t.find(t=>t.role===w&&t.navigation_item_id===e))return t.map(t=>t.role===w&&t.navigation_item_id===e?{...t,is_enabled:!t.is_enabled}:t);{if(!m.find(t=>t.id===e))return t;let a={id:`temp-${Date.now()}`,role:w,navigation_item_id:e,is_enabled:!0,custom_label:null,custom_icon:null,order_index:t.filter(e=>e.role===w).length};return[...t,a]}}),M(!0)},P=(e,t)=>{let a=E();if("up"===t&&0===e||"down"===t&&e===a.length-1)return;let i="up"===t?e-1:e+1,l=[...a];[l[e],l[i]]=[l[i],l[e]];let s=l.map((e,t)=>({...e.config,order_index:t}));g(e=>[...e.filter(e=>e.role!==w),...s]),M(!0)},T=async()=>{try{o(!0),h(null);let e=f.filter(e=>e.role===w).map(e=>({navigation_item_id:e.navigation_item_id,is_enabled:e.is_enabled,custom_label:e.custom_label,custom_icon:e.custom_icon,order_index:e.order_index}));if(!(await fetch(`/api/admin/navigation/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({configs:e})})).ok)throw Error("Fehler beim Speichern der Konfiguration");await S(),M(!1)}catch(e){console.error("Error saving navigation config:",e),h(e instanceof Error?e.message:"Fehler beim Speichern")}finally{o(!1)}};if(e)return(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(r.LoadingSpinner,{size:"lg",text:"Lade Navigation-Konfiguration…",centered:!0})});if(x&&0===m.length)return(0,t.jsx)(n.ErrorState,{message:x});let F=E();return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Navigation verwalten"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Konfigurieren Sie die Navigation für verschiedene Benutzerrollen"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:C&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Button,{variant:"secondary",onClick:()=>{S(),M(!1)},disabled:c,children:[(0,t.jsx)(b.RotateCcw,{className:"w-4 h-4 mr-2"}),"Zurücksetzen"]}),(0,t.jsxs)(i.Button,{onClick:T,disabled:c,children:[(0,t.jsx)(p,{className:"w-4 h-4 mr-2"}),c?"Speichern…":"Änderungen speichern"]})]})})]}),x&&(0,t.jsx)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:x})}),(0,t.jsx)(l.Card,{children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Rolle auswählen"}),(0,t.jsx)("div",{className:"flex gap-2",children:j.map(e=>(0,t.jsx)("button",{onClick:()=>_(e.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${w===e.value?"bg-sky-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:e.label},e.value))})]})}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Navigation für ",j.find(e=>e.value===w)?.label]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Aktivieren/deaktivieren Sie Menüpunkte und ändern Sie die Reihenfolge"})]}),(0,t.jsxs)("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[F.map((e,a)=>{let i=e.config?.is_enabled??!1,l=N[e.config?.custom_icon||e.item.default_icon||"FileText"];return(0,t.jsxs)("div",{className:`p-4 flex items-center gap-4 ${!i?"opacity-50":""}`,children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("button",{onClick:()=>P(a,"up"),disabled:0===a||!i,className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:(0,t.jsx)(k,{className:"w-4 h-4 text-slate-400 rotate-180"})}),(0,t.jsx)("button",{onClick:()=>P(a,"down"),disabled:a===F.length-1||!i,className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:(0,t.jsx)(k,{className:"w-4 h-4 text-slate-400"})})]}),(0,t.jsx)("div",{className:"flex-shrink-0 text-slate-500 dark:text-slate-400",children:l}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:e.config?.custom_label||e.item.default_label}),e.item.is_system&&(0,t.jsx)(s.Badge,{variant:"secondary",size:"sm",children:"System"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:e.item.route}),e.item.description&&(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:e.item.description})]}),(0,t.jsx)("button",{onClick:()=>z(e.item.id),className:`p-2 rounded-lg transition-colors ${i?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600"}`,title:i?"Deaktivieren":"Aktivieren",children:i?(0,t.jsx)(v.Eye,{className:"w-5 h-5"}):(0,t.jsx)(y.EyeOff,{className:"w-5 h-5"})})]},e.item.id)}),0===F.length&&(0,t.jsx)("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:"Keine Navigation-Einträge für diese Rolle konfiguriert"})]})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Verfügbare Navigation-Einträge"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Klicken Sie auf einen Eintrag, um ihn zur Navigation hinzuzufügen"})]}),(0,t.jsxs)("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[m.filter(e=>!f.find(t=>t.role===w&&t.navigation_item_id===e.id)).map(e=>{let a=N[e.default_icon||"FileText"];return(0,t.jsxs)("button",{onClick:()=>z(e.id),className:"w-full p-4 flex items-center gap-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors text-left",children:[(0,t.jsx)("div",{className:"flex-shrink-0 text-slate-500 dark:text-slate-400",children:a}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:e.default_label}),e.is_system&&(0,t.jsx)(s.Badge,{variant:"secondary",size:"sm",children:"System"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:e.route})]})]},e.id)}),0===m.filter(e=>!f.find(t=>t.role===w&&t.navigation_item_id===e.id)).length&&(0,t.jsx)("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:"Alle verfügbaren Einträge sind bereits hinzugefügt"})]})]})]})}e.s(["default",()=>w,"dynamic",0,"force-dynamic"],69761)}]);

//# sourceMappingURL=721f4aec288569f6.js.map