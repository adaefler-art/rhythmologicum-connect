(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67488,e=>{"use strict";var t=e.i(18050),s=e.i(71645);e.i(180);var a=e.i(53012);let r=(0,s.forwardRef)(({variant:e="primary",size:s="md",fullWidth:r=!1,icon:l,loading:n=!1,disabled:i=!1,className:d="",children:o,type:c="button",onClick:m,onMouseDown:x,onMouseUp:u,onTouchStart:h,onTouchEnd:b,onKeyDown:g,onKeyUp:p,onFocus:v,onBlur:f,...k},j)=>{let y={sm:{padding:"0.5rem 1rem",fontSize:"0.875rem",minHeight:"36px"},md:{padding:"0.625rem 1.5rem",fontSize:"1rem",minHeight:a.componentTokens.navigationButton.minHeight},lg:{padding:"0.875rem 2rem",fontSize:"1.125rem",minHeight:"56px"}},N={primary:`
        bg-sky-600 dark:bg-sky-500 text-white 
        hover:bg-sky-700 dark:hover:bg-sky-600
        active:bg-sky-800 dark:active:bg-sky-700
        disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:text-slate-500 dark:disabled:text-slate-400
        shadow-md hover:shadow-lg
      `,secondary:`
        bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100
        hover:bg-slate-200 dark:hover:bg-slate-600
        active:bg-slate-300 dark:active:bg-slate-500
        disabled:bg-slate-50 dark:disabled:bg-slate-800 disabled:text-slate-400 dark:disabled:text-slate-600
        border-2 border-slate-200 dark:border-slate-600
      `,outline:`
        bg-transparent text-sky-600 dark:text-sky-400
        border-2 border-sky-600 dark:border-sky-500
        hover:bg-sky-50 dark:hover:bg-sky-900/30
        active:bg-sky-100 dark:active:bg-sky-900/50
        disabled:border-slate-300 dark:disabled:border-slate-600 disabled:text-slate-400 dark:disabled:text-slate-500
      `,ghost:`
        bg-transparent text-slate-700 dark:text-slate-300
        hover:bg-slate-100 dark:hover:bg-slate-700
        active:bg-slate-200 dark:active:bg-slate-600
        disabled:text-slate-400 dark:disabled:text-slate-500
      `,destructive:`
        bg-red-600 dark:bg-red-500 text-white
        hover:bg-red-700 dark:hover:bg-red-600
        active:bg-red-800 dark:active:bg-red-700
        disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:text-slate-500 dark:disabled:text-slate-400
        shadow-md hover:shadow-lg
      `,danger:`
        bg-red-600 dark:bg-red-500 text-white
        hover:bg-red-700 dark:hover:bg-red-600
        active:bg-red-800 dark:active:bg-red-700
        disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:text-slate-500 dark:disabled:text-slate-400
        shadow-md hover:shadow-lg
      `},E=y[s],T=N[e],z=`
      inline-flex items-center justify-center gap-2
      font-semibold rounded-xl
      transition-all duration-200
      focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2
      disabled:cursor-not-allowed disabled:opacity-60
      active:scale-[0.98]
      touch-manipulation
      ${r?"w-full":""}
      ${T}
      ${d}
    `;return(0,t.jsxs)("button",{ref:j,type:c,disabled:i||n,className:z,style:{padding:E.padding,fontSize:E.fontSize,minHeight:E.minHeight},onClick:m,onMouseDown:x,onMouseUp:u,onTouchStart:h,onTouchEnd:b,onKeyDown:g,onKeyUp:p,onFocus:v,onBlur:f,"aria-busy":n,...k,children:[n&&(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!n&&l&&(0,t.jsx)("span",{className:"flex-shrink-0",children:l}),(0,t.jsx)("span",{children:o})]})});r.displayName="Button",e.s(["Button",0,r])},12911,e=>{"use strict";var t=e.i(18050);e.i(180);var s=e.i(53012);function a({header:e,footer:a,children:r,padding:l="lg",radius:n="xl",shadow:i="sm",interactive:d=!1,border:o=!0,onClick:c,className:m="",...x}){let u={none:"0",sm:s.spacing.md,md:s.spacing.lg,lg:s.spacing.xl},h={none:s.shadows.none,sm:s.shadows.sm,md:s.shadows.md,lg:s.shadows.lg},b={md:s.radii.md,lg:s.radii.lg,xl:s.radii.xl,"2xl":s.radii["2xl"]},g=u[l],p=h[i],v=b[n],f=`bg-white dark:bg-slate-800 ${o?"border border-slate-200 dark:border-slate-700":""} transition-colors duration-150`,k=d?"cursor-pointer hover:border-sky-400 dark:hover:border-sky-500 hover:shadow-lg active:scale-[0.99] transition-all duration-200":"";return c?(0,t.jsxs)("button",{type:"button",className:`${f} ${k} ${m}`,style:{borderRadius:v,boxShadow:p},onClick:c,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c())},children:[e&&(0,t.jsx)("div",{className:"border-b border-slate-200 dark:border-slate-700",style:{padding:g},children:e}),(0,t.jsx)("div",{style:{padding:g},children:r}),a&&(0,t.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-700",style:{padding:g},children:a})]}):(0,t.jsxs)("div",{className:`${f} ${k} ${m}`,style:{borderRadius:v,boxShadow:p},...x,children:[e&&(0,t.jsx)("div",{className:"border-b border-slate-200 dark:border-slate-700",style:{padding:g},children:e}),(0,t.jsx)("div",{style:{padding:g},children:r}),a&&(0,t.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-700",style:{padding:g},children:a})]})}e.s(["Card",()=>a])},84584,52220,e=>{"use strict";var t=e.i(18050);function s({size:e="md",text:s,centered:a=!1,className:r="",...l}){let n={sm:{spinner:"h-4 w-4",text:"text-xs"},md:{spinner:"h-8 w-8",text:"text-sm"},lg:{spinner:"h-12 w-12",text:"text-base"},xl:{spinner:"h-16 w-16",text:"text-lg"}}[e],i=`
    ${a?"flex flex-col items-center justify-center min-h-[200px]":"inline-flex flex-col items-center"}
    ${r}
  `;return(0,t.jsxs)("div",{className:i,role:"status","aria-live":"polite",...l,children:[(0,t.jsxs)("svg",{className:`animate-spin text-sky-600 ${n.spinner}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s&&(0,t.jsx)("p",{className:`mt-3 text-slate-600 font-medium ${n.text}`,children:s}),(0,t.jsx)("span",{className:"sr-only",children:s||"Laden..."})]})}e.s(["LoadingSpinner",()=>s],84584);var a=e.i(67488);function r({title:e="Ein Fehler ist aufgetreten",message:s="Bitte versuchen Sie es später erneut.",onRetry:r,retryText:l="Erneut versuchen",centered:n=!1,icon:i,className:d="",...o}){let c=`
    ${n?"flex flex-col items-center justify-center min-h-[300px] text-center":"flex flex-col items-center text-center"}
    ${d}
  `,m=(0,t.jsx)("svg",{className:"h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});return(0,t.jsxs)("div",{className:c,role:"alert","aria-live":"assertive",...o,children:[(0,t.jsx)("div",{className:"mb-4",children:i||m}),(0,t.jsx)("h2",{className:"text-xl md:text-2xl font-semibold text-slate-900 mb-2",children:e}),"string"==typeof s?(0,t.jsx)("p",{className:"text-sm md:text-base text-slate-600 mb-6 max-w-md",children:s}):(0,t.jsx)("div",{className:"text-sm md:text-base text-slate-600 mb-6 max-w-md",children:s}),r&&(0,t.jsx)(a.Button,{variant:"primary",onClick:r,icon:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),children:l})]})}e.s(["ErrorState",()=>r],52220)},32796,76107,e=>{"use strict";var t=e.i(18050);function s({variant:e="default",size:s="md",children:a,className:r=""}){return(0,t.jsx)("span",{className:`
        inline-flex items-center justify-center
        rounded-full border font-medium
        whitespace-nowrap
        ${{default:"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-600",success:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-400 border-emerald-200 dark:border-emerald-700",warning:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-400 border-amber-200 dark:border-amber-700",danger:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 border-red-200 dark:border-red-700",info:"bg-sky-100 dark:bg-sky-900/30 text-sky-800 dark:text-sky-400 border-sky-200 dark:border-sky-700",secondary:"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700"}[e]}
        ${{sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm"}[s]}
        ${r}
      `,children:a})}e.s(["Badge",()=>s],32796),e.i(180);var a=e.i(53012);function r({title:e,description:s,actions:r,className:l=""}){return(0,t.jsxs)("div",{className:`flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 ${l}`,style:{marginBottom:a.spacing.xl},children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-50 mb-2",children:e}),s&&(0,t.jsx)("p",{className:"text-base text-slate-600 dark:text-slate-300",children:s})]}),r&&(0,t.jsx)("div",{className:"flex flex-wrap gap-3 items-start shrink-0",children:r})]})}e.s(["PageHeader",()=>r],76107)},3308,e=>{"use strict";e.s(["PATIENT_SEX",0,{MALE:"male",FEMALE:"female",OTHER:"other",PREFER_NOT_TO_SAY:"prefer_not_to_say"},"QUESTION_TYPE",0,{RADIO:"radio",CHECKBOX:"checkbox",TEXT:"text",TEXTAREA:"textarea",NUMBER:"number",SCALE:"scale",SLIDER:"slider"}])},95256,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(18566),r=e.i(22016);e.i(47446);var l=e.i(67488),n=e.i(12911),i=e.i(84584),d=e.i(52220),o=e.i(64389),c=e.i(34683),m=e.i(81307),x=e.i(3308);let u=["http:","https:","mailto:","tel:"];function h(e,t=!1){if(!e||"string"!=typeof e||e.length>2048)return!1;let s=e.trim().toLowerCase();if(0===s.length)return!1;for(let e of["javascript:","vbscript:","file:","about:"])if(s.startsWith(e))return!1;if(s.startsWith("data:"))return t;if(s.startsWith("/")||s.startsWith("./")||s.startsWith("../"))return!0;try{let t=new URL(e);return u.includes(t.protocol)}catch{return!s.includes(":")}}let b=m.z.preprocess(e=>null===e?void 0:e,m.z.string().optional()).optional(),g=m.z.string().refine(e=>!e||""===e.trim()||h(e,!1),{message:"URL must use http:, https:, mailto:, tel:, or be a relative path. Dangerous protocols (javascript:, data:, vbscript:, file:) are not allowed."}),p=m.z.object({required:m.z.boolean().optional(),min:m.z.number().optional(),max:m.z.number().optional(),pattern:m.z.string().optional(),message:m.z.string().optional()}),v=m.z.object({value:m.z.string(),label:m.z.string(),helpText:b}),f=m.z.object({id:m.z.string(),key:m.z.string(),type:m.z.preprocess(function(e){if("string"!=typeof e)return e;let t=e.toLowerCase().trim();return Object.values(x.QUESTION_TYPE).includes(t)?t:({single_choice:x.QUESTION_TYPE.RADIO,"single-choice":x.QUESTION_TYPE.RADIO,select_one:x.QUESTION_TYPE.RADIO,"select-one":x.QUESTION_TYPE.RADIO,multiple_choice:x.QUESTION_TYPE.RADIO,multi_choice:x.QUESTION_TYPE.CHECKBOX,"multi-choice":x.QUESTION_TYPE.CHECKBOX,select_many:x.QUESTION_TYPE.CHECKBOX,"select-many":x.QUESTION_TYPE.CHECKBOX,multiple_select:x.QUESTION_TYPE.CHECKBOX,"multiple-select":x.QUESTION_TYPE.CHECKBOX,short_text:x.QUESTION_TYPE.TEXT,"short-text":x.QUESTION_TYPE.TEXT,string:x.QUESTION_TYPE.TEXT,long_text:x.QUESTION_TYPE.TEXTAREA,"long-text":x.QUESTION_TYPE.TEXTAREA,paragraph:x.QUESTION_TYPE.TEXTAREA,integer:x.QUESTION_TYPE.NUMBER,float:x.QUESTION_TYPE.NUMBER,decimal:x.QUESTION_TYPE.NUMBER,likert:x.QUESTION_TYPE.SCALE,likert_scale:x.QUESTION_TYPE.SCALE,"likert-scale":x.QUESTION_TYPE.SCALE,rating:x.QUESTION_TYPE.SCALE,range:x.QUESTION_TYPE.SLIDER})[t]??t},m.z.enum([x.QUESTION_TYPE.RADIO,x.QUESTION_TYPE.CHECKBOX,x.QUESTION_TYPE.TEXT,x.QUESTION_TYPE.TEXTAREA,x.QUESTION_TYPE.NUMBER,x.QUESTION_TYPE.SCALE,x.QUESTION_TYPE.SLIDER])),label:m.z.string(),helpText:b,required:m.z.boolean().default(!1),options:m.z.array(v).optional(),validation:p.optional(),minValue:m.z.number().optional(),maxValue:m.z.number().optional()}),k=m.z.object({type:m.z.enum(["show","hide","skip"]),conditions:m.z.array(m.z.object({questionId:m.z.string(),operator:m.z.enum(["eq","neq","gt","gte","lt","lte","in","notIn"]),value:m.z.union([m.z.string(),m.z.number(),m.z.boolean(),m.z.array(m.z.string())])})),logic:m.z.enum(["and","or"]).default("and")}),j=m.z.object({id:m.z.string(),title:m.z.string(),description:m.z.string().optional(),questions:m.z.array(f),conditionalLogic:k.optional()}),y=m.z.object({version:m.z.string().default("1.0"),steps:m.z.array(j),conditionalLogic:m.z.array(k).optional(),metadata:m.z.record(m.z.string(),m.z.any()).optional()}),N={HERO:"hero",TEXT:"text",IMAGE:"image",VIDEO:"video",MARKDOWN:"markdown",CTA:"cta",DIVIDER:"divider"},E=m.z.object({key:m.z.string().min(1).max(200),type:m.z.enum([N.HERO,N.TEXT,N.IMAGE,N.VIDEO,N.MARKDOWN,N.CTA,N.DIVIDER]),contentRef:m.z.string().max(2048).optional(),content:m.z.record(m.z.string(),m.z.any()).optional(),orderIndex:m.z.number().int().nonnegative().optional()}).strict().refine(e=>!e.content||(!("href"in e.content)||"string"!=typeof e.content.href||!!h(e.content.href,!1))&&(!("url"in e.content)||"string"!=typeof e.content.url||!!h(e.content.url,!1))&&(!("backgroundImage"in e.content)||"string"!=typeof e.content.backgroundImage||!e.content.backgroundImage||!!h(e.content.backgroundImage,!1)),{message:"Content URLs must use safe protocols (http:, https:, mailto:, tel:, or relative paths). Dangerous protocols (javascript:, data:, vbscript:, file:) are not allowed."}),T=m.z.object({slug:m.z.string().min(1).max(200).regex(/^[a-z0-9-]+$/,"Slug must be lowercase alphanumeric with hyphens"),title:m.z.string().min(1).max(500),description:m.z.string().max(2e3).optional(),sections:m.z.array(E).max(100),metadata:m.z.record(m.z.string(),m.z.any()).optional()}).strict(),z=m.z.object({version:m.z.string().max(20).default("1.0"),pages:m.z.array(T).max(50),assets:m.z.array(m.z.object({key:m.z.string().min(1).max(200),type:m.z.enum(["image","video","audio","document"]),url:g.min(1).max(2048),metadata:m.z.record(m.z.string(),m.z.any()).optional()}).strict()).max(200).optional(),metadata:m.z.record(m.z.string(),m.z.any()).optional()}).strict();function w(){let e=(0,a.useParams)(),o=(0,a.useRouter)(),c=e.identifier,[m,x]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null),[p,v]=(0,s.useState)(null),[f,k]=(0,s.useState)(null),[j,y]=(0,s.useState)(0),[E,T]=(0,s.useState)(null),[z,w]=(0,s.useState)(null),[I,C]=(0,s.useState)([]),O=(0,s.useCallback)(async()=>{try{x(!0),g(null);let e=await fetch(`/api/admin/funnels/${c}`);if(!e.ok)throw Error("Failed to load funnel");let t=await e.json(),s=t.data?.versions?.[0]?.id||t.data?.default_version?.id;if(!s)throw Error("No funnel version found for funnel");let a=await fetch(`/api/admin/funnel-versions/${s}/manifest`);if(!a.ok)throw Error("Failed to load manifest");let r=await a.json();if(!r.data)throw Error("No manifest data returned");v(r.data),k(r.data.manifest)}catch(e){console.error("Error loading funnel version:",e),g(e instanceof Error?e.message:"Failed to load funnel")}finally{x(!1)}},[c]);(0,s.useEffect)(()=>{O()},[O]);let _=async()=>{if(p&&f){C([]);try{h(!0);let e=await fetch(`/api/admin/funnel-versions/${p.id}/manifest`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({manifest:f})});if(!e.ok){let t=await e.json();if(t.error?.details){let e=t.error.details;C(e.map(e=>`${e.path.join(".")}: ${e.message}`))}throw Error(t.error?.message||"Failed to save manifest")}let t=await e.json();t.data&&(v(t.data),k(t.data.manifest)),alert("Manifest erfolgreich gespeichert")}catch(e){console.error("Error saving manifest:",e),alert(`Fehler beim Speichern: ${e instanceof Error?e.message:"Unknown error"}`)}finally{h(!1)}}},U=(e,t)=>{if(!f)return;let s=f.pages[j];if(!s)return;let a="up"===t?e-1:e+1;if(a<0||a>=s.sections.length)return;let r=[...s.sections],[l]=r.splice(e,1);r.splice(a,0,l),r.forEach((e,t)=>{e.orderIndex=t});let n=[...f.pages];n[j]={...s,sections:r},k({...f,pages:n})};if(m)return(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(i.LoadingSpinner,{size:"lg",text:"Lade Manifest…",centered:!0})});if(b||!f||!p)return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsx)(d.ErrorState,{title:"Fehler beim Laden",message:b||"Manifest nicht gefunden",centered:!0}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)(r.default,{href:`/clinician/funnels/${c}`,className:"inline-flex items-center text-sm text-sky-600 hover:text-sky-700 font-medium",children:"← Zurück zum Funnel"})})]});let A=f.pages[j];return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(r.default,{href:`/clinician/funnels/${c}`,className:"inline-flex items-center text-sm text-sky-600 hover:text-sky-700 font-medium",children:"← Zurück zum Funnel"})}),(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-50 mb-2",children:"Content Block Editor"}),(0,t.jsxs)("p",{className:"text-slate-600 dark:text-slate-300",children:["Manifest Version: ",p.version," • ",f.pages.length," Seite(n)"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{variant:"secondary",size:"md",onClick:()=>o.back(),children:"Abbrechen"}),(0,t.jsx)(l.Button,{variant:"primary",size:"md",onClick:_,disabled:u,children:u?"Speichert…":"Speichern"})]})]})]}),I.length>0&&(0,t.jsxs)(n.Card,{padding:"md",className:"mb-6 bg-red-50 border-red-200",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-red-900 mb-2",children:"Validierungsfehler:"}),(0,t.jsx)("ul",{className:"list-disc list-inside text-sm text-red-800 space-y-1",children:I.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(n.Card,{padding:"md",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50 mb-4",children:"Seiten"}),(0,t.jsx)("div",{className:"space-y-2",children:f.pages.map((e,s)=>(0,t.jsxs)("button",{onClick:()=>{y(s),T(null),w(null)},className:`w-full text-left px-3 py-2 rounded transition-colors ${j===s?"bg-sky-100 text-sky-900 dark:bg-sky-900 dark:text-sky-50":"hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300"}`,children:[(0,t.jsx)("div",{className:"font-medium truncate",children:e.title}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:[e.slug," • ",e.sections.length," Block(s)"]})]},e.slug))})]})}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(n.Card,{padding:"md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50",children:["Blocks: ",A?.title]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(l.Button,{variant:"primary",size:"sm",children:"+ Block"}),(0,t.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10",children:Object.entries(N).map(([e,s])=>(0,t.jsx)("button",{onClick:()=>(e=>{if(!f)return;let t=f.pages[j];if(!t)return;let s={key:`section-${Date.now()}`,type:e,content:{},orderIndex:t.sections.length},a=[...f.pages];a[j]={...t,sections:[...t.sections,s]},k({...f,pages:a})})(s),className:"block w-full text-left px-4 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-700 first:rounded-t-lg last:rounded-b-lg",children:e},s))})]})]}),(0,t.jsx)("div",{className:"space-y-2",children:A?.sections.map((e,s)=>(0,t.jsx)("div",{className:`border rounded-lg transition-colors ${E===s?"border-sky-500 bg-sky-50 dark:bg-sky-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:(0,t.jsx)("button",{onClick:()=>{T(s),w(e)},className:"w-full text-left px-3 py-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:e.type}),(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:e.key})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),U(s,"up")},disabled:0===s,className:"p-1 text-slate-500 hover:text-slate-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Nach oben",children:"↑"}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),U(s,"down")},disabled:s===A.sections.length-1,className:"p-1 text-slate-500 hover:text-slate-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Nach unten",children:"↓"}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{if(!f||!confirm("Block wirklich löschen?"))return;let t=f.pages[j];if(!t)return;let s=t.sections.filter((t,s)=>s!==e);s.forEach((e,t)=>{e.orderIndex=t});let a=[...f.pages];a[j]={...t,sections:s},k({...f,pages:a}),E===e&&(T(null),w(null))})(s)},className:"p-1 text-red-500 hover:text-red-700",title:"Löschen",children:"✕"})]})]})})},e.key))}),A?.sections.length===0&&(0,t.jsx)("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400 text-sm",children:"Keine Blocks vorhanden. Fügen Sie einen Block hinzu."})]})}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(n.Card,{padding:"md",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50 mb-4",children:"Block bearbeiten"}),z&&null!==E?(0,t.jsx)(S,{section:z,onChange:e=>((e,t)=>{if(!f)return;let s=f.pages[j];if(!s)return;let a=[...s.sections];a[e]={...a[e],content:t};let r=[...f.pages];r[j]={...s,sections:a},k({...f,pages:r})})(E,e)}):(0,t.jsx)("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400 text-sm",children:"Wählen Sie einen Block zum Bearbeiten aus"})]})})]})]})}function S({section:e,onChange:s}){let a=e.content||{},r=(e,t)=>{s({...a,[e]:t})};switch(e.type){case N.HERO:return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Titel"}),(0,t.jsx)(o.Input,{type:"text",value:a.title||"",onChange:e=>r("title",e.target.value),inputSize:"md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Untertitel"}),(0,t.jsx)(o.Input,{type:"text",value:a.subtitle||"",onChange:e=>r("subtitle",e.target.value),inputSize:"md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ausrichtung"}),(0,t.jsxs)("select",{value:a.alignment||"center",onChange:e=>r("alignment",e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[(0,t.jsx)("option",{value:"left",children:"Links"}),(0,t.jsx)("option",{value:"center",children:"Zentriert"}),(0,t.jsx)("option",{value:"right",children:"Rechts"})]})]})]});case N.TEXT:return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Titel (optional)"}),(0,t.jsx)(o.Input,{type:"text",value:a.title||"",onChange:e=>r("title",e.target.value),inputSize:"md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Text"}),(0,t.jsx)(c.Textarea,{value:a.text||"",onChange:e=>r("text",e.target.value),rows:5,textareaSize:"md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ausrichtung"}),(0,t.jsxs)("select",{value:a.alignment||"left",onChange:e=>r("alignment",e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[(0,t.jsx)("option",{value:"left",children:"Links"}),(0,t.jsx)("option",{value:"center",children:"Zentriert"}),(0,t.jsx)("option",{value:"right",children:"Rechts"})]})]})]});case N.IMAGE:return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bild-URL"}),(0,t.jsx)(o.Input,{type:"text",value:a.url||"",onChange:e=>r("url",e.target.value),inputSize:"md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Alt-Text"}),(0,t.jsx)(o.Input,{type:"text",value:a.alt||"",onChange:e=>r("alt",e.target.value),inputSize:"md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bildunterschrift (optional)"}),(0,t.jsx)(o.Input,{type:"text",value:a.caption||"",onChange:e=>r("caption",e.target.value),inputSize:"md"})]})]});case N.VIDEO:return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Video-URL"}),(0,t.jsx)(o.Input,{type:"text",value:a.url||"",onChange:e=>r("url",e.target.value),inputSize:"md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Untertitel (optional)"}),(0,t.jsx)(o.Input,{type:"text",value:a.caption||"",onChange:e=>r("caption",e.target.value),inputSize:"md"})]})]});case N.MARKDOWN:return(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Markdown-Inhalt"}),(0,t.jsx)(c.Textarea,{value:a.markdown||"",onChange:e=>r("markdown",e.target.value),rows:10,textareaSize:"md",className:"font-mono text-sm"})]})});case N.CTA:return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Button-Text"}),(0,t.jsx)(o.Input,{type:"text",value:a.text||"",onChange:e=>r("text",e.target.value),inputSize:"md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Link (href)"}),(0,t.jsx)(o.Input,{type:"text",value:a.href||"",onChange:e=>r("href",e.target.value),inputSize:"md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Variante"}),(0,t.jsxs)("select",{value:a.variant||"primary",onChange:e=>r("variant",e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[(0,t.jsx)("option",{value:"primary",children:"Primary"}),(0,t.jsx)("option",{value:"secondary",children:"Secondary"}),(0,t.jsx)("option",{value:"outline",children:"Outline"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ausrichtung"}),(0,t.jsxs)("select",{value:a.alignment||"center",onChange:e=>r("alignment",e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[(0,t.jsx)("option",{value:"left",children:"Links"}),(0,t.jsx)("option",{value:"center",children:"Zentriert"}),(0,t.jsx)("option",{value:"right",children:"Rechts"})]})]})]});case N.DIVIDER:return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Stil"}),(0,t.jsxs)("select",{value:a.style||"solid",onChange:e=>r("style",e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[(0,t.jsx)("option",{value:"solid",children:"Durchgezogen"}),(0,t.jsx)("option",{value:"dashed",children:"Gestrichelt"}),(0,t.jsx)("option",{value:"dotted",children:"Gepunktet"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Abstand"}),(0,t.jsxs)("select",{value:a.spacing||"md",onChange:e=>r("spacing",e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[(0,t.jsx)("option",{value:"sm",children:"Klein"}),(0,t.jsx)("option",{value:"md",children:"Mittel"}),(0,t.jsx)("option",{value:"lg",children:"Groß"})]})]})]});default:return(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-red-800 font-semibold",children:"Unbekannter Block-Typ"}),(0,t.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:['Typ "',e.type,'" wird nicht unterstützt. Dieser Block kann nicht bearbeitet werden.']})]})}}m.z.object({questionnaire_config:y,content_manifest:z,algorithm_bundle_version:m.z.string(),prompt_version:m.z.string()}),e.s(["default",()=>w,"dynamic",0,"force-dynamic"],95256)}]);

//# sourceMappingURL=cb23c23caa745577.js.map