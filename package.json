{
  "name": "walkingskeleton",
  "version": "0.8.0",
  "private": true,
  "workspaces": [
    "apps/*",
    "packages/*"
  ],
  "scripts": {
    "dev": "npm run dev:studio",
    "dev:engine": "npm run --workspace apps/rhythm-engine dev",
    "dev:studio": "npm run --workspace apps/rhythm-studio-ui dev",
    "dev:patient": "npm run --workspace apps/rhythm-patient-ui dev",
    "prebuild": "node scripts/generate-version-all.mjs",
    "preflight": "pwsh -File scripts/ci/preflight.ps1",
    "build": "npm run build:studio && npm run build:patient",
    "build:engine": "npm run --workspace apps/rhythm-engine build",
    "build:studio": "npm run --workspace apps/rhythm-studio-ui build",
    "build:patient": "npm run --workspace apps/rhythm-patient-ui build",
    "start": "npm run start:studio",
    "start:studio": "npm run --workspace apps/rhythm-studio-ui start",
    "start:patient": "npm run --workspace apps/rhythm-patient-ui start",
    "lint": "eslint",
    "lint:changed": "node tools/lint-changed-lines.mjs",
    "hooks:install": "node tools/install-git-hooks.mjs",
    "lint:migrations": "bash scripts/check-migrations.sh",
    "lint:schema": "pwsh -File scripts/db/lint-migrations.ps1",
    "tokens:export": "node scripts/design/export-tokens.js",
    "verify": "node scripts/ci/verify-critical-api-handlers.js",
    "verify:funnel-definitions": "node scripts/ci/verify-funnel-definitions.mjs",
    "verify:required-funnels": "node scripts/ci/verify-required-funnel-definitions.mjs",
    "verify:e74-2": "node scripts/ci/verify-e74-2-canonical-v1.mjs",
    "test:e74-2": "node scripts/ci/test-e74-2-logic.mjs",
    "verify:e74-3": "node scripts/ci/verify-e74-3-guardrails.mjs",
    "verify:e74-4": "node scripts/ci/verify-e74-4-guardrails.mjs",
    "verify:e74-5": "node scripts/ci/verify-e74-5-persistence.mjs",
    "verify:e74-6": "node scripts/ci/verify-e74-6-patient-funnels.mjs",
    "verify:e74-7": "node scripts/ci/verify-e74-7-idempotency.mjs",
    "verify:e75-2": "node scripts/ci/verify-e75-2-anamnesis-api.mjs",
    "verify:e75-3": "node scripts/ci/verify-e75-3-ui.mjs",
    "verify:e75-4": "node scripts/ci/verify-e75-4-anamnesis-ui.mjs",
    "verify:e75-7:rls": "bash scripts/ci/verify-rls-smoke.sh",
    "verify:e75-7:docs": "bash scripts/ci/verify-e75-7-docs.sh",
    "verify:e75-7": "npm run verify:e75-7:docs",
    "verify:e76-1": "node scripts/ci/verify-e76-1-mcp-server.mjs",
    "verify:e76-2": "node scripts/ci/verify-e76-2-context-pack.mjs",
    "verify:e76-4": "node scripts/ci/verify-e76-4-diagnosis-worker.mjs",
    "verify:e76-5": "node scripts/ci/verify-e76-5-diagnosis-prompt.mjs",
    "verify:e76-6": "node scripts/ci/verify-e76-6-diagnosis-ui.mjs",
    "verify:e76-8": "node scripts/ci/verify-e76-8-idempotency.mjs",
    "verify:issue-6": "node scripts/ci/verify-issue-6-uncertainty.mjs",
    "verify:e76-9": "node scripts/ci/verify-endpoint-wiring.mjs",
    "verify:e78-1": "node scripts/ci/verify-e78-1-inbox.mjs",
    "verify:e78-2": "node scripts/ci/verify-e78-2-triage-view.mjs",
    "verify:e78-3": "node scripts/ci/verify-e78-3-triage-api.mjs",
    "verify:e78-4": "node scripts/ci/verify-e78-4-actions.mjs",
    "verify:e78-5": "node scripts/ci/verify-e78-5-effective-state.mjs",
    "verify:e78-6": "node scripts/ci/verify-e78-6-sla-config.mjs",
    "verify:e78-7": "node scripts/ci/verify-e78-7-inbox-ui.mjs",
    "verify:issue-9": "node scripts/ci/verify-issue-9-colleague-mode.mjs",
    "verify:issue-10": "node scripts/ci/verify-issue-10-clinical-intake.mjs",
    "verify:meta-schema": "node scripts/ci/check-meta-schema.mjs",
    "verify:endpoint-wiring": "node scripts/ci/verify-endpoint-wiring.mjs",
    "verify:ui-v2": "node scripts/verify-ui-v2.mjs",
    "verify:e71": "npm run build && node scripts/verify-e71.mjs",
    "verify:narrow-box": "node scripts/guard-no-narrow-screens.mjs",
    "verify:legacy": "node scripts/verify-legacy-ghosting.mjs",
    "verify:diagnosis:smoke": "node scripts/verify/verify-diagnosis-smoke.mjs",
    "cre:coherence": "tsx scripts/cre/run-coherence-battery.ts",
    "cre:golden-set": "tsx scripts/cre/run-coherence-battery.ts",
    "cre:adversarial": "tsx scripts/cre/run-adversarial-dialog-battery.ts",
    "check:assistant-identity": "node scripts/ci/check-assistant-config.mjs",
    "db:typegen": "pwsh -File scripts/db/typegen.ps1 -Generate",
    "db:typegen:verify": "pwsh -File scripts/db/typegen.ps1 -Verify",
    "db:reset": "supabase db reset",
    "db:migrate": "supabase migration up",
    "db:seed": "supabase db reset",
    "db:seed:verify": "pwsh -File scripts/verify/verify-e6-4-10-seed.ps1",
    "db:seed:org": "node scripts/db/seed-org-membership.js",
    "db:diff": "supabase db diff",
    "db:verify": "pwsh -File scripts/verify-db-determinism.ps1",
    "db:verify-sync": "pwsh -File scripts/verify-migration-sync.ps1",
    "db:access-audit": "node scripts/db/audit-db-access.js",
    "db:access-verify": "node scripts/db/verify-db-access.js",
    "api:catalog": "node scripts/dev/endpoint-catalog/generate.js --repo-root . --out-dir docs/api --allowlist docs/api/endpoint-allowlist.json",
    "api:catalog:verify": "pwsh -File scripts/ci/verify-endpoint-catalog.ps1",
    "api:handlers:verify": "node scripts/ci/verify-critical-api-handlers.js",
    "mobile:contracts": "node scripts/dev/mobile-contract/export.js --out docs/dev/mobile-contracts.v1.json",
    "mobile:contracts:verify": "pwsh -File scripts/ci/verify-mobile-contracts.ps1",
    "test": "jest",
    "test:core": "npm run --workspace packages/rhythm-core --if-present test",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:inbox": "jest test/e78-9-inbox-contracts.test.ts",
    "test:patient:e2e": "playwright test tests/e2e/patient-intake-start-cta.spec.ts tests/e2e/patient-followup-loop.spec.ts tests/e2e/patient-safety-gate-support.spec.ts",
    "test:studio:layout": "playwright test tests/studio-admin-layout.spec.ts",
    "test:studio:e2e": "playwright test",
    "smoke:inbox": "node --loader ts-node/esm scripts/ci/smoke-e78-9-inbox.mts"
  },
  "dependencies": {
    "@anthropic-ai/sdk": "^0.71.0",
    "@react-pdf/renderer": "^4.3.2",
    "@supabase/ssr": "^0.8.0",
    "dotenv": "^17.2.3",
    "framer-motion": "^12.23.25",
    "lucide-react": "^0.556.0",
    "next": "16.1.4",
    "pg": "^8.16.3",
    "react": "19.2.3",
    "react-dom": "19.2.3",
    "react-markdown": "^10.1.0",
    "remark-gfm": "^4.0.1",
    "rhythm-core": "file:packages/rhythm-core",
    "zod": "^4.2.1"
  },
  "devDependencies": {
    "@playwright/test": "^1.58.0",
    "@supabase/supabase-js": "^2.93.3",
    "@tailwindcss/postcss": "^4",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.0",
    "@types/jest": "^30.0.0",
    "@types/node": "^24.10.1",
    "@types/pg": "^8.15.6",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "16.0.5",
    "eslint-config-prettier": "^10.1.8",
    "eslint-plugin-prettier": "^5.5.4",
    "eslint-plugin-react-hooks": "^7.0.1",
    "jest": "^30.2.0",
    "jest-environment-jsdom": "^30.2.0",
    "playwright": "^1.58.0",
    "prettier": "^3.7.3",
    "server-only": "^0.0.1",
    "supabase": "2.63.1",
    "tailwindcss": "^4",
    "ts-jest": "^29.4.6",
    "tsx": "^4.21.0",
    "typescript": "5.9.3",
    "undici": "^7.16.0"
  },
  "overrides": {
    "next": "16.1.4",
    "react": "19.2.3",
    "react-dom": "19.2.3"
  }
}
