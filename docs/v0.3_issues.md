
Sie enthält alle EPICs und Issues für v0.3:

- Mobile UI System (Card-Stack + Swipe) → EPIC A  
- Funnel Engine v2 (JSON Config + Navigation + Validation) → EPIC B  
- Parametrisierbares Designsystem → EPIC C  
- MDX / Content Pagessteuerung → EPIC D  
  (direkt verknüpft mit Migration 03_create_content_pages.sql)  
- QA + Performance → EPIC E

Die dortigen Titel, Aufgaben und Acceptance Criteria sind **verbindlich**.

-----------------------------------------
## V0.3 – UMSETZUNGSRICHTLINIEN (ZUSAMMENGEFASST)
-----------------------------------------

### EPIC A – Mobile UI System
- `<MobileQuestionCard />`
- Swipe Navigation (Framer Motion)
- Mobile Answer Buttons
- Responsive Layout Switcher
- Save-on-Tap + JSON-config-basierte Darstellung

### EPIC B – Funnel Engine v2
**Achtung:** Muss konsistent mit Migrationen 01 + 02 sein.

- JSON Config erweitern (mobile_layout, answer_display, swipe_enabled, mdx_before, mdx_after)
- Navigation API optimieren (<150ms)
- Validation v2: Auto-Save + server-side checks
- Antworten müssen in `assessment_answers` gespeichert werden  
  → Schema stammt aus Migration 01/02 oder bestehenden Files

### EPIC C – Parametrisierbares Designsystem
- Tokens (Spacing, Font Scale, Motion)
- Mobile shadcn/ui Komponenten

### EPIC D – Redaktionelle Seiten (MDX)
**Direkte Entsprechung zu Migration `03_create_content_pages.sql`:**

- MDX Loader  
- Bindung der Content-Pages an Funnels  
- Sequence-Steuerung über JSON (`mdx_before`, `mdx_after`)  
- Nutzung der neuen Tabelle aus Migration 03

### EPIC E – QA & Performance
- Device Tests  
- Recovery Flow  
- Performance (Swipe FPS, LCP < 2.5s)

-----------------------------------------
## NICHT ERLAUBT
-----------------------------------------
❌ Keine neuen Tabellen anlegen, außer sie basieren direkt auf den drei genannten Migrationen  
❌ Keine Doppelung bestehender DB-Strukturen  
❌ Keine Änderung des Storage-Modells ohne expliziten Bedarf  

-----------------------------------------
## WICHTIGE ARCHITEKTUR-INVARIANTEN
-----------------------------------------

1. **Funnel-Definitionen & Configs** werden aus den Tabellen geladen, die in  
   `01_create_funnel_tables.sql` definiert sind.

2. **Assessments gehören immer zu einem Funnel**  
   → enforced durch `02_add_funnel_id_to_assessments.sql`.

3. **Content Pages müssen vollständig über die Tabelle aus**  
   `03_create_content_pages.sql`  
   **verwaltbar sein**.

4. MDX-Seiten dürfen nur gerendert werden, wenn sie über diese Tabelle referenziert sind.

-----------------------------------------
## ARBEITSANWEISUNG AN COPILOT
-----------------------------------------

1. Lade die drei Migrationsdateien vollständig.  
2. Lade die Datei `docs/ISSUES_v0.3.md`.  
3. Erstelle einen detaillierten internen Implementierungsplan.  
4. Beginne die Umsetzung in einem neuen Branch:  
5. Implementiere EPIC A → B → C → D → E exakt nach Spezifikation.  
6. Stelle sicher, dass alle Änderungen vollständig kompatibel zum DB-Schema aus den Migrationen sind.  

Wenn etwas unklar erscheint oder Spezifikation und Migration kollidieren:  
→ **Migrationen haben Vorrang**.  
→ Danach **Spezifikation aus `ISSUES_v0.3.md`**.  
→ Dann erst UI/Implementation.

-----------------------------------------
## START
-----------------------------------------
Beginne jetzt mit dem Einlesen der Dateien und erstelle deinen Plan für v0.3.