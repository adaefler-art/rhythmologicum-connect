# V05-I02.1 Visual Verification Evidence

## UI Screenshot Description

**Page:** `/patient/funnels` (Funnel Catalog)

### Layout Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back         Funnel Katalog                          â”‚
â”‚              Rhythmologicum Connect                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  VerfÃ¼gbare Assessments                                 â”‚
â”‚  WÃ¤hlen Sie ein Assessment aus, um zu starten           â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ§˜â€â™€ï¸  Stress & Belastung                        â–¼  â”‚ â”‚
â”‚  â”‚     Assessments zur Erfassung von Stress...        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                      â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  [Heart Icon Pulse]  â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚                      â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  STRESS-ASSESSMENT   â”‚ â”‚    [Future Funnel]   â”‚     â”‚
â”‚  â”‚                      â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  Stress & Resilienz  â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  Erfassen Sie Ihr... â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚                      â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  â±ï¸ ca. 10 Min.      â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  v1.0.0              â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚                      â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  âœ“ Stresslevel...    â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  âœ“ Risikofaktoren... â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  âœ“ Handlungsempf...  â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚                      â”‚ â”‚                      â”‚     â”‚
â”‚  â”‚  Assessment starten â†’â”‚ â”‚                      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ’ª  Resilienz                                  â–¼  â”‚ â”‚
â”‚  â”‚     Assessments zur Messung von Resilienz...       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  [Collapsed - no funnels yet]                           â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ˜´  Schlaf                                     â–¼  â”‚ â”‚
â”‚  â”‚     Assessments zur SchlafqualitÃ¤t...              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  [Collapsed - no funnels yet]                           â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Visual Elements

**Header:**

- Back button (â†)
- Title: "Funnel Katalog"
- Subtitle: "Rhythmologicum Connect"
- Gradient background: sky-50 â†’ slate-50 â†’ slate-100

**Main Content:**

- Heading: "VerfÃ¼gbare Assessments" (2xl, bold)
- Subtitle: "WÃ¤hlen Sie ein Assessment aus, um zu starten"

**Pillar Sections (Accordion):**

1. **Stress & Belastung** (ğŸ§˜â€â™€ï¸) - EXPANDED
   - White card with border
   - Icon on left, title in center, chevron on right
   - Description below title
   - Contains 1 funnel card (Stress Assessment)

2. **Resilienz** (ğŸ’ª) - COLLAPSED
   - White card with border
   - No funnels visible (empty state when expanded)

3. **Schlaf** (ğŸ˜´) - COLLAPSED
   - White card with border
   - No funnels visible (empty state when expanded)

**Funnel Card (Stress Assessment):**

- White background with shadow
- Gradient icon container (sky-100 â†’ sky-50)
- Pulsing heart icon (rose-600)
- Badge: "STRESS-ASSESSMENT" (sky-600, uppercase)
- Title: "Stress & Resilienz" (xl, bold)
- Description: First ~100 chars truncated
- Metadata badges:
  - "â±ï¸ ca. 10 Min." (slate-100 bg)
  - "v1.0.0" (slate-100 bg)
- Outcomes list (checkmarks):
  - âœ“ Stresslevel ermitteln
  - âœ“ Risikofaktoren identifizieren
  - âœ“ Handlungsempfehlungen erhalten
- CTA: "Assessment starten â†’" (sky-600, bottom)

### Responsive Behavior

**Mobile (< 768px):**

- Single column layout
- Full-width funnel cards
- Pillars stack vertically
- Touch-friendly 44px minimum tap targets

**Tablet (768px - 1024px):**

- 2-column grid for funnel cards
- Pillars remain full-width accordions

**Desktop (> 1024px):**

- 3-column grid for funnel cards (if many funnels)
- Max-width container (6xl)
- Centered layout

### States

**Loading State:**

- Spinning circle (sky-500)
- Text: "Lade Assessments..."

**Error State:**

- Red banner (red-50 bg, red-200 border)
- Title: "Fehler"
- Message: "Katalog konnte nicht geladen werden."

**Empty State (per pillar):**

- Gray text: "Keine Assessments in dieser Kategorie verfÃ¼gbar"
- Centered in pillar section

**Empty State (all):**

- Centered message: "Derzeit sind keine Assessments verfÃ¼gbar"

### Interactions

1. **Click Pillar Header:**
   - Toggles accordion open/closed
   - Chevron rotates 180Â°
   - Smooth height transition

2. **Click Funnel Card:**
   - Navigates to `/patient/funnel/stress-assessment/intro`
   - Card scales to 0.98 on active press
   - Smooth shadow transition on hover

3. **Hover Funnel Card:**
   - Border changes to sky-400
   - Shadow increases (xl)
   - Smooth 150ms transition

### Dark Mode

All elements support dark mode:

- Background: slate-800 â†’ slate-900 â†’ slate-950
- Cards: slate-800 with slate-700 borders
- Text: slate-100 (headings), slate-300/400 (body)
- Icons maintain their colors (rose-500, sky-400)
- Badges: slate-700 bg with slate-300 text

---

## API Response Example

### GET /api/funnels/catalog

```json
{
  "success": true,
  "data": {
    "pillars": [
      {
        "pillar": {
          "id": "uuid-stress",
          "key": "stress",
          "title": "Stress & Belastung",
          "description": "Assessments zur Erfassung von Stress und psychischer Belastung",
          "sort_order": 1
        },
        "funnels": [
          {
            "id": "uuid-funnel-stress",
            "slug": "stress-assessment",
            "title": "Stress Assessment",
            "subtitle": "Erfassen Sie Ihr aktuelles Stresslevel",
            "description": "Ein wissenschaftlich validiertes Assessment zur Messung von Stress und psychischer Belastung",
            "pillar_id": "uuid-stress",
            "est_duration_min": 10,
            "outcomes": [
              "Stresslevel ermitteln",
              "Risikofaktoren identifizieren",
              "Handlungsempfehlungen erhalten"
            ],
            "is_active": true,
            "default_version_id": "uuid-version-1.0.0",
            "default_version": "1.0.0"
          }
        ]
      },
      {
        "pillar": {
          "id": "uuid-resilience",
          "key": "resilience",
          "title": "Resilienz",
          "description": "Assessments zur Messung von Resilienz und BewÃ¤ltigungsstrategien",
          "sort_order": 2
        },
        "funnels": []
      },
      {
        "pillar": {
          "id": "uuid-sleep",
          "key": "sleep",
          "title": "Schlaf",
          "description": "Assessments zur SchlafqualitÃ¤t und SchlafstÃ¶rungen",
          "sort_order": 3
        },
        "funnels": []
      }
    ],
    "uncategorized_funnels": []
  }
}
```

---

## Manual Testing Checklist

- [ ] Navigate to `/patient/funnels` while authenticated
- [ ] Verify page loads without errors
- [ ] Check that "Stress & Belastung" pillar is auto-expanded
- [ ] Click pillar header to collapse/expand
- [ ] Verify chevron icon rotates
- [ ] Hover over funnel card
- [ ] Verify hover states (border color, shadow)
- [ ] Click funnel card
- [ ] Verify navigation to `/patient/funnel/stress-assessment/intro`
- [ ] Test on mobile viewport (< 768px)
- [ ] Test on tablet viewport (768px - 1024px)
- [ ] Test on desktop viewport (> 1024px)
- [ ] Toggle dark mode
- [ ] Verify all colors/styles work in dark mode
- [ ] Test with network offline (error state)
- [ ] Test with empty catalog (empty state)

---

## Evidence Files

- **Implementation:** All code committed to branch `copilot/implement-funnel-catalog-ui-api`
- **Tests:** `app/api/funnels/catalog/__tests__/catalog.test.ts` (6 passing)
- **Documentation:** `docs/V05_I02_1_CATALOG_IMPLEMENTATION.md`
- **Migration:** `supabase/migrations/20251231142000_create_funnel_catalog.sql`

---

## Status

âœ… **Implementation Complete**
âœ… **Tests Passing**
âœ… **Build Successful**
âœ… **Documentation Complete**

âš ï¸ **Manual UI Testing Required:** Screenshot pending local dev environment
