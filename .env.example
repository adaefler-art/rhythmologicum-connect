# ===================================================================
# Rhythmologicum Connect - Environment Variables
# ===================================================================
# This file serves as a template for required environment variables.
# Copy this file to .env.local and fill in your actual values.
# 
# For deployment on Vercel, these variables must be configured in:
# Project Settings > Environment Variables
# ===================================================================

# -------------------------------------------------------------------
# REQUIRED: Supabase Configuration
# -------------------------------------------------------------------
# These variables are REQUIRED for the application to function.
# Get these from your Supabase project dashboard:
# https://app.supabase.com/project/_/settings/api

# Public Supabase URL (safe to expose to client)
NEXT_PUBLIC_SUPABASE_URL=https://ulkobfoooxiyakqcpazz.supabase.co

# Public anonymous key (safe to expose to client)
# This key has limited permissions defined by Row Level Security (RLS)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Service role key (KEEP SECRET - server-side only)
# This key bypasses RLS and has full database access
# Used by API routes for administrative operations
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# -------------------------------------------------------------------
# OPTIONAL: Anthropic AI Configuration
# -------------------------------------------------------------------
# These variables are OPTIONAL. If not set, AMY AI features will use
# fallback responses instead of calling the Anthropic API.
# Get your API key from: https://console.anthropic.com/

# Anthropic API key for AMY AI assistant
# If not set, AMY falls back to generic assessments
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Optional: Specify Anthropic model version
# Default: claude-sonnet-4-5-20250929
# ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# Alternative token name (legacy support)
# ANTHROPIC_API_TOKEN=your-anthropic-api-key-here

# -------------------------------------------------------------------
# OPTIONAL: Feature Flags
# -------------------------------------------------------------------
# Feature flags control which features are enabled/disabled.
# All flags are OPTIONAL and default to 'true' (enabled).
# 
# Accepted values:
#   Enable:  true, 1, yes (case-insensitive)
#   Disable: false, 0, no (case-insensitive)
#
# See docs/FEATURE_FLAGS.md for detailed documentation.

# Enable/disable AMY AI assistant
# When false: AMY sections are hidden, API uses fallback responses
# Default: true
# NEXT_PUBLIC_FEATURE_AMY_ENABLED=true

# Enable/disable clinician dashboard
# When false: /clinician routes are blocked, clinicians redirected to patient portal
# Default: true
# NEXT_PUBLIC_FEATURE_CLINICIAN_DASHBOARD_ENABLED=true

# Enable/disable chart visualizations in clinician views
# When false: Charts are hidden but other patient data remains accessible
# Default: true
# NEXT_PUBLIC_FEATURE_CHARTS_ENABLED=true

# -------------------------------------------------------------------
# OPTIONAL: Usage Telemetry Configuration
# -------------------------------------------------------------------
# Controls runtime usage telemetry for API endpoints.
# 
# Defaults:
#   Development: ON (helps identify unused endpoints during development)
#   Production/Preview: OFF (avoids misleading data from ephemeral storage)
#
# Accepted values:
#   Enable:  true, 1, yes (case-insensitive)
#   Disable: false, 0, no (case-insensitive)
#   Unset:   Use environment-based default (dev=ON, prod/preview=OFF)
#
# When disabled:
#   - No usage data is recorded
#   - /api/admin/usage endpoint remains accessible but returns enabled:false
#   - No impact on application functionality
#
# USAGE_TELEMETRY_ENABLED=true

# -------------------------------------------------------------------
# LEGACY/ALTERNATIVE Variable Names
# -------------------------------------------------------------------
# These are alternative names supported for backward compatibility.
# You typically don't need to set these if you've set the primary names above.

# Alternative Supabase URL name
# SUPABASE_URL=https://your-project.supabase.co

# Alternative service role key name
# SUPABASE_SERVICE_KEY=your-service-role-key-here

# -------------------------------------------------------------------
# NOTES FOR VERCEL DEPLOYMENT
# -------------------------------------------------------------------
# 
# 1. Environment Scopes in Vercel:
#    - Production: Used for production deployments (main branch)
#    - Preview: Used for preview deployments (pull requests)
#    - Development: Used for local development only (not on Vercel)
#
# 2. Required for ALL environments:
#    - NEXT_PUBLIC_SUPABASE_URL
#    - NEXT_PUBLIC_SUPABASE_ANON_KEY
#    - SUPABASE_SERVICE_ROLE_KEY
#
# 3. Recommended for Production:
#    - ANTHROPIC_API_KEY (for full AMY functionality)
#
# 4. Feature Flags Strategy:
#    - Production: All enabled (default)
#    - Preview: Match production or test specific flags
#    - Development: Configure per developer preference
#
# 5. Security Best Practices:
#    - NEVER commit .env.local to version control
#    - Keep SUPABASE_SERVICE_ROLE_KEY secret
#    - Keep ANTHROPIC_API_KEY secret
#    - Rotate keys if accidentally exposed
#    - Use different Supabase projects for production vs. preview
#
# -------------------------------------------------------------------
# QUICK START
# -------------------------------------------------------------------
#
# For Local Development:
# 1. Copy this file: cp .env.example .env.local
# 2. Fill in NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY
# 3. Fill in SUPABASE_SERVICE_ROLE_KEY
# 4. (Optional) Add ANTHROPIC_API_KEY for AI features
# 5. Run: npm run dev
#
# For Vercel Deployment:
# 1. Go to Vercel project settings > Environment Variables
# 2. Add all REQUIRED variables for Production scope
# 3. Add same variables for Preview scope (can use same values or separate project)
# 4. (Optional) Add ANTHROPIC_API_KEY
# 5. Deploy: git push origin main
#
# -------------------------------------------------------------------
