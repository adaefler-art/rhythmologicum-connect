[{"assignees":[],"body":"Scope:\n- docs/counseling/PANEL_V1.md (Panelbeschreibung)\n- docs/counseling/PDF_DOWNLOAD.md (Endpoint, Header, Audit)\n- Smoke-Script: assign clinician, run diagnosis, open panel, download PDF, Mock-Call/Termin, Audit pr√ºfen\n\nAcceptance Criteria:\n- Docs vorhanden & epic-verlinkt\n- Smoke reproducible\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1rA","name":"docs","description":"","color":"ededed"}],"number":755,"state":"OPEN","title":"E77.8 ‚Äî Docs + Ops Smoke Script Counseling Panel"},{"assignees":[],"body":"Ziel: Keine Leaks, nur berechtigte Nutzer auf Counseling-Panel/Daten.\n\nScope:\n- RLS f√ºr diagnosis_runs/artifacts korrekt (E76)\n- API-Endpoint f√ºr PDF: AuthZ assigned clinician/org enforced\n- Patientensummary nur mit erlaubten Feldern\n\nAcceptance Criteria:\n- Unassigned: kein Zugang\n- Assigned: Zugang ok\n- Fehler deterministisch (403/404)\n\nTest Plan:\n- RLS/ACL f√ºr PDF/Panel-Daten testen\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"},{"id":"LA_kwDOQfuwnc8AAAACSNWpzA","name":"security","description":"","color":"ededed"}],"number":754,"state":"OPEN","title":"E77.7 ‚Äî Access Control Hardening (RLS + API auth) f√ºr Counseling Panel"},{"assignees":[],"body":"Ziel: Alle relevanten operativen Aktionen audit-loggen, sowohl Backend als auch UI-Mocks.\n\nScope:\n- Audit-Events: DIAGNOSIS_PDF_DOWNLOADED, MOCK_CALL_STARTED, MOCK_APPOINTMENT_CREATED\n- Optional: UPDATED/CANCELLED if persistiert\n- Pflichtfelder: actor_user_id, role, org_id, entity_type/id, metadata (timestamp, evt. Notizen)\n\nAcceptance Criteria:\n- Aktionen erzeugen Audit-Log-Eintrag\n- Audit Log in DB/UIs sichtbar\n\nTest Plan:\n- Aktionen ausl√∂sen, Eintrag nachpr√ºfen\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"},{"id":"LA_kwDOQfuwnc8AAAACSNWpzA","name":"security","description":"","color":"ededed"}],"number":753,"state":"OPEN","title":"E77.6 ‚Äî Audit f√ºr operative Aktionen (Downloads, Mock-Calls, Mock-Termine)"},{"assignees":[],"body":"Ziel: Clickable Mock-UX f√ºr Termin und Videocall, nur lokal, plausibles UI.\n\nScope:\n- ‚ÄúTermin vorschlagen‚Äù (Modal: Datum/Uhrzeit/Text)\n- ‚ÄúVideocall starten‚Äù (zeigt Meeting-Code, Copy-Button)\n- Keine externen Calls/APIs\n- Audit (mindestens lokal)\n- Datenspeicherung optional\n\nAcceptance Criteria:\n- Mock-Flows nutzbar, crashfrei\n- Keine externen Integrationen\n\nTest Plan:\n- Modals √∂ffnen/schlie√üen, Terminvorschlag absenden\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"}],"number":752,"state":"OPEN","title":"E77.5 ‚Äî Mock Videocall/Terminmanagement UI (kein Integration)"},{"assignees":[],"body":"Ziel: UI-Button im Beratungspanel triggert Download zuverl√§ssig, zeigt Status/Fehler deterministisch.\n\nScope:\n- Download-Button: nur wenn PDF verf√ºgbar/run succeeded\n- Download in neuem Tab/Browser-Download\n- UX States: disabled, Fehleranzeige\n- Provenance (Datum, Model, Prompt-Version optional)\n\nAcceptance Criteria:\n- Download Button erscheint nur bei Erfolg\n- Download liefert echtes PDF\n- Fehler deterministisch/stabil\n\nTest Plan:\n- Queued run ‚Üí Button disabled\n- Succeeded run ‚Üí Download funktioniert\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX0_Q","name":"epic","description":"","color":"ededed"},{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"}],"number":751,"state":"OPEN","title":"E77.4 ‚Äî Studio UI: PDF-Download-Button & UX-Kontrakte"},{"assignees":[],"body":"Ziel: Endpunkt GET /api/studio/diagnosis-runs/{runId}/download.pdf liefert PDF f√ºr berechtigten Clinician, loggt Audit.\n\nScope:\n- AuthZ: assigned clinician/admin in org\n- PDF aus diagnosis_json\n- Audit log: action, runId, patientId, actor_user_id, role, entity, metadata\n- Optional: caching in diagnosis_artifacts\n\nAcceptance Criteria:\n- Clinician kann PDF downloaden\n- Unassigned denied/no leak\n- Audit Log per Download\n\nTest Plan:\n- Assigned Download klappt\n- Unauthorized denied + kein Leak\n- Audit-Eintrag vorhanden\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"},{"id":"LA_kwDOQfuwnc8AAAACSNWpzA","name":"security","description":"","color":"ededed"}],"number":750,"state":"OPEN","title":"E77.3 ‚Äî API: Download Diagnose PDF (authz + audit)"},{"assignees":[],"body":"Ziel: Diagnose-Artefakt (diagnosis_json) wird zu PDF (Header: Patient, run_id, created_at, prompt/model versions, Summary, DiffDiag, Recommendations, Red flags, Disclaimer)\n\nScope:\n- Funktion: renderDiagnosisPdf(artifactJson, meta) -> PDF Bytes\n- Styling minimal/stabil/ohne Webfonts\n- Fail fast: invalid JSON ‚Üí error code\n- PHI beachten (keine Rohdaten dumps)\n\nAcceptance Criteria:\n- PDF generiert aus realem diagnosis artifact\n- Enth√§lt Kernsektionen + Metadaten\n- Fehlerf√§lle sauber (invalid artifact, missing run)\n\nTest Plan:\n- PDF download √∂ffnet bei bekanntem Artifact\n- Invalid JSON ‚Üí deterministischer Error\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX0_Q","name":"epic","description":"","color":"ededed"},{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"}],"number":749,"state":"OPEN","title":"E77.2 ‚Äî PDF Generator v1: Diagnose JSON ‚Üí PDF Render (server-side)"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nZiel: Ein dedizierter Studio-Bereich ‚ÄúBeratung‚Äù/‚ÄúCounseling Panel‚Äù, der zentral pro Patient/Case die Diagnose zug√§nglich macht.\n\nScope:\n- Studio Route(s): Studio ‚Üí Patient Detail ‚Üí Beratung (Tab) oder /counseling/{patientId}\n- Layout: left: Patient summary (minimal), main: latest diagnosis run + status\n- Actions: Download PDF, Mock call, Mock appointment\n- Deterministic UI states: loading/empty/error\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance Criteria:\n- Panel erreichbar und performant\n- Zeigt latest diagnosis run status + summary (falls vorhanden)\n- Keine unhandled errors bei missing data\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nTest Plan:\n- Patient ohne run ‚Üí empty state\n- Patient mit succeeded run ‚Üí panel zeigt summary\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report.","labels":[],"number":748,"state":"OPEN","title":"E77.1 ‚Äî Studio Beratungspanel: Navigation + Case-Layout (MVP)"},{"assignees":[],"body":"**Epic Ziel:**\nE77 liefert ein operativ nutzbares Beratungspanel im Studio: Ein Clinician kann einen Case √∂ffnen, das Diagnose-Artefakt sehen, ein Diagnose-PDF herunterladen, und einen Mock-Flow f√ºr Videocall/Terminmanagement nutzen. Alle relevanten Aktionen sind auditierbar.\n\n**Gate-Abh√§ngigkeiten:**\n- E76: Diagnose-Runs erzeugen Artefakte (JSON) und sind im Studio sichtbar\n- E75: Anamnese existiert (als Input, optional angezeigt)\n- E73: Legacy ghosting + CI stabil\n- Optional: PDF/Storage-Utilities vorhanden\n\n**SSOT f√ºr E77:**\n- Diagnose: diagnosis_runs, diagnosis_artifacts\n- Audit: audit_log (oder pilot_flow_events)\n\n**Exit Criteria:**\n- Studio Beratungspanel existiert und ist navigierbar\n- Diagnose-Artefakt kann als PDF generiert u. heruntergeladen werden\n- Videocall/Terminmanagement Mock-UI verf√ºgbar\n- Downloads/Mock-Aktionen werden audit-geloggt\n- Zugriff und Auth korrekt (nur assigned clinician/org)\n\n**Ergebnis-Artefakte:**\n- RULES_VS_CHECKS_MATRIX.md, Diff-Report\n- Endpoint-Katalog-Artefakte: docs/api/ENDPOINT_CATALOG.md, ORPHAN_ENDPOINTS.md, UNKNOWN_CALLSITES.md, UNKNOWN_ACCESS_ENDPOINTS.md\n\nüîí Guardrails\n\n- Jede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\n- Output eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\n- Ergebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report.\n- \"No endpoints without callsite\" ist als absolute Regel zu hart; erlaubt ist: tempor√§r orphan, aber nur allowlisted + Removal-Ticket (Deadline).\n- G2 ‚Äî Endpoint Catalog Gate (Orphans/Unknown) ist verbindlich\n- G3 ‚Äî DB Migration Idempotency Gate ist verbindlich\n- G4 ‚Äî ‚ÄúLint changed lines‚Äù darf keine generierten Artefakte linten\n- G5 ‚Äî Mobile-v2 Surface Isolation (kein Legacy im (mobile))\n- G6 ‚Äî Content ist ‚Äúecht‚Äù (kein Mock/Build-Time), Verhalten ist deterministisch\n- G7 ‚Äî Legacy Ghosting ist verpflichtend, um Drift sofort sichtbar zu machen.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX0_Q","name":"epic","description":"","color":"ededed"}],"number":747,"state":"OPEN","title":"EPIC E77 ‚Äî Studio Beratungspanel inkl. Diagnose-PDF und Mock-Termin/Videocall (Release v0.7)"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nDeveloper-Doku/Runbooks:\n- MCP_SERVER.md (Run/ENV)\n- ARTIFACT_SCHEMA_V1.md\n- SECURITY_MODEL.md\n- Troubleshooting: LLM_ERROR, VALIDATION_ERROR, AUTH_ERROR\n- Check Alignment: Mapping rules‚Üîchecks (Policytests, Schamavalidierungen)\n- Onboarding Steps f√ºr lokale Ausf√ºhrung\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance/Test:\n- Doku vorhanden, Onboarding erfolgreich, Mapping dokumentiert\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[],"number":746,"state":"OPEN","title":"E76.9 ‚Äî Docs & Developer Runbook (Failsafe f√ºr Checks)"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nDeterministische Berechnung des inputs_hash aus Context Pack (Stable/Sortierung). Dedupe-Policy implementieren (A: allow duplicates always, Warnung; oder B: innerhalb Zeitfenster only). inputs_meta mit Referenzen/IDs persistieren.\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance/Test:\n- inputs_hash stabil (gleicher Zustand = gleiche Hash)\n- Dedupe-Policy greift deterministisch\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[],"number":745,"state":"OPEN","title":"E76.8 ‚Äî Determinismus & Idempotenz: inputs_hash + Dedupe Policy"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nRLS-Policies f√ºr diagnosis_runs, diagnosis_artifacts: Zugriffsregeln, Auditlog (run/artifact created, artifact viewed/downloaded). Nur zugewiesene Personen, keine Leaks, Korrekte Audit-Dokumentation.\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance/Test:\n- Zugriff NUR f√ºr Assignments\n- Audit events und Policy-Tests\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[],"number":744,"state":"OPEN","title":"E76.7 ‚Äî Security/RLS + Audit f√ºr Diagnose"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nUI-Komponenten (Studio): Tab ‚ÄúDiagnosis‚Äù bei Patient, ListView aller Runs (Status/Timestamp), Detailansicht mit Summary + JSON-Render. Robuste Status (loading/empty/error), keine PDF (E77).\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance/Test:\n- Run starten, View nach Erfolg\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[],"number":743,"state":"OPEN","title":"E76.6 ‚Äî Studio UI: Diagnose Runs + Artifact Viewer (JSON)"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nDefiniere Prompt-B√ºndel (prompt_bundle_version/prompt_version) und JSON Schema v1 f√ºr Diagnose-Artefakte:\n- summary, patient_context_used, differential_diagnoses (mit rationale/confidence), recommended_next_steps, urgent_red_flags, disclaimer.\n- Explizite Anweisung: Kein Medical Advice, nur zur Pr√ºfung durch Clinician.\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance/Test:\n- Prompt+Schema dokumentiert und validiert gegen Output\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[],"number":742,"state":"OPEN","title":"E76.5 ‚Äî Prompt v1 (Diagnosis JSON Spec) + Output Schema Contract"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nWorker (cron/job/queue) f√ºr queuete Diagnose-Runs: Setzt Status, holt Context Pack, ruft LLM/MCP, persistiert Artefakt (bei Fehler: Status failed inkl. Error-Payload). Konkurenz vermeiden, minimale Schema-Validation (diagnosis JSON), sensible Daten only restricted accessible.\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance/Test:\n- Run verarbeitet, Artefakt geschrieben\n- Invalides Ergebnis: Status failed mit VALIDATION_ERROR\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[],"number":741,"state":"OPEN","title":"E76.4 ‚Äî Execution Worker: Diagnose-Run ausf√ºhren + Artefakt persistieren"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nImplementiere Studio-API-Endpunkte f√ºr Diagnose-Runs:\n- POST /api/studio/patients/{patientId}/diagnosis-runs\n- GET /api/studio/patients/{patientId}/diagnosis-runs\n- GET /api/studio/diagnosis-runs/{runId}\n- GET /api/studio/diagnosis-runs/{runId}/artifacts\n- GET /api/studio/diagnosis-artifacts/{artifactId}\nZustandsmaschine: queued ‚Üí running ‚Üí succeeded|failed. Auth: Nur zugewiesener Clinician/Admin.\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance/Test:\n- Run erstellen, Lifecycle durchlaufen, Zugriffsrechte korrekt enforced\n- Dedupe: gleiche Inputs innerhalb Zeitfenster optional\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[],"number":740,"state":"OPEN","title":"E76.3 ‚Äî Runs API (Studio): Create/Read/List + State Machine"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nImplementierung des standardisierten \"Patient Context Pack\" als Input f√ºr LLM ‚Äì beinhaltet Anamnese, ausgew√§hlte History, Funnel-Runs, aktuelle Results, Provenance-Metadata. Begrenzung des Outputs (z. B. max 30 Anamnese-Entries, max 2 Runs je Funnel) zwingend. Deterministischer, stabiler inputs_hash.\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance/Test:\n- Context Pack enth√§lt richtige Daten\n- Hash-Berechnung ist stabil und korrekt\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[],"number":739,"state":"OPEN","title":"E76.2 ‚Äî Context Pack Builder v1 (Anamnese + Funnel Runs + Results)"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nMCP-Server als eigenst√§ndiger Service/Process, startbar mit Health-Endpoint und deterministischer Tool-API.\n\nScope:\n- Eigenes MCP-Server-Projekt/Package (startbar, Health-Endpoint, Logging)\n- Tool-API: get_patient_context(patient_id), run_diagnosis(patient_id, options)\n- MCP Tool-Responses deterministisch schema-basiert (zod/json schema)\n- Logging: correlation id = run_id\n- Secrets: LLM-API-Key via ENV, keine Leakage in Logs\n- Versioning (mcp_server_version, run_version, prompt_version)\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nAcceptance/Test:\n- Server startbar/Health-Check\n- Tools liefern stubbed Response\n- Version-Metadata-Ausgabe\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[],"number":738,"state":"OPEN","title":"E76.1 ‚Äî MCP Server Skeleton + Tooling Contract"},{"assignees":[],"body":"Ziel:\nE76 liefert ein echtes, startbares Diagnose-System als MCP Server mit LLM-Integration, das aus Anamnese (E75) + Funnel Runs (E74) strukturierte Diagnose-Artefakte erzeugt, persistiert und im Studio sichtbar macht. Noch ohne medizinisches Guardrailing/Regelwerk (kommt sp√§ter), aber technisch sauber: deterministisch, versioniert, auditierbar, idempotent.\n\nAbh√§ngigkeiten:\n- E75: Anamnese API + Speicher + Zugriff/Assignments\n- E74: Funnel A/B Runs + answers + SSOT Results\n- E73: Legacy Ghosting + stabile API Ownership + CI Hardening\n\nData Model (verbindlich):\nTabellen:\n- diagnosis_runs\n- diagnosis_artifacts\n(Vgl. detaillierte Struktur im Prompt)\n\nExit Criteria (DoD):\n- Diagnose-Run startbar (Studio), vollst√§ndiger Lifecycle, Artefakt persistiert\n- Audit/Provenance vorhanden, keine Legacy-Abh√§ngigkeiten\n- Stabiler Contract: Reruns idempotent/traceable, Failure States erkl√§rbar\n\nArtefakte:\n- RULES_VS_CHECKS_MATRIX.md + Diff-Report\n- docs/api/ENDPOINT_CATALOG.md\n- ORPHAN_ENDPOINTS.md\n- UNKNOWN_CALLSITES.md\n- UNKNOWN_ACCESS_ENDPOINTS.md\n- docs/diagnosis/MCP_SERVER.md\n- docs/diagnosis/ARTIFACT_SCHEMA_V1.md\n- docs/diagnosis/SECURITY_MODEL.md\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (schnelle Diagnose).\nErgebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check / checks-without-rule / scope mismatch).","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX0_Q","name":"epic","description":"","color":"ededed"},{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"}],"number":737,"state":"OPEN","title":"EPIC E76 ‚Äî Diagnose Agentic System v1 (MCP Server + LLM Integration) ‚Äî Release v0.7 Plan"},{"assignees":[],"body":"Ziel\nVerhindert Drift: Anamnese Schema + API contract + UI mapping klar dokumentiert & checks‚Üîguardrails abgedeckt.\n\nScope\n- docs/anamnesis/SCHEMA_V1.md: entry types, required fields\n- docs/anamnesis/API_V1.md: endpoints & status codes\n- docs/anamnesis/SECURITY_MODEL.md (RLS, assignments)\n- Minimal ‚ÄûRLS Smoke Script‚Äú + CI-Docs-Link\n- Mapping rules ‚Üî checks (RLS-Test=Rule ID)\n\nAcceptance Criteria\n- Docs vorhanden und in Issues referenziert\n- Manueller Test-Script existiert, l√§uft gr√ºn\n\nüîí Guardrails\nJede Regel hat Check-Implementierung (Script/CI) und umgekehrt, jeder Check referenziert Regel-ID. Ergebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check/checks-without-rule/scope mismatch). Output eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\n","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"},{"id":"LA_kwDOQfuwnc8AAAACRTX1rA","name":"docs","description":"","color":"ededed"}],"number":736,"state":"OPEN","title":"E75.7 ‚Äî Contract + Docs + Check Alignment (minimizes future failures)"},{"assignees":[],"body":"**Strategy A ‚Äì Vertical Slice Requirements**\n- Endpoint changes require at least one literal callsite in the same PR (fetch('/api/...') literal).\n- If feature is not live: gate callsite behind a feature flag, but keep the literal string.\n- External-only endpoints: allowlist entry with justification.\n\nZiel\nExportierbarkeit (min. JSON) f√ºr Patient/Clinician, korrekt scoped.\n\nScope\n- Endpoint:\n   * GET /api/patient/anamnesis/export.json\n   * GET /api/studio/patients/{patientId}/anamnesis/export.json\n- Payload: entries (letzte Version), Option: ?include_versions=true, Metadata: generated_at, patient_id, org_id\n- Audit-Export-Event\n- Minimal wiring (flagged) ist Teil dieses Issues/PR.\n\nNon-Goals\n- Kein PDF/FHIR Export (sp√§ter)\n\nAcceptance Criteria\n- Endpoint liefert korrekt und compliant\n- JSON-Schema stabil/dokumentiert\n- [ ] If an API route is introduced/changed: at least one in-repo literal callsite exists.\n- [ ] Endpoint wiring gate shows no orphan for this endpoint.\n- [ ] (If external) allowlist entry exists with justification.\n\nTest Plan\n- Patient-Export nur eigene Daten\n- Clinician-Export nur assigned\n\nüîí Guardrails\nJede Regel hat Check-Implementierung (Script/CI) und umgekehrt, jeder Check referenziert Regel-ID. Ergebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check/checks-without-rule/scope mismatch). Output eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).","labels":[],"number":735,"state":"OPEN","title":"E75.6 ‚Äî Export v1: JSON Export (Patient + Clinician)"},{"assignees":[],"body":"Ziel\nFunnel/Assessment-Daten k√∂nnen als system-generated summary Eintrag in Anamnese gespeichert werden.\n\nScope\n- Nach Assessment-Completion: create/update anamnesis_entries vom Typ funnel_summary\n- Referenzen: funnel_slug/version, assessment_id, key answers, results summary\n- Policy: Ein Summary je (patient, funnel, assessment) oder rollierend, Provenienz speichern\n\nNon-Goals\n- Kein narrative Clinical Writing\n- Kein Merging √ºber Funnels\n\nImplementation Notes\n- Idempotent: Reprocessing erzeugt keine Duplikate\n- F√ºr E76 (Diagnose-Bridge): Struktur klar\n\nAcceptance Criteria\n- Completion erstellt summary entry\n- Reprocessing ‚Üí keine Duplikate\n- Clinician sieht Eintrag\n\nTest Plan\n- Assessment complete ‚Üí summary\n- Re-run job ‚Üí 1 summary\n\nüîí Guardrails\nJede Regel hat Check-Implementierung (Script/CI) und umgekehrt, jeder Check referenziert Regel-ID. Ergebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check/checks-without-rule/scope mismatch). Output eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\n","labels":[{"id":"LA_kwDOQfuwnc8AAAACSNWpPg","name":"integration","description":"","color":"ededed"}],"number":734,"state":"OPEN","title":"E75.5 ‚Äî Funnel ‚Üí Anamnese Integration (Summaries as entries)"},{"assignees":[],"body":"Ziel\nClinician sieht Patient-Anamnese und kann Eintr√§ge erg√§nzen.\n\nScope\n- Studio patient detail: Anamnese tab\n  * list + latest versions\n  * add clinician note/diagnosis/medication\n  * append/edit/archive\n  * Access nur via Assignment\n\nNon-Goals\n- Kein Bulk-Import\n- Kein Approvals\n\nAcceptance Criteria\n- Clinician kann assigned ansehen/erg√§nzen\n- Patient kann sehen\n- Unassigned ‚Üí denied\n\nTest Plan\n- Assign clinician ‚Üí okay\n- Remove assignment ‚Üí denied\n\nüîí Guardrails\nJede Regel hat Check-Implementierung (Script/CI) und umgekehrt, jeder Check referenziert Regel-ID. Ergebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check/checks-without-rule/scope mismatch). Output eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\n","labels":[],"number":733,"state":"OPEN","title":"E75.4 ‚Äî Studio UI: Clinician Anamnese View + Entry Add/Edit"},{"assignees":[],"body":"Ziel\nPatient kann Anamnese sehen und minimal bearbeiten.\n\nScope\n- Anamnese-Screen (mobile v2):\n   * list grouped nach entry_type/Datum\n   * entry detail (letzte Version)\n   * Add (MVP Form)\n   * Edit = neue Version\n   * Archive\n   * Deterministische UI states: loading/empty/error/offline\n\nNon-Goals\n- Komplexe Forms (nur 3‚Äì5 Typen)\n- Keine rich Filters\n\nImplementation Notes\n- Form mapped zu entry_type: symptom, medication, note, allergy (Start)\n- UI zeigt ‚Äûlast updated/creator‚Äú\n\nAcceptance Criteria\n- Patient add/update/view\n- √Ñnderungen persistiert\n- Kein Legacy in (mobile)\n\nTest Plan\n- Add ‚Üí erscheint\n- Edit ‚Üí neue Version\n\nüîí Guardrails\nJede Regel hat Check-Implementierung (Script/CI) und umgekehrt, jeder Check referenziert Regel-ID. Ergebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check/checks-without-rule/scope mismatch). Output eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\n","labels":[],"number":732,"state":"OPEN","title":"E75.3 ‚Äî Patient UI: Anamnese Timeline v1"},{"assignees":[],"body":"Ziel\nAPI liefert deterministisches Verhalten, erzeugt Versions korrekt.\n\nScope\nPatient:\n- GET /api/patient/anamnesis (list heads)\n- GET /api/patient/anamnesis/{entryId} (inkl. Versions)\n- POST /api/patient/anamnesis (neu + version 1)\n- POST /api/patient/anamnesis/{entryId}/versions (neue Version)\n- POST /api/patient/anamnesis/{entryId}/archive\nStudio/Clinician:\n- GET /api/studio/patients/{patientId}/anamnesis\n- POST /api/studio/patients/{patientId}/anamnesis\n- POST /api/studio/anamnesis/{entryId}/versions\n- POST /api/studio/anamnesis/{entryId}/archive\n\nDeterministische Fehler:\n- 404 bei nicht zug√§nglich\n- 403 f√ºr Role-Verletzung\n- 409 bei Update auf archiviert (optional)\n\nImplementation Notes\n- Create: head+version 1 in Transaktion\n- Update: neue Version + head.updated_at\n- Validation: schema by entry_type, max size f√ºr jsonb\n\nAcceptance Criteria\n- Patient kann CRUD auf eigene\n- Clinician f√ºr zugewiesene Patienten\n- Update immer neue Version\n- API gibt latest+Versions deterministisch zur√ºck\n\nTest Plan\n- Create, dann update‚ÜíVersion 1..3\n- Archive‚Üíupdate‚Üí409 (wenn Policy)\n- Unauthorized‚Üí404/403\n\nüîí Guardrails\nJede Regel hat Check-Implementierung (Script/CI) und umgekehrt, jeder Check referenziert Regel-ID. Ergebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check/checks-without-rule/scope mismatch). Output eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\n","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"}],"number":731,"state":"OPEN","title":"E75.2 ‚Äî Anamnese API v1 (Patient + Studio): CRUD via versioning"},{"assignees":[],"body":"Ziel\nNeue Tabellen + Policies so, dass:\n- Patient sieht/bearbeitet nur eigene Eintr√§ge\n- Clinician sieht Eintr√§ge f√ºr zugewiesene Patienten\n- Orgs/Assignments werden ber√ºcksichtigt\n- Keine Cross-Org Leaks\n\nScope\nMigrations f√ºr:\n- create anamnesis_entries\n- create anamnesis_entry_versions\n- Indexes: (patient_id, updated_at desc), (entry_id, version desc)\n- RLS-Policies (Supabase/Postgres):\n   * Patient: patient_profiles.user_id = auth.uid()\n   * Clinician: Zugriff wenn clinician_patient_assignments.clinician_user_id = auth.uid()\n   * Admin: via org membership\n- Audit: insert/update ‚Üí audit_log (oder bestehend)\n\nNon-Goals\n- Kein Feld-basiertes Access\n- Kein Multi-Org patient federation\n\nImplementation Notes\n- Versionen immutable (no update, nur neuer Insert)\n- anamnesis_entries.updated_at ist latest version timestamp\n- Migration idempotent (DROP/CREATE IF NOT EXISTS, guarded)\n\nAcceptance Criteria\n- Tabellen/Migration Rerunnable\n- RLS sch√ºtzt korrekt (Patient A sieht nicht B)\n- Clinician Zugriff nur via Assignment\n- Admin kann via Org (wenn gew√ºnscht)\n\nTest Plan\n- RLS-Test-Scripts: eigene Eintr√§ge ja, fremde nein\n- Clinician assigned: Zugang ja, sonst nein\n- Admin in Org: Zugang ja (falls gew√ºnscht)\n\nüîí Guardrails\nJede Regel hat Check-Implementierung (Script/CI) und umgekehrt, jeder Check referenziert Regel-ID. Ergebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check/checks-without-rule/scope mismatch). Output eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\n","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"},{"id":"LA_kwDOQfuwnc8AAAACSNNISw","name":"db","description":"","color":"ededed"},{"id":"LA_kwDOQfuwnc8AAAACSNWpzA","name":"security","description":"","color":"ededed"}],"number":730,"state":"OPEN","title":"E75.1 ‚Äî DB Schema: Anamnese Tables v1 + RLS/Access Model"},{"assignees":[],"body":"Epic Ziel\n\nE75 etabliert eine dauerhafte, versionierte, auditierbare Anamnese als gemeinsame Wissensbasis f√ºr Patient und Clinician. Sie ist scoped (Org/Assignments), SSOT-f√§hig (kein patient_state als ‚Äúdumping ground‚Äù f√ºr medizinische Inhalte) und exportierbar (mind. JSON). E75 liefert die Grundlage f√ºr E76 (Diagnose via MCP/LLM).\n\nAbh√§ngigkeit (Gate):\nE75 setzt voraus:\n- E73: Legacy ghosting + SSOT Results + stabile Patient/Studio Basis\n- E74: Funnels A/B laufen produktiv, Antworten sind persistiert (assessment_answers) und clinician-sichtbar\n\nSSOT f√ºr E75 (prim√§r neu): anamnesis_* (siehe Modell unten), Referenzen: patient_profiles / auth.users, organizations, clinician_patient_assignments, user_org_membership. Optional Link zu Funnel Runs: assessments, assessment_answers, calculated_results.\n\nEpic Exit Criteria (Definition of Done):\n- Patient kann Anamnese-Eintr√§ge anlegen/√§ndern & Timeline sehen\n- Clinician sieht identische (scoped) Timeline, kann eigene Eintr√§ge hinzuf√ºgen\n- √Ñnderungen sind versioniert & auditierbar (wer/was/wann)\n- Export (mind. JSON) funktioniert\n- Zugriff ist korrekt (RLS/role-gated), keine Datenleaks\n- Diagnose (E76) kann Anamnese deterministisch abrufen\n\nüîí Guardrails\nJede Regel hat Check-Implementierung (Script/CI) und umgekehrt, jeder Check referenziert Regel-ID. Ergebnis-Artefakt: RULES_VS_CHECKS_MATRIX.md + Diff-Report (rules-without-check/checks-without-rule/scope mismatch). Output eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten (f√ºr schnelle Diagnose).\n","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX0_Q","name":"epic","description":"","color":"ededed"}],"number":729,"state":"OPEN","title":"EPIC E75 ‚Äî Anamnese-Speicher (Patient + Arzt)"},{"assignees":[],"body":"CI-Drift zwischen Definition/Editor/Runner verhindern; Doku und Check-Mapping aktualisieren, End-to-end-Testscript dokumentiert.\n\n**Scope:**\n- docs/funnels/DEFINITION_V1.md (Schema + Beispiele)\n- docs/funnels/START_RESUME_SEMANTICS.md\n- docs/funnels/STUDIO_PUBLISH_GATES.md\n- Update rules-vs-checks matrix: Mapping Check ‚Üí Rule-ID\n- Ein End-to-End-Testscript f√ºr Manual-Test\n\n**Acceptance:**\n- Dokumente sind vorhanden und referenziert\n- Validator-Check ist an Rule-ID gebunden\n- Neuer Dev kann End-to-End-Test ausf√ºhren\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten. Matrix + Diff-Report: RULES_VS_CHECKS_MATRIX.md\nWeitere Guardrail-Details siehe Epic/CI-Doku.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1rA","name":"docs","description":"","color":"ededed"}],"number":727,"state":"OPEN","title":"E74.9 ‚Äî Contract/Docs + Check alignment (reducing future failures)"},{"assignees":[],"body":"Clinician-Sicht: Runs/Assessement-Verlauf, Antworten, Status und Ergebnis zusammengefasst, Zugriffsregeln wie Patient-History.\n\n**Scope:**\n- Studio: Run-Timeline, Status, Antworten, Ergebnis\n- Optional: processing/ready Status\n- RBAC: nur sichtbare Patienten\n\n**Acceptance:**\n- Clinician sieht alle Runs, Antworten & Resultate\n- Resultats-Zusammenfassung bei readiness\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten. Matrix + Diff-Report: RULES_VS_CHECKS_MATRIX.md\nWeitere Guardrail-Details siehe Epic/CI-Doku.","labels":[{"id":"LA_kwDOQfuwnc8AAAACSNN9cQ","name":"clinician","description":"","color":"ededed"}],"number":726,"state":"OPEN","title":"E74.8 ‚Äî Clinician View v1: Funnel Run Timeline + Answers + Result Summary"},{"assignees":[],"body":"Eliminiert doppelte Assessment-Runs, kl√§rt klare Resume/Create-Semantik auf Server-Seite.\n\n**Scope:**\n- API: RESUME_OR_CREATE default, atomare Policy, Locking\n- Explizit neuer Run nur mit extra Flag/Endpoint\n- Server-seitig: EIN in-progress assessment pro patient+funnel\n\n**Acceptance:**\n- Parallel/Repeat startet NICHT zweites Assessment\n- Explizit neuer Run schlie√üt vorheriges korrekt ab\n\nüîí Guardrails\nJede Regel hat eine Check-Implementierung (Script/CI) und umgekehrt: jeder Check referenziert eine Regel-ID.\nOutput eines Checks muss ‚Äûviolates R-XYZ‚Äú enthalten. Matrix + Diff-Report: RULES_VS_CHECKS_MATRIX.md\nWeitere Guardrail-Details siehe Epic/CI-Doku.","labels":[{"id":"LA_kwDOQfuwnc8AAAACRTX1KA","name":"backend","description":"","color":"e5c2f6"}],"number":725,"state":"OPEN","title":"E74.7 ‚Äî Start/Resume Idempotency: No duplicate runs, deterministic ‚Äúnew vs resume‚Äù"}]
